<?xml version="1.0" encoding="UTF-8"?>
<!-- 
 * SqlMap-W6001Doc.xml
 *
 * W6001DocDaoのSqlMapファイルです。
 *
 * Copyright (c) 2014 DENSO CORPORATION. All rights reserved.
-->
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
 
<sqlMap namespace="W6001Doc">
    <!-- ================================================== -->
    <!-- Domainの別名定義                                   -->
    <!-- ================================================== -->

    <!-- Domain -->
    <typeAlias alias="W6001DocDomain"
        type="com.globaldenso.eca0027.core.business.domain.W6001DocDomain" />
    <typeAlias alias="W6001DocInvoiceDomain"
        type="com.globaldenso.eca0027.core.business.domain.W6001DocInvoiceDomain" />
    <typeAlias alias="W6001DocPltzDomain"
        type="com.globaldenso.eca0027.core.business.domain.W6001DocPltzDomain" />
    <typeAlias alias="W6001DocPltzItemDomain"
        type="com.globaldenso.eca0027.core.business.domain.W6001DocPltzItemDomain" />
    <typeAlias alias="W6001DocPltzItemOdrDomain"
        type="com.globaldenso.eca0027.core.business.domain.W6001DocPltzItemOdrDomain" />
    <typeAlias alias="F6051CmlAtchFileDomain"
        type="com.globaldenso.eca0027.core.business.domain.F6051CmlAtchFileDomain" />

    <!-- CriteriaDomain -->
    <typeAlias alias="W6001DocCriteriaDomain"
        type="com.globaldenso.eca0027.core.business.domain.criteria.W6001DocCriteriaDomain" />
        
    <!-- ================================================== -->
    <!-- 検索結果をMapで受け取る                            -->
    <!-- ================================================== -->
    <!-- Documentation Invoice Main画面 -->
    <resultMap id="W6001DocInvoiceDomain_SearchForPagingTtInvoice" class="W6001DocInvoiceDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
        <result property="dispInvoiceIssueDt" column="MANUAL_INVOICE_ISSUE_DT" /> <!-- ST184 INVOICE ISSUE DATE/インボイス発行日 ADD -->
        <result property="manualFlg" column="MANUAL_FLG" />
        <result property="manualTyp" column="MANUAL_TYP" />
        <result property="invoiceClass" column="INVOICE_CLASS" />
        <result property="cancelTyp" column="CANCEL_TYP" />
        <result property="parInvoiceNo" column="PAR_INVOICE_NO" />
        <result property="relateInvoiceShipperCd" column="RELATE_INVOICE_SHIPPER_CD" />
        <result property="relateInvoiceNo" column="RELATE_INVOICE_NO" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="etd" column="ETD" />
        <result property="invoiceIssuerNm" column="INVOICE_ISSUER_NM" />
        <result property="countInvoiceNo" column="COUNT_INVOICE_NO" nullValue="0" />
        <result property="dnBaseFlg" column="DN_BASE_FLG" />
        <!-- // 2015/2/12 DNJP.Kawamura UT031対応 START >>>>>  -->
        <!--
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        -->
        <result property="cancelFlg" column="CANCEL_FLG" />
        <result property="cancelInvoiceNo" column="CANCEL_REF_NO" />
        <!-- // 2015/2/12 DNJP.Kawamura UT031対応 END <<<<<  -->
    </resultMap>
    
    <!-- W6001DocDomain_SearchTtInvoiceByNonDnGInvOrReInv -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByNonDnGInvOrReInv" class="W6001DocInvoiceDomain">
        <result property="manualFlg" column="MANUAL_FLG" />
        <result property="manualTyp" column="MANUAL_TYP" />
        <result property="cancelTyp" column="CANCEL_TYP" />
        <result property="shippingActNo" column="SHIPPING_ACT_NO" />
        <result property="cancelFlg" column="CANCEL_FLG" />
        <result property="dnBaseFlg" column="DN_BASE_FLG" />
    </resultMap>
    
    <!-- W6001DocDomain_SearchTtInvoiceByCancelInv -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByCancelInv" class="W6001DocInvoiceDomain">
        <result property="manualFlg" column="MANUAL_FLG" />
        <result property="manualTyp" column="MANUAL_TYP" />
        <result property="cancelTyp" column="CANCEL_TYP" />
        <result property="shippingActNo" column="SHIPPING_ACT_NO" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="cancelFlg" column="CANCEL_FLG" />
        <result property="dnBaseFlg" column="DN_BASE_FLG" />
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTtPltzInstrItemNo" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTtPltzInstrItemNo" class="W6001DocPltzDomain">
        <result property="pltzStatus" column="PLTZ_STATUS" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
    </resultMap>
    
    <!-- Invoice Main画面 PDFファイル取得 -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByFileManager" class="W6001DocInvoiceDomain">
        <result property="cancelTyp" column="CANCEL_TYP" />
        <result property="invoiceHeaderFileId" column="INVOICE_HEADER_FILE_ID" />
        <result property="packingHeadFileId" column="PACKING_HEAD_FILE_ID" />
        <result property="scHeaderFileId" column="SC_HEADER_FILE_ID" />
        <result property="cmlAtchCsvFileId" column="CML_ATCH_CSV_FILE_ID" /> <!-- UT205 CML ATTACH CSV ADD -->
    </resultMap>
    
    <!-- W6001DocDomain_SearchTtInvoiceByUploadInit -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByUploadInit" class="W6001DocInvoiceDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="cancelInvoiceNo" column="CANCEL_INVOICE_NO" />
        <result property="manualTyp" column="MANUAL_TYP" />
        <result property="invoiceClass" column="INVOICE_CLASS" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsNm" column="TRNS_NM" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="invoiceCtgryNm" column="INVOICE_CTGRY_NM" />
        <result property="etd" column="ETD" />
        <result property="eta" column="ETA" />
        <result property="arrivalTime" column="ARRIVAL_TIME" />
        <result property="lPortCntryCd" column="L_PORT_CNTRY_CD" />
        <result property="loadingPortCd" column="LOADING_PORT_CD" />
        <result property="dPortCntryCd" column="D_PORT_CNTRY_CD" />
        <result property="dischargePortCd" column="DISCHARGE_PORT_CD" />
        <result property="dlivPoint" column="DLIV_POINT" />
        <result property="carrierCompCd" column="CARRIER_COMP_CD" />
        <result property="forwarderCompCd" column="FORWARDER_COMP_CD" />
        <result property="vessel" column="VESSEL" />
        <result property="bookingNo" column="BOOKING_NO" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="freightResponsibleNm" column="FREIGHT_RESPONSIBLE_NM" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="payMethNm" column="PAY_METH_NM" />
        <result property="remLcTyp" column="REM_LC_TYP" />
        <result property="lcNo" column="LC_NO" />
        <result property="lcDt" column="LC_DT" />
        <result property="lcBankNm1" column="LC_BANK_NM_1" />
        <result property="lcBankNm2" column="LC_BANK_NM_2" />
        <result property="remBankNm" column="REM_BANK_NM" />
        <result property="remBankAddress1" column="REM_BANK_ADDRESS_1" />
        <result property="remBankAddress2" column="REM_BANK_ADDRESS_2" />
        <result property="remBankAddress3" column="REM_BANK_ADDRESS_3" />
        <result property="remBankAccountNo" column="REM_BANK_ACCOUNT_NO" />
        <result property="currCd" column="CURR_CD" />
        <result property="netAmount" column="NET_AMOUNT" />
        <result property="freight" column="FREIGHT" />
        <result property="insurance" column="INSURANCE" />
        <result property="subTotal" column="SUB_TOTAL" />
        <result property="vatRatio" column="VAT_RATIO" />
        <result property="vat" column="VAT" />
        <result property="handlingCharge" column="HANDLING_CHARGE" />
        <result property="additionalChargeNm" column="ADDITIONAL_CHARGE_NM" />
        <result property="additionalCharge" column="ADDITIONAL_CHARGE" />
        <result property="totalInvoiceAmount" column="TOTAL_INVOICE_AMOUNT" />
        <result property="pltzItemQty" column="PLTZ_ITEM_QTY" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="totalNetWeight" column="TOTAL_NET_WEIGHT" />
        <result property="totalGrossWeight" column="TOTAL_GROSS_WEIGHT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="totalVolume" column="TOTAL_VOLUME" />
        <result property="relateInvoiceShipperCd" column="RELATE_INVOICE_SHIPPER_CD" />
        <result property="relateInvoiceNo" column="RELATE_INVOICE_NO" />
        <result property="portNm1" column="PORT_NM1" />
        <result property="portNm2" column="PORT_NM2" />
        <result property="compNm1" column="COMP_NM1" />
        <result property="compNm2" column="COMP_NM2" />
        <result property="compNm3" column="COMP_NM3" />
        <result property="compNm4" column="COMP_NM4" />
        <result property="compNm5" column="COMP_NM5" />
        <result property="shipToNm" column="SHIP_TO_NM" />
        <result property="comUpdateTimestamp" column="COM_UPDATE_TIMESTAMP" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtInvoiceByUploadRegister -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByUploadRegister" class="W6001DocInvoiceDomain" groupBy="customTimingTyp, manualTyp">
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="manualTyp" column="MANUAL_TYP" />
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTtInvoiceByUploadRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTtInvoiceByUploadRegister" class="W6001DocPltzDomain">
        <result property="pltzStatus" column="PLTZ_STATUS" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
    </resultMap>
    
    <!-- W6001DocDomain_SearchTmExpShipToShipping -->
    <resultMap id="W6001DocPltzItemDomain_SearchTmExpShipToShipping" class="W6001DocPltzItemDomain">
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="containerLooseTyp" column="CONTAINER_LOOSE_TYP" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="shipToTel" column="SHIP_TO_TEL" />
        <result property="compCd" column="COMP_CD" />
        <result property="printShipToNm1" column="PRINT_SHIP_TO_NM_1" />
        <result property="printShipToNm2" column="PRINT_SHIP_TO_NM_2" />
        <result property="printShipToAddr1" column="PRINT_SHIP_TO_ADDR_1" />
        <result property="printShipToAddr2" column="PRINT_SHIP_TO_ADDR_2" />
        <result property="printShipToAddr3" column="PRINT_SHIP_TO_ADDR_3" />
        <result property="printShipToAddr4" column="PRINT_SHIP_TO_ADDR_4" />
    </resultMap>

    <!-- W6001DocDomain_LockByNoWaitTtPltz -->
    <resultMap id="W6001DocPltzDomain_LockByNoWaitTtPltz" class="W6001DocPltzDomain">
        <result property="mainMark" column="MAIN_MARK" />
    </resultMap>

    <!-- Invoice Register画面 Cancel処理 パレタイズのロック -->
    <resultMap id="W6001DocPltzDomain_LockByNoWaitTtPltzByPltzStatus" class="W6001DocPltzDomain">
        <result property="pltzStatus" column="PLTZ_STATUS" />
        <result property="mainMark" column="MAIN_MARK"/>
    </resultMap>

    <!-- W6001DocDomain_SearchTtPltz -->
    <resultMap id="W6001DocDomain_SearchTtPltz" class="W6001DocInvoiceDomain">
        <result property="pltzStatus" column="PLTZ_STATUS" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
    </resultMap>

    <!-- W6001DocDomain_SearchForPagingTtPltzByTypA -->
    <resultMap id="W6001DocDomain_SearchForPagingTtPltzByTypA" class="W6001DocPltzDomain">
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="shippingFirmNo" column="SHIPPING_FIRM_NO" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
        <result property="delayFlag" column="DELAY_FLAG" />
        <result property="workedDt" column="WORKED_DT" />
        <result property="etd" column="ETD" />
        <result property="dscId" column="DSC_ID" />
    </resultMap>

    <!-- W6001DocDomain_SearchForPagingTtPltzByTypB -->
    <resultMap id="W6001DocDomain_SearchForPagingTtPltzByTypB" class="W6001DocPltzDomain">
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="stgActNo" column="STG_ACT_NO" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
        <result property="delayFlag" column="DELAY_FLAG" />
        <result property="stgActDt" column="STG_ACT_DT" />
        <result property="etd" column="ETD" />
        <result property="dscId" column="DSC_ID" />
    </resultMap>
    
    <!-- W6001DocDomain_SearchForPagingTtPltzByTypZ -->
    <resultMap id="W6001DocDomain_SearchForPagingTtPltzByTypZ" class="W6001DocPltzDomain">
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="stgInstrNo" column="STG_INSTR_NO" />
        <result property="countMainMark" column="COUNT_MAIN_MARK" />
        <result property="delayFlag" column="DELAY_FLAG" />
        <result property="workedDt" column="WORKED_DT" />
        <result property="etd" column="ETD" />
        <result property="dscId" column="DSC_ID" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtPltzByCreate -->
    <resultMap id="W6001DocDomain_SearchTtPltzByCreate" class="W6001DocPltzDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsCdOrg" column="TRNS_CD_ORG" />
        <result property="invoiceKey" column="INVOICE_KEY" />
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="containerLooseTyp" column="CONTAINER_LOOSE_TYP" />
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 START >>>>> -->
        <result property="returnStyleCd" column="RETURN_STYLE_CD" />
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 END <<<<< -->
        <result property="rtUseFlg" column="RT_USE_FLG" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="netWeight" column="NET_WEIGHT" />
        <result property="grossWeight" column="GROSS_WEIGHT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="volume" column="VOLUME" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="commercialFlg" column="COMMERCIAL_FLG" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="currCd" column="CURR_CD" />
        <result property="pltzStatus" column="PLTZ_STATUS" />
        <result property="curWhCompCd" column="CUR_WH_COMP_CD" />
        <result property="curWhCd" column="CUR_WH_CD" />
        <result property="expLimitFlg" column="EXP_LIMIT_FLG" />
        <result property="dngrItemFlg" column="DNGR_ITEM_FLG" />
        <result property="stgInstrNo" column="STG_INSTR_NO" />
        <result property="stgActNo" column="STG_ACT_NO" />
        <result property="shippingFirmNo" column="SHIPPING_FIRM_NO" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="splitShippingNgFlg" column="SPLIT_SHIPPING_NG_FLG" />
        <result property="shipperCompNmAbb" column="SHIPPER_COMP_NM_ABB" />
        <result property="shipperCompNm1" column="SHIPPER_COMP_NM_1" />
        <result property="shipperCompNm2" column="SHIPPER_COMP_NM_2" />
        <result property="shipperCompAddr1" column="SHIPPER_COMP_ADDR_1" />
        <result property="shipperCompAddr2" column="SHIPPER_COMP_ADDR_2" />
        <result property="shipperCompAddr3" column="SHIPPER_COMP_ADDR_3" />
        <result property="shipperCompAddr4" column="SHIPPER_COMP_ADDR_4" />
        <result property="shipperCompTel" column="SHIPPER_COMP_TEL" />
        <result property="shipperCompFax" column="SHIPPER_COMP_FAX" />
        <result property="consigneeCompNm1" column="CONSIGNEE_COMP_NM_1" />
        <result property="consigneeCompNm2" column="CONSIGNEE_COMP_NM_2" />
        <result property="consigneeCompAddr1" column="CONSIGNEE_COMP_ADDR_1" />
        <result property="consigneeCompAddr2" column="CONSIGNEE_COMP_ADDR_2" />
        <result property="consigneeCompAddr3" column="CONSIGNEE_COMP_ADDR_3" />
        <result property="consigneeCompAddr4" column="CONSIGNEE_COMP_ADDR_4" />
        <result property="consigneeCompTel" column="CONSIGNEE_COMP_TEL" />
        <result property="consigneeCompFax" column="CONSIGNEE_COMP_FAX" />
        <result property="consigneeAttn" column="CONSIGNEE_ATTN" />
        <result property="shipToNm1" column="SHIP_TO_NM_1" />
        <result property="shipToNm2" column="SHIP_TO_NM_2" />
        <result property="shipToAddr1" column="SHIP_TO_ADDR_1" />
        <result property="shipToAddr2" column="SHIP_TO_ADDR_2" />
        <result property="shipToAddr3" column="SHIP_TO_ADDR_3" />
        <result property="shipToAddr4" column="SHIP_TO_ADDR_4" />
        <result property="shipToTel" column="SHIP_TO_TEL" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="reExpGoodsFlg" column="RE_EXP_GOODS_FLG" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="migrationFlg" column="MIGRATION_FLG" />
        <result property="compCd" column="COMP_CD" />
        <result property="containerNo" column="CONTAINER_NO" />
    </resultMap>

    <!-- Invoice Grouping Screen / Get Operation No Information -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByOperationNo" class="W6001DocPltzDomain">
        <result property="operationNo" column="OPERATION_NO" />
    </resultMap>
    
    <!-- W6001DocDomain_SearchTwInvPltzByOperationNoTypA -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByOperationNoTypA" class="W6001DocPltzDomain">
        <result property="shippingFirmNo" column="SHIPPING_FIRM_NO" />
        <result property="countShippingFirmNo" column="COUNT_SHIPPING_FIRM_NO" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvPltzByOperationNoTypB -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByOperationNoTypB" class="W6001DocPltzDomain">
        <result property="stgActNo" column="STG_ACT_NO" />
        <result property="countStgActNo" column="COUNT_STG_ACT_NO" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvPltzByOperationNoTypZ -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByOperationNoTypZ" class="W6001DocPltzDomain">
        <result property="stgInstrNo" column="STG_INSTR_NO" />
        <result property="countStgInstrNo" column="COUNT_STG_INSTR_NO" />
    </resultMap>

    <!-- Invoice Grouping画面 / Shipperプルダウンリストデータ取得 -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByShipperCd" class="W6001DocPltzDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
    </resultMap>

    <!-- Invoice Grouping Screen / Search / TW_INV_PLTZ + TT_PLTZ_ITEM + TW_PLTZ_ITEM_ODR -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByGropingInfo" class="W6001DocPltzDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTwInvPltzByGropingInfo" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvPltzByGropingInfo" class="W6001DocPltzItemDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="brch" column="BRCH" />
        <result property="pltzItemNo" column="PLTZ_ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="itemWeight" column="ITEM_WEIGHT" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="modelCd" column="MODEL_CD" />
        <result property="originCntryCd" column="ORIGIN_CNTRY_CD" />
        <result property="currCd" column="CURR_CD" />
        <result property="rtFlg" column="RT_FLG" />
        <result property="kitFlg" column="KIT_FLG" />
        <result property="expRequestNo" column="EXP_REQUEST_NO" />
        <result property="lineNo" column="LINE_NO" />
        <result property="kitBrch" column="KIT_BRCH" />
        <result property="parFlg" column="PAR_FLG" />
        <result property="kitParItemNo" column="KIT_PAR_ITEM_NO" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="sumQty" column="SUM_QTY" />
    </resultMap>

    <!-- W6001DocDomain_SearchTmPkgMtrl -->
    <resultMap id="W6001DocPltzItemDomain_SearchTmPkgMtrl" class="W6001DocPltzItemDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="brch" column="BRCH" />
        <result property="sortOdr" column="SORT_ODR" />
        <result property="currCd" column="CURR_CD" />
        <result property="customsValuation" column="CUSTOMS_VALUATION" />
        <!-- UT287 ADD START -->
        <result property="lengthUnit" column="LENGTH_UNIT" />
        <result property="length" column="LENGTH_OUT" />
        <result property="width" column="WIDTH_OUT" />
        <result property="height" column="HEIGHT_OUT" />
        <!-- UT287 ADD START -->
    </resultMap>

    <!-- Invoice Grouping Screen / インボイスまとめ項目  -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByGroup" class="W6001DocPltzDomain">
        <result property="dscId" column="DSC_ID" />
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="currCd" column="CURR_CD" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsCdOrg" column="TRNS_CD_ORG" />
        <result property="invoiceKey" column="INVOICE_KEY" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="containerLooseTyp" column="CONTAINER_LOOSE_TYP" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="reExpGoodsFlg" column="RE_EXP_GOODS_FLG" />
        <result property="curWhCompCd" column="CUR_WH_COMP_CD" />
        <result property="curWhCd" column="CUR_WH_CD" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="splitShippingNgFlg" column="SPLIT_SHIPPING_NG_FLG" />
        <result property="migrationFlg" column="MIGRATION_FLG" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvPltzByGroupNo1 -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByGroupNo1" class="W6001DocPltzDomain">
        <result property="dscId" column="DSC_ID" />
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="mainMark" column="MAIN_MARK" />
        <result property="grpNo1" column="GRP_NO_1" />
    </resultMap>
    
    <!-- Invoice Grouping Screen / TW_INV_PLTZ_ITEM -->
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvItemByGroupNo2" class="W6001DocPltzItemDomain">
        <result property="dscId" column="DSC_ID" />
        <result property="currCd" column="CURR_CD" />
        <result property="grpNo1" column="GRP_NO_1" />
    </resultMap>

    <!-- Invoice Grouping Screen / Search(TW_INV_PLRZ + TW_INV_ITEM for)  -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzBySearchInvoice" class="W6001DocPltzDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="shipToCompCd" column="SHIP_TO_COMP_CD" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="currCd" column="CURR_CD" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsCdOrg" column="TRNS_CD_ORG" />
        <result property="invoiceKey" column="INVOICE_KEY" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="containerLooseTyp" column="CONTAINER_LOOSE_TYP" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="reExpGoodsFlg" column="RE_EXP_GOODS_FLG" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="migrationFlg" column="MIGRATION_FLG" />
        <result property="currCd" column="CURR_CD" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTwInvPltzBySearchInvoice" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvPltzBySearchInvoice" class="W6001DocPltzItemDomain">
        <result property="grpNo1" column="GRP_NO_1" />
        <result property="grpNo2" column="GRP_NO_2" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvPltzByDetail -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByDetail" class="W6001DocPltzDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="dngrItemFlg" column="DNGR_ITEM_FLG" />
        <result property="expLimitFlg" column="EXP_LIMIT_FLG" />
        <result property="rtUseFlg" column="RT_USE_FLG" />
        <result property="grossWeight" column="GROSS_WEIGHT" />
        <result property="volume" column="VOLUME" />
        <result property="splitShippingNgFlg" column="SPLIT_SHIPPING_NG_FLG" />
        <!-- ST959 UNIT CONVERSION ADD START -->
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <!-- ST959 UNIT CONVERSION ADD END -->
        <result property="weightUnitDisp" column="WEIGHT_UNIT_DISP" />
        <result property="volumeUnitDisp" column="VOLUME_UNIT_DISP" />
    </resultMap>

    <!-- W6001DocDomain_SearchTmExpFormalitiItemNo -->
    <resultMap id="W6001DocDomain_SearchTmExpFormalitiItemNo" class="W6001DocPltzItemDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="brch" column="BRCH" />
        <result property="sortOdr" column="SORT_ODR" />
        <result property="hsCd" column="HS_CD" />
        <result property="free1RegFlg" column="FREE_1_REG_FLG" />
        <!-- <result property="free1Nm" column="FREE_1_NM" /> -->
        <result property="free1Dtl" column="FREE_1_DTL" />
        <result property="free1OriginCntryFlg" column="FREE_1_ORIGIN_CNTRY_FLG" />
        <result property="free2RegFlg" column="FREE_2_REG_FLG" />
        <!-- <result property="free2Nm" column="FREE_2_NM" /> -->
        <result property="free2Dtl" column="FREE_2_DTL" />
        <result property="free2OriginCntryFlg" column="FREE_2_ORIGIN_CNTRY_FLG" />
        <result property="free3RegFlg" column="FREE_3_REG_FLG" />
        <!-- <result property="free3Nm" column="FREE_3_NM" /> -->
        <result property="free3Dtl" column="FREE_3_DTL" />
        <result property="free3OriginCntryFlg" column="FREE_3_ORIGIN_CNTRY_FLG" />
        <!-- <result property="weightUnitDisp" column="WEIGHT_UNIT_DISP" /> -->
        <result property="originCntryCd" column="ORIGIN_CNTRY_CD" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvItemByDetailFull -->
    <resultMap id="W6001DocDomain_SearchTwInvItemByDetailFull" class="W6001DocPltzItemDomain">
        <result property="itemNo" column="ITEM_NO" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="modelCd" column="MODEL_CD" />
        <result property="currCd" column="CURR_CD" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="sumQty" column="SUM_QTY" />
        <result property="netWeight" column="SUM_NET_WEIGHT" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
    </resultMap>

    <!-- W6001DocPltzDomain_SearchTwInvPltzByShipper -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzByShipper" class="W6001DocPltzDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvPltzByConsignee -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByConsignee" class="W6001DocPltzDomain">
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="shipToCompCd" column="SHIP_TO_COMP_CD" />
    </resultMap>

    <!-- W6001DocDomain_SearchTmInvTplShipTo -->
    <resultMap id="W6001DocDomain_SearchTmInvTplShipTo" class="W6001DocDomain">
        <result property="docNo" column="DOC_NO" />
        <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
        <!--
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="hsCdDispFlg" column="HS_CD_DISP_FLG" />
        -->
        <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
    </resultMap>

    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <!-- W6001DocDomain_SearchTmInvTplShipToForDefault -->
    <resultMap id="W6001DocDomain_SearchTmInvTplShipToForDefault" class="W6001DocDomain">
        <result property="docNo" column="DOC_NO" />
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="hsCdDispFlg" column="HS_CD_DISP_FLG" />
    </resultMap>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->

    <!-- Invoice Register画面 初期表示データ取得(Detail画面から遷移時) -->
    <resultMap id="W6001DocInvoiceDomain_SearchTwInvByRegisterInit" class="W6001DocInvoiceDomain"
        groupBy="grpNo1, grpNo2">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="shipToCompCd" column="SHIP_TO_COMP_CD" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsCdOrg" column="TRNS_CD_ORG" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="currCd" column="CURR_CD" />
        <result property="shippedDt" column="SHIPPED_DT" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="printCompNm1Shipper" column="PRINT_COMP_NM_1_SHIPPER"/>
        <result property="printCompNm2Shipper" column="PRINT_COMP_NM_2_SHIPPER"/>
        <result property="printCompAddr1Shipper" column="PRINT_COMP_ADDR_1_SHIPPER"/>
        <result property="printCompAddr2Shipper" column="PRINT_COMP_ADDR_2_SHIPPER"/>
        <result property="printCompAddr3Shipper" column="PRINT_COMP_ADDR_3_SHIPPER"/>
        <result property="printCompAddr4Shipper" column="PRINT_COMP_ADDR_4_SHIPPER"/>
        <result property="compTelShipper" column="COMP_TEL_SHIPPER"/>
        <result property="compFaxShipper" column="COMP_FAX_SHIPPER"/>
        <result property="printCompNm1Consignee" column="PRINT_COMP_NM_1_CONSIGNEE" />
        <result property="printCompNm2Consignee" column="PRINT_COMP_NM_2_CONSIGNEE" />
        <result property="printCompAddr1Consignee" column="PRINT_COMP_ADDR_1_CONSIGNEE" />
        <result property="printCompAddr2Consignee" column="PRINT_COMP_ADDR_2_CONSIGNEE" />
        <result property="printCompAddr3Consignee" column="PRINT_COMP_ADDR_3_CONSIGNEE" />
        <result property="printCompAddr4Consignee" column="PRINT_COMP_ADDR_4_CONSIGNEE" />
        <result property="printShipToNm1" column="PRINT_SHIP_TO_NM_1" />
        <result property="printShipToNm2" column="PRINT_SHIP_TO_NM_2" />
        <result property="printShipToAddr1" column="PRINT_SHIP_TO_ADDR_1" />
        <result property="printShipToAddr2" column="PRINT_SHIP_TO_ADDR_2" />
        <result property="printShipToAddr3" column="PRINT_SHIP_TO_ADDR_3" />
        <result property="printShipToAddr4" column="PRINT_SHIP_TO_ADDR_4" />
        <result property="shipToTel" column="SHIP_TO_TEL" />
        <result property="containerLooseTyp" column="CONTAINER_LOOSE_TYP" />
        <result property="containerSortingKey" column="CONTAINER_SORTING_KEY" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="invoiceKey" column="INVOICE_KEY" />
        <result property="c1" column="C1" />
        <result property="c2" column="C2" />
        <result property="c3" column="C3" />
        <result property="c4" column="C4" />
        <result property="c5" column="C5" />
        <result property="c6" column="C6" />
        <!-- // 2015/3/31 DNJP.Kawamura UT208対応 START >>>>> -->
        <result property="c8" column="C8" />        
        <!-- // 2015/3/31 DNJP.Kawamura UT208対応 END <<<<< -->
        <result property="grpNo1" column="GRP_NO_1" />
        <result property="grpNo2" column="GRP_NO_2" />
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTwInvByRegisterInit" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTwInvByRegisterInit" class="W6001DocPltzDomain" groupBy="mainMark">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="shipperCompNmAbb" column="SHIPPER_COMP_NM_ABB" />
        <result property="shipperCompNm1" column="SHIPPER_COMP_NM_1" />
        <result property="shipperCompNm2" column="SHIPPER_COMP_NM_2" />
        <result property="shipperCompAddr1" column="SHIPPER_COMP_ADDR_1" />
        <result property="shipperCompAddr2" column="SHIPPER_COMP_ADDR_2" />
        <result property="shipperCompAddr3" column="SHIPPER_COMP_ADDR_3" />
        <result property="shipperCompAddr4" column="SHIPPER_COMP_ADDR_4" />
        <result property="shipperCompTel" column="SHIPPER_COMP_TEL" />
        <result property="shipperCompFax" column="SHIPPER_COMP_FAX" />
        <result property="shipperTaxIdNo" column="SHIPPER_TAX_ID_NO" />
        <result property="consigneeCompNm1" column="CONSIGNEE_COMP_NM_1" />
        <result property="consigneeCompNm2" column="CONSIGNEE_COMP_NM_2" />
        <result property="consigneeCompAddr1" column="CONSIGNEE_COMP_ADDR_1" />
        <result property="consigneeCompAddr2" column="CONSIGNEE_COMP_ADDR_2" />
        <result property="consigneeCompAddr3" column="CONSIGNEE_COMP_ADDR_3" />
        <result property="consigneeCompAddr4" column="CONSIGNEE_COMP_ADDR_4" />
        <result property="consigneeAttn" column="CONSIGNEE_ATTN" />
        <result property="shipToNm1" column="SHIP_TO_NM_1" />
        <result property="shipToNm2" column="SHIP_TO_NM_2" />
        <result property="shipToAddr1" column="SHIP_TO_ADDR_1" />
        <result property="shipToAddr2" column="SHIP_TO_ADDR_2" />
        <result property="shipToAddr3" column="SHIP_TO_ADDR_3" />
        <result property="shipToAddr4" column="SHIP_TO_ADDR_4" />
        <result property="dlivPoint" column="DLIV_POINT" />
        <result property="remBankNm" column="REM_BANK_NM" />
        <result property="remBankAddr1" column="REM_BANK_ADDR_1" />
        <result property="remBankAddr2" column="REM_BANK_ADDR_2" />
        <result property="remBankAddr3" column="REM_BANK_ADDR_3" />
        <result property="remBankAccountNo" column="REM_BANK_ACCOUNT_NO" />
        <result property="vatRatio" column="VAT_RATIO" nullValue="0" />
        <result property="weightUnit" column="INV_PLTZ_WEIGHT_UNIT" />
        <result property="netWeight" column="INV_PLTZ_NET_WEIGHT" />
        <result property="grossWeight" column="GROSS_WEIGHT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="volume" column="VOLUME" />
        <result property="carrierCompNmAbb" column="CARRIER_COMP_NM_ABB" />
        <result property="loadingPortNm" column="LOADING_PORT_NM" />
        <result property="dischargePortNm" column="DISCHARGE_PORT_NM" />
        <result property="vessel" column="VESSEL" />
        <result property="etd" column="ETD" />
        <result property="eta" column="ETA" />
        <result property="arrivalTime" column="ARRIVAL_TIME" />
        <result property="lPortCntryCd" column="L_PORT_CNTRY_CD" />
        <result property="loadingPortCd" column="LOADING_PORT_CD" />
        <result property="dPortCntryCd" column="D_PORT_CNTRY_CD" />
        <result property="dischargePortCd" column="DISCHARGE_PORT_CD" />
        <result property="carrierCompCd" column="CARRIER_COMP_CD" />
        <result property="forwarderCompCd" column="FORWARDER_COMP_CD" />
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 START >>>>> -->
        <result property="returnStyleCd" column="RETURN_STYLE_CD" />
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 END <<<<< -->
        <result property="c9" column="C9" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTwInvByRegisterInit" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvByRegisterInit" class="W6001DocPltzItemDomain">
        <result property="kitFlg" column="KIT_FLG" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="modelCd" column="MODEL_CD" />
        <result property="lineNo" column="LINE_NO" />
        <result property="kitBrch" column="KIT_BRCH" />
        <result property="parFlg" column="PAR_FLG" />
        <result property="currCd" column="INV_ITEM_CURR_CD" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="qty" column="QTY" />
        <result property="weightUnit" column="INV_ITEM_WEIGHT_UNIT" />
        <result property="itemWeight" column="ITEM_WEIGHT" />
        <result property="netWeight" column="INV_ITEM_NET_WEIGHT" />
        <result property="hsCd" column="HS_CD" />
        <result property="originCntryCd" column="ORIGIN_CNTRY_CD" />
        <result property="free1RegFlg" column="FREE_1_REG_FLG" />
        <result property="free1Nm" column="FREE_1_NM" />
        <result property="free1Dtl" column="FREE_1_DTL" />
        <result property="free1OriginCntryFlg" column="FREE_1_ORIGIN_CNTRY_FLG" />
        <result property="free2RegFlg" column="FREE_2_REG_FLG" />
        <result property="free2Nm" column="FREE_2_NM" />
        <result property="free2Dtl" column="FREE_2_DTL" />
        <result property="free2OriginCntryFlg" column="FREE_2_ORIGIN_CNTRY_FLG" />
        <result property="free3RegFlg" column="FREE_3_REG_FLG" />
        <result property="free3Nm" column="FREE_3_NM" />
        <result property="free3Dtl" column="FREE_3_DTL" />
        <result property="free3OriginCntryFlg" column="FREE_3_ORIGIN_CNTRY_FLG" />
    </resultMap>

    <!-- Invoice Register画面 初期表示データ取得(Main画面から遷移時) -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByRegister" class="W6001DocInvoiceDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
        <result property="dispInvoiceIssueDt" column="MANUAL_INVOICE_ISSUE_DT" /> <!-- ST184 INVOICE ISSUE DATE/インボイス発行日 ADD -->
        <result property="invoiceClass" column="INVOICE_CLASS" />
        <result property="cancelTyp" column="CANCEL_TYP" />
        <result property="cancelInvoiceNo" column="CANCEL_INVOICE_NO" />
        <result property="parInvoiceNo" column="PAR_INVOICE_NO" />
        <result property="relateInvoiceNo" column="RELATE_INVOICE_NO" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="frtShipperCd" column="FRT_SHIPPER_CD" />
        <result property="frtConsigneeCd" column="FRT_CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="invoiceCtgryNm" column="INVOICE_CTGRY_NM" />
        <result property="shippedDt" column="SHIPPED_DT" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsNm" column="TRNS_NM" />
        <result property="etd" column="ETD" />
        <result property="eta" column="ETA" />
        <result property="dlivPoint" column="DLIV_POINT" />
        <result property="bookingNo" column="BOOKING_NO" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="freightResponsibleNm" column="FREIGHT_RESPONSIBLE_NM" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="payMethNm" column="PAY_METH_NM" />
        <result property="remLcTyp" column="REM_LC_TYP" />
        <result property="remBankNm" column="REM_BANK_NM" />
        <result property="remBankAddress1" column="REM_BANK_ADDRESS_1" />
        <result property="remBankAddress2" column="REM_BANK_ADDRESS_2" />
        <result property="remBankAddress3" column="REM_BANK_ADDRESS_3" />
        <result property="remBankAccountNo" column="REM_BANK_ACCOUNT_NO" />
        <result property="lcNo" column="LC_NO" />
        <result property="lcDt" column="LC_DT" />
        <result property="lcBankNm1" column="LC_BANK_NM_1" />
        <result property="lcBankNm2" column="LC_BANK_NM_2" />
        <result property="currCd" column="CURR_CD" />
        <result property="netAmount" column="NET_AMOUNT" />
        <result property="freight" column="FREIGHT" />
        <result property="insurance" column="INSURANCE" />
        <result property="subTotal" column="SUB_TOTAL" />
        <result property="vatRatio" column="VAT_RATIO" />
        <result property="vat" column="VAT" />
        <result property="handlingCharge" column="HANDLING_CHARGE" />
        <!-- // 2015/3/31 DNJP.Kawamura UT208対応 START >>>>> -->
        <result property="additionalChargeCd" column="ADDITIONAL_CHARGE_CD" />
        <!-- // 2015/3/31 DNJP.Kawamura UT208対応 END <<<<< -->
        <result property="additionalChargeNm" column="ADDITIONAL_CHARGE_NM" />
        <result property="additionalCharge" column="ADDITIONAL_CHARGE" />
        <result property="totalInvoiceAmount" column="TOTAL_INVOICE_AMOUNT" />
        <result property="noCharge" column="NO_CHARGE" />
        <result property="pltzItemQty" column="PLTZ_ITEM_QTY" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="totalNetWeight" column="TOTAL_NET_WEIGHT" />
        <result property="totalGrossWeight" column="TOTAL_GROSS_WEIGHT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="totalVolume" column="TOTAL_VOLUME" />
        <result property="invTplNo" column="INV_TPL_NO" />
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="free4DispFlg" column="FREE_4_DISP_FLG" />
        <result property="spInfo" column="SP_INFO" />
        <result property="customTimingTyp" column="CUSTOM_TIMING_TYP" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="notifyParty1CompCd" column="NOTIFY_PARTY_1_COMP_CD" />
        <result property="notifyParty1CompNmAbb" column="NOTIFY_PARTY_1_COMP_NM_ABB" />
        <result property="notifyParty1Nm" column="NOTIFY_PARTY_1_NM" />
        <result property="notifyParty1Addr" column="NOTIFY_PARTY_1_ADDR" />
        <result property="notifyParty2CompCd" column="NOTIFY_PARTY_2_COMP_CD" />
        <result property="notifyParty2CompNmAbb" column="NOTIFY_PARTY_2_COMP_NM_ABB" />
        <result property="notifyParty2Nm" column="NOTIFY_PARTY_2_NM" />
        <result property="notifyParty2Addr" column="NOTIFY_PARTY_2_ADDR" />
        <result property="notifyParty3CompCd" column="NOTIFY_PARTY_3_COMP_CD" />
        <result property="notifyParty3CompNmAbb" column="NOTIFY_PARTY_3_COMP_NM_ABB" />
        <result property="notifyParty3Nm" column="NOTIFY_PARTY_3_NM" />
        <result property="notifyParty3Addr" column="NOTIFY_PARTY_3_ADDR" />
        <result property="notifyParty4CompCd" column="NOTIFY_PARTY_4_COMP_CD" />
        <result property="notifyParty4CompNmAbb" column="NOTIFY_PARTY_4_COMP_NM_ABB" />
        <result property="notifyParty4Nm" column="NOTIFY_PARTY_4_NM" />
        <result property="notifyParty4Addr" column="NOTIFY_PARTY_4_ADDR" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="shipperCompNm1" column="SHIPPER_COMP_NM_1" />
        <result property="shipperCompNm2" column="SHIPPER_COMP_NM_2" />
        <result property="consigneeCompNm1" column="CONSIGNEE_COMP_NM_1" />
        <result property="consigneeCompNm2" column="CONSIGNEE_COMP_NM_2" />
        <result property="shipToNm1" column="SHIP_TO_NM_1" />
        <result property="shipToNm2" column="SHIP_TO_NM_2" />
        <result property="c2" column="C2" />
        <result property="c3" column="C3" />
    </resultMap>

    <!-- W6001DocDomain_SearchTmInvTplShipToReacquisition -->
    <resultMap id="W6001DocDomain_SearchTmInvTplShipToReacquisition" class="W6001DocDomain">
        <result property="docNo" column="DOC_NO" />
        <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
        <!--
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="hsCdDispFlg" column="HS_CD_DISP_FLG" />
        -->
        <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
    </resultMap>

    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <!-- W6001DocDomain_SearchTmInvTplShipToReacquisitionForDefault -->
    <resultMap id="W6001DocDomain_SearchTmInvTplShipToReacquisitionForDefault" class="W6001DocDomain">
        <result property="docNo" column="DOC_NO" />
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="hsCdDispFlg" column="HS_CD_DISP_FLG" />
    </resultMap>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->

    <!-- W6001DocDomain_SearchTwInvPltzByContainerNo -->
    <resultMap id="W6001DocDomain_SearchTwInvPltzByContainerNo" class="W6001DocPltzDomain">
        <result property="containerNo" column="CONTAINER_NO" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvByFree -->
    <resultMap id="W6001DocDomain_SearchTwInvByFree" class="W6001DocDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="freeColNm1" column="FREE_COL_NM1" />
        <result property="freeColNm2" column="FREE_COL_NM2" />
        <result property="freeColNm3" column="FREE_COL_NM3" />
    </resultMap>

    <!-- W6001DocDomain_SearchTwInvoiceByRegister -->
    <resultMap id="W6001DocInvoiceDomain_SearchTwInvoiceByRegister" class="W6001DocInvoiceDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="tempInvoiceNo" column="TEMP_INVOICE_NO" />
        <result property="invoiceClass" column="INVOICE_CLASS" />
        <result property="parTempInvoiceNo" column="PAR_TEMP_INVOICE_NO" />
        <result property="relateTempInvoiceNo" column="RELATE_TEMP_INVOICE_NO" />
        <result property="consigneeCd" column="CONSIGNEE_CD" />
        <result property="frtShipperCd" column="FRT_SHIPPER_CD" />
        <result property="frtConsigneeCd" column="FRT_CONSIGNEE_CD" />
        <result property="shipToCd" column="SHIP_TO_CD" />
        <result property="invoiceCtgry" column="INVOICE_CTGRY" />
        <result property="invoiceCtgryNm" column="INVOICE_CTGRY_NM" />
        <result property="shippedDt" column="SHIPPED_DT" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="trnsNm" column="TRNS_NM" />
        <result property="etd" column="ETD" />
        <result property="eta" column="ETA" />
        <result property="dlivPoint" column="DLIV_POINT" />
        <result property="bookingNo" column="BOOKING_NO" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="freightResponsibleNm" column="FREIGHT_RESPONSIBLE_NM" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="termsPoint" column="TERMS_POINT" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="payMeth" column="PAY_METH" />
        <result property="payMethNm" column="PAY_METH_NM" />
        <result property="remLcTyp" column="REM_LC_TYP" />
        <result property="remBankNm" column="REM_BANK_NM" />
        <result property="remBankAddress1" column="REM_BANK_ADDRESS_1" />
        <result property="remBankAddress2" column="REM_BANK_ADDRESS_2" />
        <result property="remBankAddress3" column="REM_BANK_ADDRESS_3" />
        <result property="remBankAccountNo" column="REM_BANK_ACCOUNT_NO" />
        <result property="lcNo" column="LC_NO" />
        <result property="lcDt" column="LC_DT" />
        <result property="lcBankNm1" column="LC_BANK_NM_1" />
        <result property="lcBankNm2" column="LC_BANK_NM_2" />
        <result property="currCd" column="CURR_CD" />
        <result property="netAmount" column="NET_AMOUNT" />
        <result property="freight" column="FREIGHT" />
        <result property="insurance" column="INSURANCE" />
        <result property="subTotal" column="SUB_TOTAL" />
        <result property="vatRatio" column="VAT_RATIO" />
        <result property="vat" column="VAT" />
        <result property="handlingCharge" column="HANDLING_CHARGE" />
        <result property="additionalChargeNm" column="ADDITIONAL_CHARGE_NM" />
        <result property="additionalCharge" column="ADDITIONAL_CHARGE" />
        <result property="totalInvoiceAmount" column="TOTAL_INVOICE_AMOUNT" />
        <result property="noCharge" column="NO_CHARGE" />
        <result property="pltzItemQty" column="PLTZ_ITEM_QTY" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="totalNetWeight" column="TOTAL_NET_WEIGHT" />
        <result property="totalGrossWeight" column="TOTAL_GROSS_WEIGHT" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="totalVolume" column="TOTAL_VOLUME" />
        <result property="invTplNo" column="INV_TPL_NO" />
        <result property="free1DispFlg" column="FREE_1_DISP_FLG" />
        <result property="free2DispFlg" column="FREE_2_DISP_FLG" />
        <result property="free3DispFlg" column="FREE_3_DISP_FLG" />
        <result property="free4DispFlg" column="FREE_4_DISP_FLG" />
        <result property="spInfo" column="SP_INFO" />
        <result property="cmlTyp" column="CML_TYP" />
        <result property="notifyParty1CompCd" column="NOTIFY_PARTY_1_COMP_CD" />
        <result property="notifyParty1CompNmAbb" column="NOTIFY_PARTY_1_COMP_NM_ABB" />
        <result property="notifyParty1Nm" column="NOTIFY_PARTY_1_NM" />
        <result property="notifyParty1Addr" column="NOTIFY_PARTY_1_ADDR" />
        <result property="notifyParty2CompCd" column="NOTIFY_PARTY_2_COMP_CD" />
        <result property="notifyParty2CompNmAbb" column="NOTIFY_PARTY_2_COMP_NM_ABB" />
        <result property="notifyParty2Nm" column="NOTIFY_PARTY_2_NM" />
        <result property="notifyParty2Addr" column="NOTIFY_PARTY_2_ADDR" />
        <result property="notifyParty3CompCd" column="NOTIFY_PARTY_3_COMP_CD" />
        <result property="notifyParty3CompNmAbb" column="NOTIFY_PARTY_3_COMP_NM_ABB" />
        <result property="notifyParty3Nm" column="NOTIFY_PARTY_3_NM" />
        <result property="notifyParty3Addr" column="NOTIFY_PARTY_3_ADDR" />
        <result property="notifyParty4CompCd" column="NOTIFY_PARTY_4_COMP_CD" />
        <result property="notifyParty4CompNmAbb" column="NOTIFY_PARTY_4_COMP_NM_ABB" />
        <result property="notifyParty4Nm" column="NOTIFY_PARTY_4_NM" />
        <result property="notifyParty4Addr" column="NOTIFY_PARTY_4_ADDR" />
        <result property="supplierInvoiceNo" column="SUPPLIER_INVOICE_NO" />
        <result property="impInvoiceNo1" column="IMP_INVOICE_NO_1" />
        <result property="impInvoiceNo2" column="IMP_INVOICE_NO_2" />
        <result property="shipperCompNm1" column="SHIPPER_COMP_NM_1" />
        <result property="shipperCompNm2" column="SHIPPER_COMP_NM_2" />
        <result property="consigneeCompNm1" column="CONSIGNEE_COMP_NM_1" />
        <result property="consigneeCompNm2" column="CONSIGNEE_COMP_NM_2" />
        <result property="shipToNm1" column="SHIP_TO_NM_1" />
        <result property="shipToNm2" column="SHIP_TO_NM_2" />
        <result property="c2" column="C2" />
        <result property="c3" column="C3" />
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
        <result property="dispInvoiceIssueDt" column="MANUAL_INVOICE_ISSUE_DT" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtPltzByRegister -->
    <resultMap id="W6001DocPltzDomain_SearchTtPltzByRegister" class="W6001DocPltzDomain">
        <result property="curLgcyWhCd" column="CUR_LGCY_WH_CD" />
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTtPltzByRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTtPltzByRegister" class="W6001DocPltzItemDomain">
        <result property="pltzItemNo" column="PLTZ_ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="sumQty" column="SUM_QTY" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtPltzItemOdr -->
    <resultMap id="W6001DocPltzItemOdrDomain_SearchTtPltzItemOdr" class="W6001DocPltzItemOdrDomain">
        <result property="itemNo" column="ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="rcvOdrCompCd" column="RCV_ODR_COMP_CD" />
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="trnsCd" column="TRNS_CD" />
        <result property="etdDueDt" column="ETD_DUE_DT" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="customerItemNoOrg" column="CUSTOMER_ITEM_NO_ORG" />
        <result property="odrCtrlNo" column="ODR_CTRL_NO" />
        <result property="sumAllocQty" column="SUM_ALLOC_QTY" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtPltzByRegisterCancel -->
    <!--
    == Deleted because of no use.
    == 使用なしのため削除。
    ==<resultMap id="W6001DocDomain_SearchTtPltzByRegisterCancel" class="W6001DocPltzDomain">
    ==    <result property="curLgcyWhCd" column="CUR_LGCY_WH_CD" />
    ==    <result property="shipperCd" column="SHIPPER_CD" />
    ==    <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTtPltzByRegisterCancel" />
    ==</resultMap>
    ==<resultMap id="W6001DocPltzItemDomain_SearchTtPltzByRegisterCancel" class="W6001DocPltzItemDomain">
    ==    <result property="pltzItemNo" column="PLTZ_ITEM_NO" />
    ==    <result property="pkgCd" column="PKG_CD" />
    ==    <result property="sumQty" column="SUM_QTY" />
    ==</resultMap>
    -->
    
    <!-- W6001DocDomain_SearchTtPltzItemOdrByRegisterCancel -->
    <!--
    == Deleted because of no use.
    == 使用なしのため削除。
    ==<resultMap id="W6001DocDomain_SearchTtPltzItemOdrByRegisterCancel" class="W6001DocPltzItemOdrDomain">
    ==    <result property="itemNo" column="ITEM_NO" />
    ==    <result property="pkgCd" column="PKG_CD" />
    ==    <result property="rcvOdrCompCd" column="RCV_ODR_COMP_CD" />
    ==    <result property="customerCd" column="CUSTOMER_CD" />
    ==    <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
    ==    <result property="trnsCd" column="TRNS_CD" />
    ==    <result property="etdDueDt" column="ETD_DUE_DT" />
    ==    <result property="customerPoNo" column="CUSTOMER_PO_NO" />
    ==    <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
    ==    <result property="customerItemNoOrg" column="CUSTOMER_ITEM_NO_ORG" />
    ==    <result property="odrCtrlNo" column="ODR_CTRL_NO" />
    ==    <result property="sumAllocQty" column="SUM_ALLOC_QTY" />
    ==</resultMap>
    -->

    <!-- W6001DocDomain_SearchTtInvoiceByHeaderCancel -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceByHeaderCancel" class="W6001DocInvoiceDomain">
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="cancelInvoiceNo" column="CANCEL_INVOICE_NO" />
        <!-- 2014/12/18 DNJP.Kawamura UT027対応 START >>>>> -->
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
        <!-- 2014/12/18 DNJP.Kawamura UT027対応 END <<<<< -->
        <result property="libPgm" column="LIB_PGM" />
        <result property="jobHost" column="JOB_HOST" />
        <result property="jobUser" column="JOB_USER" />
        <result property="jobPassword" column="JOB_PASSWORD" />
        <result property="jobDescription" column="JOB_DESCRIPTION" />
    </resultMap>

    <!-- W6001DocDomain_SearchTtInvoiceByHeaderRegister -->
    <resultMap id="W6001DocDomain_SearchTtInvoiceByHeaderRegister" class="W6001DocInvoiceDomain">
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
        <result property="dispInvoiceIssueDt" column="MANUAL_INVOICE_ISSUE_DT" /> <!-- ST184 INVOICE ISSUE DATE/インボイス発行日 ADD -->
        <result property="customerCd" column="CUSTOMER_CD" />
        <result property="lgcyShipTo" column="LGCY_SHIP_TO" />
        <result property="arrivalTime" column="ARRIVAL_TIME" />
        <result property="approvalPosition" column="APPROVAL_POSITION" />
        <result property="approvalNm" column="APPROVAL_NM" />
        <result property="relateInvoiceNo" column="RELATE_INVOICE_NO" />
        <result property="shipperCompNm1" column="SHIPPER_COMP_NM_1" />
        <result property="shipperCompAddr1" column="SHIPPER_COMP_ADDR_1" />
        <result property="shipperCompAddr2" column="SHIPPER_COMP_ADDR_2" />
        <result property="shipperCompAddr3" column="SHIPPER_COMP_ADDR_3" />
        <result property="shipperCompTel" column="SHIPPER_COMP_TEL" />
        <result property="shipperCompFax" column="SHIPPER_COMP_FAX" />
        <result property="shipperTaxIdNo" column="SHIPPER_TAX_ID_NO" />
        <result property="shipToNm1" column="SHIP_TO_NM_1" />
        <result property="shipToAddr1" column="SHIP_TO_ADDR_1" />
        <result property="shipToAddr2" column="SHIP_TO_ADDR_2" />
        <result property="shipToAddr3" column="SHIP_TO_ADDR_3" />
        <result property="shippedDt" column="SHIPPED_DT" />
        <result property="trnsNm" column="TRNS_NM" /> <!-- UT369 ADD -->
        <result property="eta" column="ETA" />
        <result property="dlivPoint" column="DLIV_POINT" />
        <result property="carrierCompNmAbb" column="CARRIER_COMP_NM_ABB" />
        <result property="totalNetWeight" column="TOTAL_NET_WEIGHT" />
        <result property="totalNetWeightUnit" column="TOTAL_NET_WEIGHT_UNIT" />
        <result property="totalGrossWeight" column="TOTAL_GROSS_WEIGHT" />
        <result property="totalVolume" column="TOTAL_VOLUME" />
        <result property="volumeUnit" column="TOTAL_VOLUME_UNIT" />
        <result property="freightResponsibleCd" column="FREIGHT_RESPONSIBLE_CD" />
        <result property="priceTerms" column="PRICE_TERMS" />
        <result property="tradeTerms" column="TRADE_TERMS" />
        <result property="payTerms" column="PAY_TERMS" />
        <result property="remLcTyp" column="REM_LC_TYP" />
        <result property="remBankNm" column="REM_BANK_NM" />
        <result property="remBankAddress1" column="REM_BANK_ADDRESS_1" />
        <result property="remBankAddress2" column="REM_BANK_ADDRESS_2" />
        <result property="remBankAddress3" column="REM_BANK_ADDRESS_3" />
        <result property="remBankAccountNo" column="REM_BANK_ACCOUNT_NO" />
        <result property="lcBankNm1" column="LC_BANK_NM_1" />
        <result property="spInfo" column="SP_INFO" />
        <result property="freight" column="FREIGHT" />
        <result property="insurance" column="INSURANCE" />
        <result property="vatRatio" column="VAT_RATIO" />
        <result property="vat" column="VAT" />
        <result property="totalInvoiceAmount" column="TOTAL_INVOICE_AMOUNT" />
        <result property="totalInvoiceAmountCurrCd" column="TOTAL_INVOICE_AMOUNT_CURR_CD" />
        <result property="cntryCdShipTo" column="CNTRY_CD_SHIP_TO" />
        <result property="cntryCdShipper" column="CNTRY_CD_SHIPPER" />
        <result property="lgcyUnitCd" column="LGCY_UNIT_CD" />
        <result property="printCompAddr1" column="PRINT_COMP_ADDR_1" />
        <result property="printCompAddr2" column="PRINT_COMP_ADDR_2" />
        <result property="printCompAddr3" column="PRINT_COMP_ADDR_3" />
        <result property="cntryCdCarrier" column="CNTRY_CD_CARRIER" />
        <result property="libPgm" column="LIB_PGM" />
        <result property="jobHost" column="JOB_HOST" />
        <result property="jobUser" column="JOB_USER" />
        <result property="jobPassword" column="JOB_PASSWORD" />
        <result property="jobDescription" column="JOB_DESCRIPTION" />
        
    </resultMap>

    <!-- W6001DocInvoiceDomain_SearchTtInvoiceAttached -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceAttached" class="W6001DocInvoiceDomain">
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="unitPriceCurrCd" column="UNIT_PRICE_CURR_CD" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="lgcyUnitCd" column="LGCY_UNIT_CD" />
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTtInvoiceAttached" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTtInvoiceAttached" class="W6001DocPltzDomain">
        <result property="curLgcyWhCd" column="CUR_LGCY_WH_CD" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTtInvoiceAttached" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTtInvoiceAttached" class="W6001DocPltzItemDomain">
        <result property="etdDueDt" column="ETD_DUE_DT" />
        <result property="allocQty" column="ALLOC_QTY" />
        <result property="salesCompPoNo" column="SALES_COMP_PO_NO" />
        <result property="shippingLot" column="SHIPPING_LOT" /> <!-- UT413-3 ADD -->
        <result property="itemDescription" column="ITEM_DESCRIPTION" /> <!-- UT436 ADD -->
    </resultMap>
    
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvItemByRemoveGrpNo2" class="W6001DocPltzItemDomain">
        <result property="grpNo2" column="GRP_NO_2" />
    </resultMap>
    
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvItemByInvoiceAttached" class="W6001DocPltzItemDomain">
        <result property="rtFlg" column="RT_FLG" />
        <result property="kitFlg" column="KIT_FLG" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="modelCd" column="MODEL_CD" />
        <result property="expRequestNo" column="EXP_REQUEST_NO" />
        <result property="lineNo" column="LINE_NO" />
        <result property="kitBrch" column="KIT_BRCH" />
        <result property="parFlg" column="PAR_FLG" />
        <result property="kitParItemNo" column="KIT_PAR_ITEM_NO" />
        <result property="currCd" column="CURR_CD" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="itemWeight" column="ITEM_WEIGHT" />
        <result property="hsCd" column="HS_CD" />
        <result property="originCntryCd" column="ORIGIN_CNTRY_CD" />
        <result property="free1RegFlg" column="FREE_1_REG_FLG" />
        <result property="free1Nm" column="FREE_1_NM" />
        <result property="free1Dtl" column="FREE_1_DTL" />
        <result property="free1OriginCntryFlg" column="FREE_1_ORIGIN_CNTRY_FLG" />
        <result property="free2RegFlg" column="FREE_2_REG_FLG" />
        <result property="free2Nm" column="FREE_2_NM" />
        <result property="free2Dtl" column="FREE_2_DTL" />
        <result property="free2OriginCntryFlg" column="FREE_2_ORIGIN_CNTRY_FLG" />
        <result property="free3RegFlg" column="FREE_3_REG_FLG" />
        <result property="free3Nm" column="FREE_3_NM" />
        <result property="free3Dtl" column="FREE_3_DTL" />
        <result property="free3OriginCntryFlg" column="FREE_3_ORIGIN_CNTRY_FLG" />
        <!-- UT287 ADD START -->
        <result property="lengthUnit" column="LENGTH_UNIT" />
        <result property="length" column="LENGTH" />
        <result property="width" column="WIDTH" />
        <result property="height" column="HEIGHT" />
        <!-- UT287 ADD START -->
        <result property="sumQty" column="SUM_QTY" />
        <result property="sumNetWeight" column="SUM_NET_WEIGHT" />
    </resultMap>
    
    <resultMap id="W6001DocPltzItemDomain_SearchTwInvItemByPackingAttachedItem" class="W6001DocPltzItemDomain">
        <result property="kitFlg" column="KIT_FLG" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="pkgCd" column="PKG_CD" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="modelCd" column="MODEL_CD" />
        <result property="expRequestNo" column="EXP_REQUEST_NO" />
        <result property="lineNo" column="LINE_NO" />
        <result property="kitBrch" column="KIT_BRCH" />
        <result property="parFlg" column="PAR_FLG" />
        <result property="kitParItemNo" column="KIT_PAR_ITEM_NO" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="sumQty" column="SUM_QTY" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="sumNetWeight" column="SUM_NET_WEIGHT" />
        <result property="itemWeight" column="ITEM_WEIGHT" />
    </resultMap>

    <!-- 2014/09/01 DNJP.Kawamura (DIAT)InvoiceDB対応 START >>>>> -->
    <!-- W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT47PRRegister -->
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT47PRRegister" class="W6001DocInvoiceDomain">
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="unitPriceCurrCd" column="UNIT_PRICE_CURR_CD" />
        <result property="qtyUnit" column="QTY_UNIT" />
        <result property="lgcyUnitCd" column="LGCY_UNIT_CD" />
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTtInvoiceAttachedByEDT47PRRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTtInvoiceAttachedByEDT47PRRegister" class="W6001DocPltzDomain">
        <result property="curLgcyWhCd" column="CUR_LGCY_WH_CD" />
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTtInvoiceAttachedByEDT47PRRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTtInvoiceAttachedByEDT47PRRegister" class="W6001DocPltzItemDomain">
        <result property="etdDueDt" column="ETD_DUE_DT" />
        <result property="allocQty" column="ALLOC_QTY" />
        <result property="salesCompPoNo" column="SALES_COMP_PO_NO" />
        <result property="originCntryCd" column="ORIGIN_CNTRY_CD" />
        <result property="shippingLot" column="SHIPPING_LOT" /> <!-- UT413-3 ADD -->
        <result property="itemDescription" column="ITEM_DESCRIPTION" /> <!-- UT432 ADD -->
    </resultMap>

    <!-- W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT45PRRegister -->    
    <resultMap id="W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT45PRRegister" class="W6001DocInvoiceDomain">
        <result property="freight" column="FREIGHT" />
        <result property="insurance" column="INSURANCE" />
        <result property="totalInvoiceAmount" column="TOTAL_INVOICE_AMOUNT" />
        <result property="customerPoNo" column="CUSTOMER_PO_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemNo" column="ITEM_NO" />
        <result property="unitPrice" column="UNIT_PRICE" />
        <result property="unitPriceCurrCd" column="UNIT_PRICE_CURR_CD" />
        <result property="netAmount" column="NET_AMOUNT" />
        <result property="totalNetWeight" column="NET_WEIGHT" />
        <!-- 2014/12/10 DNJP.Kawamura ST183対応 START >>>>> -->
        <!-- <result property="lgcyUnitCd" column="LGCY_UNIT_CD" /> -->
        <result property="qtyUnit" column="QTY_UNIT" />
        <!-- 2014/12/10 DNJP.Kawamura ST183対応 END <<<<< -->
        <result property="docPltzList" resultMap="W6001Doc.W6001DocPltzDomain_SearchTtInvoiceAttachedByEDT45PRRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzDomain_SearchTtInvoiceAttachedByEDT45PRRegister" class="W6001DocPltzDomain">
        <result property="mainMark" column="MAIN_MARK" />
        <result property="grossWeight" column="GROSS_WEIGHT" />        
        <result property="docPltzItemList" resultMap="W6001Doc.W6001DocPltzItemDomain_SearchTtInvoiceAttachedByEDT45PRRegister" />
    </resultMap>
    <resultMap id="W6001DocPltzItemDomain_SearchTtInvoiceAttachedByEDT45PRRegister" class="W6001DocPltzItemDomain">
        <result property="itemWeight" column="ITEM_WEIGHT" />
        <result property="weightUnit" column="WEIGHT_UNIT" /> <!-- IN162 ADD -->
        <result property="allocQty" column="ALLOC_QTY" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" /> <!-- UT432 ADD -->
    </resultMap>    
    <!-- 2014/09/01 DNJP.Kawamura (DIAT)InvoiceDB対応 END <<<<< -->
    
    <!-- ST946 MANUAL SCREEN TRANSITION ADD START -->
    <!-- Result Map for SqlMap-W6001Doc.SearchNextInvoiceBySameParent -->
    <!-- SqlMap-W6001Doc.SearchNextInvoiceBySameParent用のResult Map -->
    <resultMap id="W6001DocInvoiceDomain_SearchNextInvoiceBySameParent" class="W6001DocInvoiceDomain">
        <result property="shipperCd" column="SHIPPER_CD" />
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="invoiceIssueDt" column="INVOICE_ISSUE_DT" />
    </resultMap>
    <!-- ST946 MANUAL SCREEN TRANSITION ADD END -->

    <!-- ST959 UNIT CONVERSION ADD START -->
    <!-- Result Map for SqlMap-W6001Doc.SearchTwInvPltzOnRegisterByWorkPhase -->
    <resultMap id="W6001DocPltzDomain_SearchTwInvPltzOnRegisterByWorkPhase" class="W6001DocPltzDomain">
        <result property="dscId" column="DSC_ID" />
        <result property="mainMark" column="MAIN_MARK" />
        <result property="volume" column="VOLUME" />
        <result property="volumeUnit" column="VOLUME_UNIT" />
        <result property="grossWeight" column="GROSS_WEIGHT" />
        <result property="weightUnit" column="WEIGHT_UNIT" />
        <result property="netWeight" column="NET_WEIGHT" />
    </resultMap>
    <!-- ST959 UNIT CONVERSION ADD END -->

    <!-- UT205 CML ATTACH CSV ADD START -->
    <!-- Result Map for SqlMap-W6001Doc.SearchForCreateCmlAttachCsvFile -->
    <resultMap id="F6051CmlAtchFileDomain_SearchForCreateCmlAttachCsvFile" class="F6051CmlAtchFileDomain">
        <result property="shipperNmAbb" column="SHIPPER_NM_ABB" />
        <result property="consigneeNmAbb" column="CONSIGNEE_NM_ABB" />
        <result property="shipToNmAbb" column="SHIP_TO_NM_ABB" />
        <result property="invoiceNo" column="INVOICE_NO" />
        <result property="containerNo" column="CONTAINER_NO" />
        <result property="mainMark" column="MAIN_MARK" />
        <result property="itemTypName" column="ITEM_TYP_NAME" />
        <result property="modelCd" column="MODEL_CD" /> <!-- UT416 ADD -->
        <result property="itemNo" column="ITEM_NO" />
        <result property="customerItemNo" column="CUSTOMER_ITEM_NO" />
        <result property="itemDescription" column="ITEM_DESCRIPTION" />
        <result property="qty" column="QTY" />
        <result property="qtyVal" column="QTY_VAL" /> <!-- IN174 ADD -->
        <result property="volume" column="VOLUME" />
        <result property="volumeUnitDisp" column="VOLUME_UNIT_DISP" />
        <result property="itemWeight" column="ITEM_WEIGHT" />
        <result property="itemWeightVal" column="ITEM_WEIGHT_VAL" /> <!-- IN174 ADD -->
        <result property="itemWeightUnit" column="ITEM_WEIGHT_UNIT" /> <!-- IN174 ADD -->
        <result property="itemWeightUnitDisp" column="ITEM_WEIGHT_UNIT_DISP" />
        <result property="netWeightUnit" column="NET_WEIGHT_UNIT" /> <!-- IN174 ADD -->
        <result property="netWeightUnitDisp" column="NET_WEIGHT_UNIT_DISP" />
        <result property="grossWeight" column="GROSS_WEIGHT" />
        <result property="grossWeightUnitDisp" column="GROSS_WEIGHT_UNIT_DISP" />
        <result property="palletCartonTyp" column="PALLET_CARTON_TYP" /> <!-- UT420 ADD -->
    </resultMap>
    <!-- UT205 CML ATTACH CSV ADD END -->
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Main画面                                                                      -->
    <!-- =================================================================================================== -->
    <!-- Where句（アクセス権限） -->
    <sql id="WhereCondition_TtInvoice_Auth">
        and A1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
        <isNotEmpty prepend="and" property="userAuthList">
            A1.SHIPPER_CD in (
                <iterate property="userAuthList" conjunction=",">
                    #userAuthList[].authMgtComp#
                </iterate>
            )
        </isNotEmpty>
    </sql>
    
    <!-- 2015/01/14 DNJP.Kawamura 不具合対応（不要な絞り込み条件を削除） START >>>>> -->
    <!--Where句（暗黙の絞込） -->
    <!-- 
    <sql id="WhereCondition_TtInvoice_access">
        and ( A1.SHIPPER_CD = #ownerCompCd#
            or A1.SHIPPER_CD in (select ORG_COMP_CD from TM_AGENT where AGENT_COMP_CD = #ownerCompCd#)
            or A1.RELATE_INVOICE_SHIPPER_CD = #ownerCompCd#
            or A1.RELATE_INVOICE_SHIPPER_CD in (select ORG_COMP_CD from TM_AGENT where AGENT_COMP_CD = #ownerCompCd#)
        )
    </sql>
    -->
    <!-- 2015/01/14 DNJP.Kawamura 不具合対応（不要な絞り込み条件を削除） END <<<<< -->
    
    <!-- Where句（絞込条件 -->
    <sql id="WhereCondition_TtInvoice">
        <isNotEmpty prepend="and" property="shipperCd">
            A1.SHIPPER_CD = #shipperCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="consigneeCd">
            A1.CONSIGNEE_CD = #consigneeCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="shipToCd">
            A1.SHIP_TO_CD like concat(#shipToCd#, '%')
        </isNotEmpty>
        <isNotEmpty prepend="and" property="trnsCd">
            A1.TRNS_CD = #trnsCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="cancelTyp">
            A1.CANCEL_TYP = #cancelTyp#
        </isNotEmpty>
        <!-- 2015/2/12 DNJP.Kawamura UT031対応 START >>>>> -->
        <isNotEmpty prepend="and" property="cancelFlg">
            A1.CANCEL_FLG = #cancelFlg#
        </isNotEmpty>
        <!-- 2015/2/12 DNJP.Kawamura UT031対応 END <<<<< -->
        <isNotEmpty prepend="and" property="cmlTyp">
            A1.CML_TYP = #cmlTyp#
        </isNotEmpty>
        <isEqual property="by" compareValue="1">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(A1.ETD) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(A1.ETD) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>        
        <isEqual property="by" compareValue="2">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(A1.MANUAL_INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(A1.MANUAL_INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        <isEqual property="by" compareValue="3">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(A1.INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(A1.INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        <isNotEmpty prepend="and" property="invoiceNo">
            A1.INVOICE_NO like concat(#invoiceNo#, '%')
        </isNotEmpty>
        <isNotEmpty prepend="and" property="carrierCompCd">
            A1.CARRIER_COMP_CD = #carrierCompCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="forwarderCompCd">
            A1.FORWARDER_COMP_CD = #forwarderCompCd#
        </isNotEmpty>
        <isEqual property="issuer" compareValue="1">
            <isParameterPresent prepend="and">
                A1.INVOICE_ISSUER_ID = #dscId#
            </isParameterPresent>
        </isEqual>
                
        <isParameterPresent prepend="and">
            A1.INVOICE_CLASS in ('M', 'E')
        </isParameterPresent>
        <isParameterPresent prepend="and">
            A1.DELETE_FLG = 'N'
        </isParameterPresent>
        <isEqual property="ttPltzEnableFlg" compareValue="Y">
            <isParameterPresent prepend="and">
                A1.SHIPPER_CD = B1.SHIPPER_CD
            </isParameterPresent>
            <isParameterPresent prepend="and">
                A1.INVOICE_NO = B1.INVOICE_NO
            </isParameterPresent>
            <isParameterPresent prepend="and">
                A1.INVOICE_ISSUE_DT = B1.INVOICE_ISSUE_DT
            </isParameterPresent>
        </isEqual>
    </sql>
    
    <!-- SQL / パレタイズ（集計） -->
    <sql id="Select_TtInvoiceForPltz">
        select distinct
              SHIPPER_CD
            , INVOICE_NO
            , INVOICE_ISSUE_DT
        from TT_PLTZ
        <dynamic prepend="where">
            <isNotEmpty prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="stgInstrNo">
                STG_INSTR_NO like concat(#stgInstrNo#, '%')
            </isNotEmpty>
            <isNotEmpty prepend="and" property="stgActNo">
                STG_ACT_NO like concat(#stgActNo#, '%')
            </isNotEmpty>
            <isNotEmpty prepend="and" property="shippingFirmNo">
                SHIPPING_FIRM_NO like concat(#shippingFirmNo#, '%')
            </isNotEmpty>
        </dynamic>
    </sql>
    
    <!-- SQL / インボイス（FRTカウント） -->
    <!-- 2015/01/14 DNJP.Kawamura 不具合対応（カウント条件間違い） START >>>>> -->
    <!-- 
    <sql id="Select_TtInvoiceForFrtCount">
        select
              SHIPPER_CD
            , PAR_INVOICE_NO
            , INVOICE_ISSUE_DT
            , count(INVOICE_NO) COUNT_INVOICE_NO
        from
            TT_INVOICE
        where   
            DELETE_FLG = 'N'
        /* QA No.569 FRT件数の条件を追加 */
        and INVOICE_CLASS = 'F'
        <isNotEmpty prepend="and" property="shipperCd">
            SHIPPER_CD = #shipperCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="invoiceNo">
            PAR_INVOICE_NO like concat(#invoiceNo#, '%')
        </isNotEmpty>
        <isEqual property="by" compareValue="2">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        <isEqual property="by" compareValue="3">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        group by SHIPPER_CD, PAR_INVOICE_NO, INVOICE_ISSUE_DT
    </sql>
    -->
    <sql id="Select_TtInvoiceForFrtCount">
        select
              PAR_INVOICE_SHIPPER_CD
            , PAR_INVOICE_NO
            , PAR_INVOICE_ISSUE_DT
            , count(INVOICE_NO) COUNT_INVOICE_NO
        from
            TT_INVOICE
        where   
            DELETE_FLG = 'N'
        and INVOICE_CLASS = 'F'
        <isNotEmpty prepend="and" property="shipperCd">
            PAR_INVOICE_SHIPPER_CD = #shipperCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="invoiceNo">
            PAR_INVOICE_NO like concat(#invoiceNo#, '%')
        </isNotEmpty>
        <isEqual property="by" compareValue="2">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(PAR_INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(PAR_INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        <isEqual property="by" compareValue="3">
            <isNotEmpty prepend="and" property="fmDate">
                trunc(PAR_INVOICE_ISSUE_DT) <![CDATA[>=]]> #fmDate#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="toDate">
                trunc(PAR_INVOICE_ISSUE_DT) <![CDATA[<=]]> #toDate#
            </isNotEmpty>
        </isEqual>
        group by PAR_INVOICE_SHIPPER_CD, PAR_INVOICE_NO, PAR_INVOICE_ISSUE_DT
    </sql>
    <!-- 2015/01/14 DNJP.Kawamura 不具合対応（カウント条件間違い） END <<<<< -->

    <!-- 2015/2/12 DNJP.Kawamura UT031対応 START >>>>> -->
    <!-- SQL / キャンセルしたインボイス情報 -->
    <sql id="Select_TtInvoiceForCancel">
        select 
            SHIPPER_CD
            ,INVOICE_NO
            ,CANCEL_INVOICE_NO
            ,CANCEL_INVOICE_ISSUE_DT
        from
            TT_INVOICE
        where
            CANCEL_FLG = 'N'
        and CANCEL_TYP = 'C'
    </sql>
    <!-- 2015/2/12 DNJP.Kawamura UT031対応 END <<<<< -->
    
    <!-- OrderBy句 -->
    <!-- 2015/2/12 DNJP.Kawamura UT031対応 START >>>>> -->
    <!--
    <sql id="SortKeys_TtInvoice">
        order by
              A1.CONSIGNEE_CD
            , A1.SHIP_TO_CD
            , A1.CANCEL_TYP desc
            , A1.ETD desc
            , A1.MANUAL_TYP desc
            , A1.INVOICE_NO
            , A1.INVOICE_ISSUE_DT desc
    </sql>
    -->
    <sql id="SortKeys_TtInvoice">
        order by
              CONSIGNEE_CD
            , SHIP_TO_CD
            , CANCEL_TYP desc
            , CANCEL_FLG
            , ETD desc
            , MANUAL_TYP desc
            , INVOICE_NO
            , MANUAL_INVOICE_ISSUE_DT desc
            , INVOICE_ISSUE_DT desc
    </sql>    
    <!-- 2015/2/12 DNJP.Kawamura UT031対応 END <<<<< -->
    
    <!-- 検索 SQL文 (検索条件に該当する検索データの件数を取得) -->
    <select id="SearchCountTtInvoice" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchCountTtInvoice */
            count(A1.SHIPPER_CD) COUNT_SHIPPER_CD
        from
             TT_INVOICE A1
            <isEqual property="ttPltzEnableFlg" compareValue="Y">
            ,(<include refid="Select_TtInvoiceForPltz"/>) B1
            </isEqual>
            ,TM_NXS_COMP D1 
        where
            A1.SHIPPER_CD = D1.COMP_CD
            <include refid="WhereCondition_TtInvoice_Auth"/>
            <!-- 2015/01/14 DNJP.Kawamura 不具合対応（不要な絞り込み条件を削除） START >>>>> -->
            <!-- 
            <include refid="WhereCondition_TtInvoice_access" />
            -->
            <!-- 2015/01/14 DNJP.Kawamura 不具合対応（不要な絞り込み条件を削除） END <<<<< -->
            <include refid="WhereCondition_TtInvoice"/>
    </select>

    <!-- 2015/2/12 DNJP.Kawamura UT031対応 START >>>>> -->
    <!-- 検索 SQL文 (選択データに該当する選択データを取得) -->
    <!-- 元のSQL分は全削除 -->
    <select id="SearchForPagingTtInvoice" resultMap="W6001DocInvoiceDomain_SearchForPagingTtInvoice"
        parameterClass="W6001DocCriteriaDomain">
        select
             SHIPPER_CD
            ,INVOICE_NO
            ,INVOICE_ISSUE_DT
            ,MANUAL_FLG
            ,MANUAL_TYP
            ,INVOICE_CLASS
            ,CANCEL_TYP
            ,PAR_INVOICE_NO
            ,RELATE_INVOICE_SHIPPER_CD
            ,RELATE_INVOICE_NO
            ,CONSIGNEE_CD
            ,SHIP_TO_CD
            ,TRNS_CD
            ,ETD
            ,INVOICE_ISSUER_NM
            ,COUNT_INVOICE_NO
            ,DN_BASE_FLG
            ,CANCEL_FLG
            ,CANCEL_REF_NO
            ,MANUAL_INVOICE_ISSUE_DT
        from (

            select
                 SHIPPER_CD
                ,INVOICE_NO
                ,INVOICE_ISSUE_DT
                ,MANUAL_FLG
                ,MANUAL_TYP
                ,INVOICE_CLASS
                ,CANCEL_TYP
                ,PAR_INVOICE_NO
                ,RELATE_INVOICE_SHIPPER_CD
                ,RELATE_INVOICE_NO
                ,CONSIGNEE_CD
                ,SHIP_TO_CD
                ,TRNS_CD
                ,ETD
                ,INVOICE_ISSUER_NM
                ,COUNT_INVOICE_NO
                ,DN_BASE_FLG
                ,CANCEL_FLG
                ,CANCEL_REF_NO
                ,MANUAL_INVOICE_ISSUE_DT
                ,row_number() over (<include refid="SortKeys_TtInvoice"/>) ROW_NUM
            from
            (
                <!-- キャンセルされたインボイス -->
                select
                     A1.SHIPPER_CD
                    ,A1.INVOICE_NO
                    ,A1.INVOICE_ISSUE_DT
                    ,A1.MANUAL_FLG
                    ,A1.MANUAL_TYP
                    ,A1.INVOICE_CLASS
                    ,A1.CANCEL_TYP
                    ,A1.PAR_INVOICE_NO
                    ,A1.RELATE_INVOICE_SHIPPER_CD
                    ,A1.RELATE_INVOICE_NO
                    ,A1.CONSIGNEE_CD
                    ,A1.SHIP_TO_CD
                    ,A1.TRNS_CD
                    ,A1.ETD
                    ,A1.INVOICE_ISSUER_NM
                    ,A2.COUNT_INVOICE_NO
                    ,D1.DN_BASE_FLG
                    ,A1.CANCEL_FLG
                    ,A3.INVOICE_NO CANCEL_REF_NO
                    ,A1.MANUAL_INVOICE_ISSUE_DT
                from
                     TT_INVOICE A1
                    ,(<include refid="Select_TtInvoiceForFrtCount"/>) A2
                    ,(<include refid="Select_TtInvoiceForCancel"/>) A3
                    <isEqual property="ttPltzEnableFlg" compareValue="Y">
                    ,(<include refid="Select_TtInvoiceForPltz"/>) B1
                    </isEqual>
                    ,TM_NXS_COMP D1 
                where
                        A1.SHIPPER_CD = D1.COMP_CD
                    and A1.SHIPPER_CD = A2.PAR_INVOICE_SHIPPER_CD(+)
                    and A1.INVOICE_NO = A2.PAR_INVOICE_NO(+)
                    and A1.INVOICE_ISSUE_DT = A2.PAR_INVOICE_ISSUE_DT(+)
                    and A1.SHIPPER_CD = A3.SHIPPER_CD
                    and A1.INVOICE_NO = A3.CANCEL_INVOICE_NO
                    and A1.INVOICE_ISSUE_DT = A3.CANCEL_INVOICE_ISSUE_DT 
                    and A1.CANCEL_FLG = 'Y'
                    and A1.CANCEL_TYP = 'N'
                    <include refid="WhereCondition_TtInvoice_Auth"/>
                    <include refid="WhereCondition_TtInvoice"/>
    
                union all
    
                <!-- キャンセルしたインボイス -->
                select
                     A1.SHIPPER_CD
                    ,A1.INVOICE_NO
                    ,A1.INVOICE_ISSUE_DT
                    ,A1.MANUAL_FLG
                    ,A1.MANUAL_TYP
                    ,A1.INVOICE_CLASS
                    ,A1.CANCEL_TYP
                    ,A1.PAR_INVOICE_NO
                    ,A1.RELATE_INVOICE_SHIPPER_CD
                    ,A1.RELATE_INVOICE_NO
                    ,A1.CONSIGNEE_CD
                    ,A1.SHIP_TO_CD
                    ,A1.TRNS_CD
                    ,A1.ETD
                    ,A1.INVOICE_ISSUER_NM
                    ,A2.COUNT_INVOICE_NO
                    ,D1.DN_BASE_FLG
                    ,A1.CANCEL_FLG
                    ,A1.CANCEL_INVOICE_NO CANCEL_REF_NO
                    ,A1.MANUAL_INVOICE_ISSUE_DT
                from
                     TT_INVOICE A1
                    ,(<include refid="Select_TtInvoiceForFrtCount"/>) A2
                    <isEqual property="ttPltzEnableFlg" compareValue="Y">
                    ,(<include refid="Select_TtInvoiceForPltz"/>) B1
                    </isEqual>
                    ,TM_NXS_COMP D1 
                where
                        A1.SHIPPER_CD = D1.COMP_CD
                    and A1.SHIPPER_CD = A2.PAR_INVOICE_SHIPPER_CD(+)
                    and A1.INVOICE_NO = A2.PAR_INVOICE_NO(+)
                    and A1.INVOICE_ISSUE_DT = A2.PAR_INVOICE_ISSUE_DT(+)
                    and A1.CANCEL_FLG = 'N'
                    and A1.CANCEL_TYP = 'C'
                    <include refid="WhereCondition_TtInvoice_Auth"/>
                    <include refid="WhereCondition_TtInvoice"/>
    
                union all
    
                <!-- キャンセルされていないインボイス -->
                select
                     A1.SHIPPER_CD
                    ,A1.INVOICE_NO
                    ,A1.INVOICE_ISSUE_DT
                    ,A1.MANUAL_FLG
                    ,A1.MANUAL_TYP
                    ,A1.INVOICE_CLASS
                    ,A1.CANCEL_TYP
                    ,A1.PAR_INVOICE_NO
                    ,A1.RELATE_INVOICE_SHIPPER_CD
                    ,A1.RELATE_INVOICE_NO
                    ,A1.CONSIGNEE_CD
                    ,A1.SHIP_TO_CD
                    ,A1.TRNS_CD
                    ,A1.ETD
                    ,A1.INVOICE_ISSUER_NM
                    ,A2.COUNT_INVOICE_NO
                    ,D1.DN_BASE_FLG
                    ,A1.CANCEL_FLG
                    ,A1.CANCEL_INVOICE_NO CANCEL_REF_NO
                    ,A1.MANUAL_INVOICE_ISSUE_DT
                from
                     TT_INVOICE A1
                    ,(<include refid="Select_TtInvoiceForFrtCount"/>) A2
                    <isEqual property="ttPltzEnableFlg" compareValue="Y">
                    ,(<include refid="Select_TtInvoiceForPltz"/>) B1
                    </isEqual>
                    ,TM_NXS_COMP D1 
                where
                        A1.SHIPPER_CD = D1.COMP_CD
                    and A1.SHIPPER_CD = A2.PAR_INVOICE_SHIPPER_CD(+)
                    and A1.INVOICE_NO = A2.PAR_INVOICE_NO(+)
                    and A1.INVOICE_ISSUE_DT = A2.PAR_INVOICE_ISSUE_DT(+)
                    and A1.CANCEL_FLG = 'N'
                    and A1.CANCEL_TYP = 'N'
                    <include refid="WhereCondition_TtInvoice_Auth"/>
                    <include refid="WhereCondition_TtInvoice"/>
            )
        )
        where
            ROW_NUM between #rowNumFrom# and #rowNumTo#
    </select>
    <!-- 2015/2/12 DNJP.Kawamura UT031対応 END <<<<< -->

    <!-- =================================================================================================== -->
    <!-- 実行SQL                                                                                             -->
    <!-- =================================================================================================== -->
    <!-- 検索 SQL文 (検索条件に該当する遷移可否判定を取得) -->
    <select id="SearchTtInvoiceByNonDnGInvOrReInv" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByNonDnGInvOrReInv"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByNonDnGInvOrReInv */
             T1.MANUAL_FLG
            ,T1.MANUAL_TYP
            ,T1.CANCEL_TYP
            ,T1.SHIPPING_ACT_NO
            ,T1.CANCEL_FLG
            ,T2.DN_BASE_FLG
        from
             TT_INVOICE T1
            ,TM_NXS_COMP T2
        where
            T1.SHIPPER_CD=T2.COMP_CD
        and T1.SHIPPER_CD=#shipperCd#
        and T1.INVOICE_NO=#invoiceNo#
        and T1.INVOICE_ISSUE_DT=#invoiceIssueDt#
        and T1.DELETE_FLG='N'
    </select>
    
    <!-- 検索 SQL文 (検索条件に該当するCancel 可否判定を取得) -->
    <select id="SearchTtInvoiceByCancelInv" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByCancelInv"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByCancelInv */
             T1.MANUAL_FLG
            ,T1.MANUAL_TYP
            ,T1.CANCEL_TYP
            ,T1.SHIPPING_ACT_NO
            ,T1.CUSTOM_TIMING_TYP
            ,T1.CANCEL_FLG
            ,T2.PLTZ_STATUS
            ,T2.COUNT_MAIN_MARK
            ,T3.DN_BASE_FLG 
        from
             TT_INVOICE T1
            ,( 
                select
                     SHIPPER_CD
                    ,INVOICE_NO
                    ,INVOICE_ISSUE_DT
                    ,PLTZ_STATUS
                    ,count(MAIN_MARK) COUNT_MAIN_MARK 
                from
                    TT_PLTZ 
                group by
                     SHIPPER_CD
                    ,INVOICE_NO
                    ,INVOICE_ISSUE_DT
                    ,PLTZ_STATUS
             ) T2
            ,TM_NXS_COMP T3 
        where
            T1.SHIPPER_CD = T2.SHIPPER_CD (+)
        and T1.INVOICE_NO = T2.INVOICE_NO (+)
        and T1.INVOICE_ISSUE_DT = T2.INVOICE_ISSUE_DT(+) 
        and T1.SHIPPER_CD = T3.COMP_CD 
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        and T1.DELETE_FLG = 'N'
    </select>
    
    <!--
    =======================================================================================
    == For download, All the file ID of invoice attached document
    == that related to the main invoice.
    == ダウンロード用にメインインボイスに紐付く書類ファイルのIDを全て取得します。
    == UT186 ZIP DOWNLOAD ADD
    =======================================================================================
    -->
    <select id="SearchFileIdByParentInvoiceKey" parameterClass="W6001DocCriteriaDomain" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByFileManager">
        select /* SqlMap-W6001Doc.SearchFileIdByParentInvoiceKey */
            T1.SHIPPER_CD
        ,   T1.INVOICE_NO
        ,   T1.PAR_INVOICE_ISSUE_DT
        ,   T1.CANCEL_TYP
        ,   T2.FILE_ID INVOICE_HEADER_FILE_ID
        ,   T3.FILE_ID PACKING_HEAD_FILE_ID
        ,   T4.FILE_ID SC_HEADER_FILE_ID
        ,   T5.FILE_ID CML_ATCH_CSV_FILE_ID <!-- UT205 CML ATTACH CSV ADD -->
        from
            TT_INVOICE T1
        ,   TT_INVOICE_HEADER T2
        ,   TT_PACKING_HEAD T3
        ,   TT_SC_HEADER T4
        ,   TT_SHIPPING_DOCUMENT T5 <!-- UT205 CML ATTACH CSV ADD -->
        where
            T1.PAR_INVOICE_SHIPPER_CD = #takeOverParInvoiceShipperCd#
        and T1.PAR_INVOICE_NO = #takeOverParInvoiceNo#
        and T1.PAR_INVOICE_ISSUE_DT = #takeOverParInvoiceIssueDt#
        and T1.DELETE_FLG = 'N'
        and T1.SHIPPER_CD = T2.SHIPPER_CD(+)
        and T1.INVOICE_NO = T2.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T2.INVOICE_ISSUE_DT(+)
        and T1.SHIPPER_CD = T3.SHIPPER_CD(+)
        and T1.INVOICE_NO = T3.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T3.INVOICE_ISSUE_DT(+)
        and T1.SHIPPER_CD = T4.SHIPPER_CD(+)
        and T1.INVOICE_NO = T4.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T4.INVOICE_ISSUE_DT(+)
        and T1.SHIPPER_CD = T5.SHIPPER_CD(+)
        <!-- UT205 CML ATTACH CSV ADD START -->
        and T1.INVOICE_NO = T5.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T5.INVOICE_ISSUE_DT(+)
        and T5.DOC_TYP(+) = '4'
        and T5.BRCH(+) = 1
        <!-- UT205 CML ATTACH CSV ADD END -->
        order by
            T1.SHIPPER_CD
        ,   T1.INVOICE_NO
        ,   T1.PAR_INVOICE_ISSUE_DT
    </select>

    <!--
    =======================================================================================
    == Check unique name under main invoice for zip entry.
    == zip内でファイル名が重複しないように、
    == メインインボイスの配下に同名ファイルのアップロードがされていないかをチェックします。
    == return the duplicate count.
    == 重複数を返す。
    == UT186 ZIP DOWNLOAD ADD
    =======================================================================================
    -->
    <select id="SearchUploadedCountByFileName" parameterClass="W6001DocCriteriaDomain" resultClass="java.lang.Integer">
        select /* SqlMap-W6001Doc.SearchUploadedCountByFileName */
            count(ROWNUM) DUPLICATE_COUNT
        from
            TT_INVOICE T1
        ,   TT_INVOICE_HEADER T2
        ,   TT_PACKING_HEAD T3
        ,   TT_SC_HEADER T4
        ,   TT_SHIPPING_DOCUMENT T5 <!-- UT205 CML ATTACH CSV ADD -->
        ,   LB_FILE_MANAGER T6
        ,   LB_FILE_MANAGER T7
        ,   LB_FILE_MANAGER T8
        ,   LB_FILE_MANAGER T9 <!-- UT205 CML ATTACH CSV ADD -->
        where
            T1.PAR_INVOICE_SHIPPER_CD = #takeOverParInvoiceShipperCd#
        and T1.PAR_INVOICE_NO = #takeOverParInvoiceNo#
        and T1.PAR_INVOICE_ISSUE_DT = #takeOverParInvoiceIssueDt#
        and T1.DELETE_FLG = 'N'
        and T1.SHIPPER_CD = T2.SHIPPER_CD(+)
        and T1.INVOICE_NO = T2.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T2.INVOICE_ISSUE_DT(+)
        and T1.SHIPPER_CD = T3.SHIPPER_CD(+)
        and T1.INVOICE_NO = T3.INVOICE_NO(+)
        <isNotEmpty property="shipperCd"><!-- In the case of file replacement, own invoice is not checked./ファイル差し替えの場合自身のインボイスは除外してチェック -->
        <!-- UT205 CML ATTACH CSV MOD(to outer join) START -->
        and not (
            T2.SHIPPER_CD(+) = #shipperCd#
        and T2.INVOICE_NO(+) = #invoiceNo#
        and T2.INVOICE_ISSUE_DT(+) = #invoiceIssueDt#
        )
        and not (
            T3.SHIPPER_CD(+) = #shipperCd#
        and T3.INVOICE_NO(+) = #invoiceNo#
        and T3.INVOICE_ISSUE_DT(+) = #invoiceIssueDt#
        )
        <!-- UT205 CML ATTACH CSV MOD(to outer join) END -->
        </isNotEmpty>
        and T1.INVOICE_ISSUE_DT = T3.INVOICE_ISSUE_DT(+)
        and T1.SHIPPER_CD = T4.SHIPPER_CD(+)
        and T1.INVOICE_NO = T4.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T4.INVOICE_ISSUE_DT(+)
        <!-- UT205 CML ATTACH CSV ADD START -->
        and T1.SHIPPER_CD = T5.SHIPPER_CD(+)
        and T1.INVOICE_NO = T5.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT = T5.INVOICE_ISSUE_DT(+)
        and T5.DOC_TYP(+) = '4'
        and T5.BRCH(+) = 1
        <!-- UT205 CML ATTACH CSV ADD END -->
        and T2.FILE_ID = T6.FILE_ID(+)
        and T3.FILE_ID = T7.FILE_ID(+)
        and T4.FILE_ID = T8.FILE_ID(+)
        and T5.FILE_ID = T9.FILE_ID(+) <!-- UT205 CML ATTACH CSV ADD -->
        and
        (
            T6.FILE_NAME = #uploadFileName#
        or  T7.FILE_NAME = #uploadFileName#
        or  T8.FILE_NAME = #uploadFileName#
        or  T9.FILE_NAME = #uploadFileName# <!-- UT205 CML ATTACH CSV ADD -->
        )
    </select>

    <!--
    =======================================================================================
    == Get an invoice of the keys will be displayed next.
    == 次に表示するインボイスのキーを取得します。
    ==
    == Invoices that have not been canceled are attached to the main invoice is target.
    == It is also possible to specify the invoice currently displayed.
    == In this case the next invoice of the invoice is acquired.
    == メインインボイスに紐づくキャンセルされていないインボイスが対象。
    == 現在表示中のインボイスを指定することも可能。この場合そのインボイスの次のインボイスが取得される。
    == ST946 MANUAL SCREEN TRANSITION ADD
    =======================================================================================
    -->

    <!-- inline view -->
    <sql id="Select_SortInvoiceBySameParent">
        select
            INVOICE_CLASS
        ,   SHIPPER_CD
        ,   INVOICE_NO
        ,   INVOICE_ISSUE_DT
        ,   CANCEL_FLG
        ,   row_number() over (
                order by
                    INVOICE_CLASS DESC
                ,   SHIPPER_CD ASC
                ,   INVOICE_NO ASC
                ,   INVOICE_ISSUE_DT ASC
            ) MY_ROW_NUMBER
        from
            TT_INVOICE
        where
            PAR_INVOICE_SHIPPER_CD = #takeOverParInvoiceShipperCd#
        and PAR_INVOICE_NO = #takeOverParInvoiceNo#
        and PAR_INVOICE_ISSUE_DT = #takeOverParInvoiceIssueDt#
        and CANCEL_TYP = 'N'
        and DELETE_FLG = 'N'
    </sql>

    <!-- select statement -->
    <select id="SearchNextInvoiceBySameParent" parameterClass="W6001DocCriteriaDomain" resultMap="W6001DocInvoiceDomain_SearchNextInvoiceBySameParent">
        select /* SqlMap-W6001Doc.SearchNextInvoiceBySameParent */
            *
        from
        (
            select
                *
            from
            (
                <include refid="Select_SortInvoiceBySameParent" />
            ) T1
            where
                T1.CANCEL_FLG = 'N'
            <isNotEmpty property="shipperCd">
            and T1.MY_ROW_NUMBER <![CDATA[ > ]]>
                (
                    select
                        T2.MY_ROW_NUMBER
                    from
                    (
                        <include refid="Select_SortInvoiceBySameParent" />
                    ) T2
                    where
                    <!-- current invoice/現在表示中のインボイス -->
                        T2.SHIPPER_CD = #shipperCd#
                    and T2.INVOICE_NO = #invoiceNo#
                    and T2.INVOICE_ISSUE_DT = #invoiceIssueDt#
                )
            </isNotEmpty>
            order by
                T1.MY_ROW_NUMBER
        )
        where
            ROWNUM = 1
    </select>


    <!-- =================================================================== -->
    <!-- SearchTtInvoiceByUploadInit                                         -->
    <!-- =================================================================== -->
    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceByUploadInit) -->
    <select id="SearchTtInvoiceByUploadInit" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByUploadInit"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByUploadInit */
             T1.SHIPPER_CD
            ,T1.INVOICE_NO
            ,T1.INVOICE_ISSUE_DT
            ,T1.CANCEL_INVOICE_NO
            ,T1.MANUAL_TYP
            ,T1.INVOICE_CLASS
            ,T1.TRNS_CD
            ,T1.TRNS_NM
            ,T1.SHIP_TO_CD
            ,T1.CONSIGNEE_CD
            ,T1.INVOICE_CTGRY
            ,T1.INVOICE_CTGRY_NM
            ,T1.ETD
            ,T1.ETA
            ,T1.ARRIVAL_TIME
            ,T1.L_PORT_CNTRY_CD
            ,T1.LOADING_PORT_CD
            ,T1.D_PORT_CNTRY_CD
            ,T1.DISCHARGE_PORT_CD
            ,T1.DLIV_POINT
            ,T1.CARRIER_COMP_CD
            ,T1.FORWARDER_COMP_CD
            ,T1.VESSEL
            ,T1.BOOKING_NO
            ,T1.FREIGHT_RESPONSIBLE_CD
            ,T1.FREIGHT_RESPONSIBLE_NM
            ,T1.PRICE_TERMS
            ,T1.TRADE_TERMS
            ,T1.TERMS_POINT
            ,T1.PAY_TERMS
            ,T1.PAY_METH
            ,T1.PAY_METH_NM
            ,T1.REM_LC_TYP
            ,T1.LC_NO
            ,T1.LC_DT
            ,T1.LC_BANK_NM_1
            ,T1.LC_BANK_NM_2
            ,T1.REM_BANK_NM
            ,T1.REM_BANK_ADDRESS_1
            ,T1.REM_BANK_ADDRESS_2
            ,T1.REM_BANK_ADDRESS_3
            ,T1.REM_BANK_ACCOUNT_NO
            ,T1.CURR_CD
            ,T1.NET_AMOUNT
            ,T1.FREIGHT
            ,T1.INSURANCE
            ,T1.SUB_TOTAL
            ,T1.VAT_RATIO
            ,T1.VAT
            ,T1.HANDLING_CHARGE
            ,T1.ADDITIONAL_CHARGE_NM
            ,T1.ADDITIONAL_CHARGE
            ,T1.TOTAL_INVOICE_AMOUNT
            ,T1.PLTZ_ITEM_QTY
            ,T1.WEIGHT_UNIT
            ,T1.TOTAL_NET_WEIGHT
            ,T1.TOTAL_GROSS_WEIGHT
            ,T1.VOLUME_UNIT
            ,T1.TOTAL_VOLUME
            ,T1.RELATE_INVOICE_SHIPPER_CD
            ,T1.RELATE_INVOICE_NO
            ,T1.COM_UPDATE_TIMESTAMP
            ,T2.COMP_NM  COMP_NM1
            ,T3.COMP_NM  COMP_NM2
            ,T4.COMP_NM  COMP_NM3
            ,T5.COMP_NM  COMP_NM4
            ,T6.COMP_NM  COMP_NM5
            ,T7.PORT_NM  PORT_NM1
            ,T8.PORT_NM  PORT_NM2
            ,T9.SHIP_TO_NM
        from
             TT_INVOICE  T1
            ,TM_NXS_COMP T2
            ,TM_NXS_COMP T3
            ,TM_NXS_COMP T4
            ,TM_NXS_COMP T5
            ,TM_NXS_COMP T6
            ,TM_PORT T7
            ,TM_PORT T8
            ,TM_NXS_SHIP_TO T9
        where
            T1.SHIPPER_CD=T2.COMP_CD(+)
        and T1.CONSIGNEE_CD=T3.COMP_CD(+)
        and T1.CARRIER_COMP_CD=T4.COMP_CD(+)
        and T1.FORWARDER_COMP_CD=T5.COMP_CD(+)
        and T1.RELATE_INVOICE_SHIPPER_CD=T6.COMP_CD(+)
        and T1.L_PORT_CNTRY_CD=T7.CNTRY_CD(+)
        and T1.LOADING_PORT_CD=T7.PORT_CD(+)
        and T1.D_PORT_CNTRY_CD=T8.CNTRY_CD(+)
        and T1.DISCHARGE_PORT_CD=T8.PORT_CD(+)
        and T1.SHIP_TO_CD=T9.SHIP_TO_CD(+)
        and T1.SHIPPER_CD=#shipperCd#
        and T1.INVOICE_NO=#invoiceNo#
        and T1.INVOICE_ISSUE_DT=#invoiceIssueDt#
        and T1.DELETE_FLG='N'
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceByUploadRegister) -->
    <select id="SearchTtInvoiceByUploadRegister" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByUploadRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByUploadRegister */
            T1.CUSTOM_TIMING_TYP
            , T1.MANUAL_TYP
            , T2.PLTZ_STATUS
            , T2.COUNT_MAIN_MARK COUNT_MAIN_MARK
        from
            TT_INVOICE T1
            , ( 
                select
                     SHIPPER_CD
                    ,INVOICE_NO
                    ,INVOICE_ISSUE_DT
                    ,PLTZ_STATUS
                    ,count(nvl(MAIN_MARK, 0)) COUNT_MAIN_MARK 
                from
                    TT_PLTZ 
                where
                        SHIPPER_CD = #shipperCd#
                    and INVOICE_NO = #invoiceNo#
                    and INVOICE_ISSUE_DT = #invoiceIssueDt#
                group by
                     SHIPPER_CD
                    ,INVOICE_NO
                    ,INVOICE_ISSUE_DT
                    ,PLTZ_STATUS
            ) T2 
        where
            T1.SHIPPER_CD = T2.SHIPPER_CD(+) 
        and T1.INVOICE_NO = T2.INVOICE_NO(+) 
        and T1.INVOICE_ISSUE_DT = T2.INVOICE_ISSUE_DT(+) 
        and T1.SHIPPER_CD = #shipperCd# 
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt# 
        and T1.DELETE_FLG = 'N'
    </select>
    
    <!-- =================================================================== -->
    <!-- Manual Invoice Upload Screen / Ship to 情報取得                                             -->
    <!-- =================================================================== -->
    <sql id="Select_SearchTmExpShipToShipping">
        select
            max(APLY_STRT_DT) APLY_STRT_DT 
        from
            TM_EXP_SHIP_TO_SHIPPING
        where
            COMP_CD = #shipperCd# <!-- NL004 MOD -->
        and SHIP_TO_CD = #shipToCd#
        and APLY_STRT_DT <![CDATA[<=]]> #aplyStrtDt#
    </sql>
    <!-- 検索 SQL文 (W6001Doc.SearchTmExpShipToShipping) -->
    <select id="SearchTmExpShipToShipping" resultMap="W6001DocPltzItemDomain_SearchTmExpShipToShipping"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmExpShipToShipping */
             T1.CONTAINER_SORTING_KEY
            ,T1.CONTAINER_LOOSE_TYP
            ,T1.CUSTOM_TIMING_TYP
            ,T2.SHIP_TO_TEL
            ,T2.COMP_CD
            ,T2.PRINT_SHIP_TO_NM_1
            ,T2.PRINT_SHIP_TO_NM_2
            ,T2.PRINT_SHIP_TO_ADDR_1
            ,T2.PRINT_SHIP_TO_ADDR_2
            ,T2.PRINT_SHIP_TO_ADDR_3
            ,T2.PRINT_SHIP_TO_ADDR_4
        from
             TM_EXP_SHIP_TO_SHIPPING T1
            ,TM_NXS_SHIP_TO T2
        where
            T1.SHIP_TO_CD = t2.SHIP_TO_CD
        and T1.COMP_CD = #shipperCd# <!-- NL004 MOD -->
        and T1.SHIP_TO_CD = #shipToCd#
        and T1.APLY_STRT_DT = (<include refid="Select_SearchTmExpShipToShipping" />)
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.LockByNoWaitTtPltz) -->
    <select id="LockByNoWaitTtPltz" resultMap="W6001DocPltzDomain_LockByNoWaitTtPltz"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.LockByNoWaitTtPltz */
             MAIN_MARK 
        from
            TT_PLTZ 
        where
            SHIPPER_CD = #shipperCd#
        and INVOICE_NO = #invoiceNo#
        and INVOICE_ISSUE_DT = #invoiceIssueDt# 
        for update nowait
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltz) -->
    <select id="SearchTtPltz" resultMap="W6001DocDomain_SearchTtPltz"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtPltz */
            PLTZ_STATUS
           ,count(MAIN_MARK) COUNT_MAIN_MARK 
        from
            TT_PLTZ 
        where
            SHIPPER_CD = #shipperCd#
        and INVOICE_NO = #invoiceNo#
        and INVOICE_ISSUE_DT = #invoiceIssueDt#
        group by
             PLTZ_STATUS
            ,CUSTOM_TIMING_TYP
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTtPltzByTypA) -->
    <select id="SearchCountTtPltzByTypA" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchCountTtPltzByTypA */
             count(T.CONTAINER_SORTING_KEY) COUNT_SORTING_KEY
        from
            ( 
                select
                     T1.CONTAINER_SORTING_KEY
                    ,T1.PLTZ_STATUS
                    ,T1.SHIPPING_FIRM_NO
                    ,T3.WORKED_DT
                    ,T3.ETD
                    ,T2.DSC_ID
                from
                     TT_PLTZ T1
                    ,TW_INV_PLTZ T2
                    ,TT_SHIPPING_FIRM T3 
                where
                    T1.MAIN_MARK = T2.MAIN_MARK(+) 
                and T1.SHIPPING_FIRM_NO = T3.SHIPPING_FIRM_NO
                <!--権限-->
                and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                <isNotEmpty prepend="and" property="userAuthList">
                    (T1.SHIPPER_CD) in (
                        <iterate property="userAuthList" conjunction=",">
                            (#userAuthList[].authMgtComp#)
                        </iterate>
                    )
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgCom">
                    T1.CUR_WH_COMP_CD = #stgCom#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgWh">
                    T1.CUR_WH_CD = #stgWh#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="trnsCd">
                    T1.TRNS_CD = #trnsCd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerLooseTyp">
                    T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="customTimingTyp">
                    T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerSortingKey">
                    T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmEtd">
                    trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toEtd">
                    trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="shippingFirmNo">
                    T1.SHIPPING_FIRM_NO like CONCAT(#shippingFirmNo#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmWorkedDt">
                    trunc(T3.WORKED_DT) <![CDATA[>=]]> #fmWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toWorkedDt">
                    trunc(T3.WORKED_DT) <![CDATA[<=]]> #toWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="flag">
                <isEqual property="flag" compareValue="N">
                    T3.WORKED_DT + 1 <![CDATA[>=]]> #workedDt#
                </isEqual>
                <isEqual property="flag" compareValue="Y">
                    T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                </isEqual>
                </isNotEmpty>
                and T1.PLTZ_STATUS = 80
                <isNotEmpty prepend="and" property="dscId">
                    T2.DSC_ID (+) = #dscId#
                </isNotEmpty>
                group by
                     T1.CONTAINER_SORTING_KEY
                    ,T1.PLTZ_STATUS
                    ,T1.SHIPPING_FIRM_NO
                    ,T3.WORKED_DT
                    ,T3.ETD
                    ,T2.DSC_ID
            ) T
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchForPagingTtPltzByTypA) -->
    <select id="SearchForPagingTtPltzByTypA" resultMap="W6001DocDomain_SearchForPagingTtPltzByTypA"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchForPagingTtPltzByTypA */
             CONTAINER_SORTING_KEY
            ,SHIPPING_FIRM_NO
            ,WORKED_DT
            ,DELAY_FLAG
            ,ETD
            ,DSC_ID
            ,COUNT_MAIN_MARK 
        from
            ( 
                select
                     CONTAINER_SORTING_KEY
                    ,SHIPPING_FIRM_NO
                    ,WORKED_DT
                    ,DELAY_FLAG
                    ,ETD
                    ,DSC_ID
                    ,COUNT_MAIN_MARK
                    ,row_number() over ( 
                       order by
                            CONTAINER_SORTING_KEY
                           ,DELAY_FLAG desc
                           ,ETD
                           ,SHIPPING_FIRM_NO
                    ) ROW_NUM 
                from
                    ( 
                        select
                             T1.CONTAINER_SORTING_KEY
                            ,T1.SHIPPING_FIRM_NO
                            ,T3.WORKED_DT
                            ,case 
                               when T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                               then 'Y' 
                               else 'N' 
                               end DELAY_FLAG
                            ,T3.ETD
                            ,T2.DSC_ID
                            ,count(T1.MAIN_MARK) COUNT_MAIN_MARK 
                        from
                             TT_PLTZ T1
                            ,TW_INV_PLTZ T2
                            ,TT_SHIPPING_FIRM T3 
                        where
                            T1.MAIN_MARK = T2.MAIN_MARK(+) 
                        and T1.SHIPPING_FIRM_NO = T3.SHIPPING_FIRM_NO
                        <!--権限-->
                        and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                        <isNotEmpty prepend="and" property="userAuthList">
                            (T1.SHIPPER_CD) in (
                                <iterate property="userAuthList" conjunction=",">
                                    (#userAuthList[].authMgtComp#)
                                </iterate>
                            )
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgCom">
                            T1.CUR_WH_COMP_CD = #stgCom#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgWh">
                            T1.CUR_WH_CD = #stgWh#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="trnsCd">
                            T1.TRNS_CD = #trnsCd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerLooseTyp">
                            T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="customTimingTyp">
                            T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerSortingKey">
                            T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmEtd">
                            trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toEtd">
                            trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="shippingFirmNo">
                            T1.SHIPPING_FIRM_NO like CONCAT(#shippingFirmNo#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmWorkedDt">
                            trunc(T3.WORKED_DT) <![CDATA[>=]]> #fmWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toWorkedDt">
                            trunc(T3.WORKED_DT) <![CDATA[<=]]> #toWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="flag">
                        <isEqual property="flag" compareValue="N">
                            T3.WORKED_DT + 1 <![CDATA[>=]]> #workedDt#
                        </isEqual>
                        <isEqual property="flag" compareValue="Y">
                            T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                        </isEqual>
                        </isNotEmpty>
                        and T1.PLTZ_STATUS = 80
                        <isNotEmpty prepend="and" property="dscId">
                            T2.DSC_ID (+) = #dscId#
                        </isNotEmpty>
                        group by
                             T1.CONTAINER_SORTING_KEY
                            ,T1.PLTZ_STATUS
                            ,T1.SHIPPING_FIRM_NO
                            ,T3.WORKED_DT
                            ,T3.ETD 
                            ,T2.DSC_ID
                        order by
                             T1.CONTAINER_SORTING_KEY
                            ,DELAY_FLAG desc
                            ,T3.ETD
                            ,T1.SHIPPING_FIRM_NO
                    )
            ) 
        where
            ROW_NUM between #rowNumFrom# and #rowNumTo#
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTtPltzByTypB) -->
    <select id="SearchCountTtPltzByTypB" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchCountTtPltzByTypB */
             count(T.CONTAINER_SORTING_KEY) COUNT_SORTING_KEY
        from
            ( 
                select
                    T1.CONTAINER_SORTING_KEY
                    , T1.PLTZ_STATUS
                    , T1.STG_ACT_NO
                    , T3.STG_ACT_DT
                    , T3.ETD
                    , T2.DSC_ID
                from
                     TT_PLTZ T1
                    ,TW_INV_PLTZ T2
                    ,TT_STG_ACT T3 
                where
                    T1.MAIN_MARK = T2.MAIN_MARK(+) 
                and T1.STG_ACT_NO = T3.STG_ACT_NO
                <!--権限-->
                and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                <isNotEmpty prepend="and" property="userAuthList">
                    (T1.SHIPPER_CD) in (
                        <iterate property="userAuthList" conjunction=",">
                            (#userAuthList[].authMgtComp#)
                        </iterate>
                    )
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgCom">
                    T1.CUR_WH_COMP_CD = #stgCom#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgWh">
                    T1.CUR_WH_CD = #stgWh#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="trnsCd">
                    T1.TRNS_CD = #trnsCd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerLooseTyp">
                    T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="customTimingTyp">
                    T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerSortingKey">
                    T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmEtd">
                    trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toEtd">
                    trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="shippingFirmNo">
                    T1.STG_ACT_NO like CONCAT(#shippingFirmNo#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmWorkedDt">
                    trunc(T3.STG_ACT_DT) <![CDATA[>=]]> #fmWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toWorkedDt">
                    trunc(T3.STG_ACT_DT) <![CDATA[<=]]> #toWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="flag">
                <isEqual property="flag" compareValue="N">
                    T3.STG_ACT_DT + 1 <![CDATA[>=]]> #workedDt#
                </isEqual>
                <isEqual property="flag" compareValue="Y">
                    T3.STG_ACT_DT + 1 <![CDATA[<]]> #workedDt#
                </isEqual>
                </isNotEmpty>
                and T1.PLTZ_STATUS = 50 
                <isNotEmpty prepend="and" property="dscId">
                    T2.DSC_ID (+) = #dscId#
                </isNotEmpty>
                group by
                    T1.CONTAINER_SORTING_KEY
                    , T1.PLTZ_STATUS
                    , T1.STG_ACT_NO
                    , T3.STG_ACT_DT
                    , T3.ETD
                    , T2.DSC_ID
         ) T
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchForPagingTtPltzByTypB) -->
    <select id="SearchForPagingTtPltzByTypB" resultMap="W6001DocDomain_SearchForPagingTtPltzByTypB"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchForPagingTtPltzByTypB */
             CONTAINER_SORTING_KEY
            ,STG_ACT_NO
            ,STG_ACT_DT
            ,DELAY_FLAG
            ,ETD
            ,DSC_ID
            ,COUNT_MAIN_MARK 
        from
            ( 
                select
                     T4.CONTAINER_SORTING_KEY
                    ,T4.STG_ACT_NO
                    ,T4.STG_ACT_DT
                    ,T4.DELAY_FLAG
                    ,T4.ETD
                    ,T4.DSC_ID
                    ,T4.COUNT_MAIN_MARK
                    ,row_number() over ( 
                       order by
                            CONTAINER_SORTING_KEY
                           ,DELAY_FLAG desc
                           ,ETD
                           ,STG_ACT_NO
                    ) ROW_NUM 
                from
                    ( 
                        select
                             T1.CONTAINER_SORTING_KEY
                            ,T1.STG_ACT_NO
                            ,T3.STG_ACT_DT
                            ,case 
                               when T3.STG_ACT_DT + 1 <![CDATA[<]]> #workedDt# 
                               then 'Y' 
                               else 'N' 
                               end DELAY_FLAG
                            ,T3.ETD
                            ,T2.DSC_ID
                            ,count(T1.MAIN_MARK) COUNT_MAIN_MARK 
                        from
                             TT_PLTZ T1
                            ,TW_INV_PLTZ T2
                            ,TT_STG_ACT T3 
                        where
                            T1.MAIN_MARK = T2.MAIN_MARK(+) 
                        and T1.STG_ACT_NO = T3.STG_ACT_NO
                        <!--権限-->
                        and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                        <isNotEmpty prepend="and" property="userAuthList">
                            (T1.SHIPPER_CD) in (
                                <iterate property="userAuthList" conjunction=",">
                                    (#userAuthList[].authMgtComp#)
                                </iterate>
                            )
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgCom">
                            T1.CUR_WH_COMP_CD = #stgCom#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgWh">
                            T1.CUR_WH_CD = #stgWh#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="trnsCd">
                            T1.TRNS_CD = #trnsCd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerLooseTyp">
                            T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="customTimingTyp">
                            T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerSortingKey">
                            T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmEtd">
                            trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toEtd">
                            trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="shippingFirmNo">
                            T1.STG_ACT_NO like CONCAT(#shippingFirmNo#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmWorkedDt">
                            trunc(T3.STG_ACT_DT) <![CDATA[>=]]> #fmWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toWorkedDt">
                            trunc(T3.STG_ACT_DT) <![CDATA[<=]]> #toWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="flag">
                        <isEqual property="flag" compareValue="N">
                            T3.STG_ACT_DT + 1 <![CDATA[>=]]> #workedDt#
                        </isEqual>
                        <isEqual property="flag" compareValue="Y">
                            T3.STG_ACT_DT + 1 <![CDATA[<]]> #workedDt#
                        </isEqual>
                        </isNotEmpty>
                        and T1.PLTZ_STATUS = 50 
                        <isNotEmpty prepend="and" property="dscId">
                            T2.DSC_ID (+) = #dscId#
                        </isNotEmpty>
                        group by
                            T1.CONTAINER_SORTING_KEY
                            , T1.PLTZ_STATUS
                            , T1.STG_ACT_NO
                            , T3.STG_ACT_DT
                            , T3.ETD
                            , T2.DSC_ID
                        order by
                            T1.CONTAINER_SORTING_KEY
                            , DELAY_FLAG desc
                            , T3.ETD
                            , T1.STG_ACT_NO
                    ) T4
            ) 
        where
            ROW_NUM between #rowNumFrom# and #rowNumTo#
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTtPltzByTypZ) -->
    <select id="SearchCountTtPltzByTypZ" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchCountTtPltzByTypZ */
             count(T.CONTAINER_SORTING_KEY) COUNT_SORTING_KEY 
        from
            ( 
                select
                    T1.CONTAINER_SORTING_KEY
                    , T1.PLTZ_STATUS
                    , T1.STG_INSTR_NO
                    , T3.WORKED_DT
                    , T3.ETD
                    , T2.DSC_ID
                from
                     TT_PLTZ T1
                    ,TW_INV_PLTZ T2
                    ,TT_STG_INSTR T3 
                where
                    T1.MAIN_MARK = T2.MAIN_MARK(+) 
                and T1.STG_INSTR_NO = T3.STG_INSTR_NO
                <!--権限-->
                and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                <isNotEmpty prepend="and" property="userAuthList">
                    (T1.SHIPPER_CD) in (
                        <iterate property="userAuthList" conjunction=",">
                            (#userAuthList[].authMgtComp#)
                        </iterate>
                    )
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgCom">
                    T1.CUR_WH_COMP_CD = #stgCom#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="stgWh">
                    T1.CUR_WH_CD = #stgWh#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="trnsCd">
                    T1.TRNS_CD = #trnsCd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerLooseTyp">
                    T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="customTimingTyp">
                    T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="containerSortingKey">
                    T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmEtd">
                    trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toEtd">
                    trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="shippingFirmNo">
                    T1.STG_INSTR_NO like CONCAT(#shippingFirmNo#, '%')
                </isNotEmpty>
                <isNotEmpty prepend="and" property="fmWorkedDt">
                    trunc(T3.WORKED_DT) <![CDATA[>=]]> #fmWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="toWorkedDt">
                    trunc(T3.WORKED_DT) <![CDATA[<=]]> #toWorkedDt#
                </isNotEmpty>
                <isNotEmpty prepend="and" property="flag">
                <isEqual property="flag" compareValue="N">
                    T3.WORKED_DT + 1 <![CDATA[>=]]> #workedDt#
                </isEqual>
                <isEqual property="flag" compareValue="Y">
                    T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                </isEqual>
                </isNotEmpty>
                and T1.PLTZ_STATUS = 30 
                <isNotEmpty prepend="and" property="dscId">
                    T2.DSC_ID (+) = #dscId#
                </isNotEmpty>
                 group by
                    T1.CONTAINER_SORTING_KEY
                    , T1.PLTZ_STATUS
                    , T1.STG_INSTR_NO
                    , T3.WORKED_DT
                    , T3.ETD
                    , T2.DSC_ID
            ) T
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchForPagingTtPltzByTypZ) -->
    <select id="SearchForPagingTtPltzByTypZ" resultMap="W6001DocDomain_SearchForPagingTtPltzByTypZ"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchForPagingTtPltzByTypZ */
             CONTAINER_SORTING_KEY
            ,STG_INSTR_NO
            ,WORKED_DT
            ,DELAY_FLAG
            ,ETD
            ,DSC_ID
            ,COUNT_MAIN_MARK 
        from
            ( 
                select
                     CONTAINER_SORTING_KEY
                    ,STG_INSTR_NO
                    ,WORKED_DT
                    ,DELAY_FLAG
                    ,ETD
                    ,DSC_ID
                    ,COUNT_MAIN_MARK
                    ,row_number() over ( 
                       order by
                           CONTAINER_SORTING_KEY
                           , DELAY_FLAG desc
                           , ETD
                           , STG_INSTR_NO
                    ) ROW_NUM 
                from
                    ( 
                        select
                             T1.CONTAINER_SORTING_KEY
                            ,T1.STG_INSTR_NO
                            ,T3.WORKED_DT
                            ,case 
                               when T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                               then 'Y' 
                               else 'N' 
                               end DELAY_FLAG
                            ,T3.ETD
                            ,T2.DSC_ID
                            ,count(T1.MAIN_MARK) COUNT_MAIN_MARK 
                        from
                             TT_PLTZ T1
                            ,TW_INV_PLTZ T2
                            ,TT_STG_INSTR T3 
                        where
                            T1.MAIN_MARK = T2.MAIN_MARK(+) 
                        and T1.STG_INSTR_NO = T3.STG_INSTR_NO
                        <!--権限-->
                        and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
                        <isNotEmpty prepend="and" property="userAuthList">
                            (T1.SHIPPER_CD) in (
                                <iterate property="userAuthList" conjunction=",">
                                    (#userAuthList[].authMgtComp#)
                                </iterate>
                            )
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgCom">
                            T1.CUR_WH_COMP_CD = #stgCom#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="stgWh">
                            T1.CUR_WH_CD = #stgWh#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="trnsCd">
                            T1.TRNS_CD = #trnsCd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerLooseTyp">
                            T1.CONTAINER_LOOSE_TYP = #containerLooseTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="customTimingTyp">
                            T1.CUSTOM_TIMING_TYP = #customTimingTyp#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="containerSortingKey">
                            T1.CONTAINER_SORTING_KEY like CONCAT(#containerSortingKey#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmEtd">
                            trunc(T3.ETD) <![CDATA[>=]]> #fmEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toEtd">
                            trunc(T3.ETD) <![CDATA[<=]]> #toEtd#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="shippingFirmNo">
                            T1.STG_INSTR_NO like CONCAT(#shippingFirmNo#, '%')
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="fmWorkedDt">
                            trunc(T3.STG_INSTR_DT) <![CDATA[>=]]> #fmWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="toWorkedDt">
                            trunc(T3.STG_INSTR_DT) <![CDATA[<=]]> #toWorkedDt#
                        </isNotEmpty>
                        <isNotEmpty prepend="and" property="flag">
                        <isEqual property="flag" compareValue="N">
                            T3.WORKED_DT + 1 <![CDATA[>=]]> #workedDt#
                        </isEqual>
                        <isEqual property="flag" compareValue="Y">
                            T3.WORKED_DT + 1 <![CDATA[<]]> #workedDt#
                        </isEqual>
                        </isNotEmpty>
                        and T1.PLTZ_STATUS = 30 
                        <isNotEmpty prepend="and" property="dscId">
                            T2.DSC_ID (+) = #dscId#
                        </isNotEmpty>
                         group by
                            T1.CONTAINER_SORTING_KEY
                            , T1.PLTZ_STATUS
                            , T1.STG_INSTR_NO
                            , T3.WORKED_DT
                            , T3.ETD
                            , T2.DSC_ID
                        order by
                            T1.CONTAINER_SORTING_KEY
                            , DELAY_FLAG desc
                            , T3.ETD
                            , T1.STG_INSTR_NO
                    )
            ) 
        where
            ROW_NUM between #rowNumFrom# and #rowNumTo#
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltzByCreate) -->
    <select id="SearchTtPltzByCreate" resultMap="W6001DocDomain_SearchTtPltzByCreate"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtPltzByCreate */
             T1.MAIN_MARK
            ,T1.SHIPPER_CD
            ,T1.SHIP_TO_CD
            ,T1.CUSTOMER_CD
            ,T1.LGCY_SHIP_TO
            ,T1.TRNS_CD
            ,T1.TRNS_CD_ORG
            ,T1.INVOICE_KEY
            ,T1.CONTAINER_SORTING_KEY
            ,T1.CONTAINER_LOOSE_TYP
            <!-- // 2015/3/31 DNJP.Kawamura UT206対応 START >>>>> -->
            ,T1.RETURN_STYLE_CD
            <!-- // 2015/3/31 DNJP.Kawamura UT206対応 END <<<<< -->
            ,T1.RT_USE_FLG
            ,T1.WEIGHT_UNIT
            ,T1.NET_WEIGHT
            ,T1.GROSS_WEIGHT
            ,T1.VOLUME_UNIT
            ,T1.VOLUME
            ,T1.CML_TYP
            ,T1.CONSIGNEE_CD
            ,T1.COMMERCIAL_FLG
            ,T1.TRADE_TERMS
            ,T1.CURR_CD
            ,T1.PLTZ_STATUS
            ,T1.CUR_WH_COMP_CD
            ,T1.CUR_WH_CD
            ,T1.EXP_LIMIT_FLG
            ,T1.DNGR_ITEM_FLG
            ,T1.STG_INSTR_NO
            ,T1.STG_ACT_NO
            ,T1.SHIPPING_FIRM_NO
            ,T1.CUSTOM_TIMING_TYP
            ,T1.SPLIT_SHIPPING_NG_FLG
            ,T1.SHIPPER_COMP_NM_ABB
            ,T1.SHIPPER_COMP_NM_1
            ,T1.SHIPPER_COMP_NM_2
            ,T1.SHIPPER_COMP_ADDR_1
            ,T1.SHIPPER_COMP_ADDR_2
            ,T1.SHIPPER_COMP_ADDR_3
            ,T1.SHIPPER_COMP_ADDR_4
            ,T1.SHIPPER_COMP_TEL
            ,T1.SHIPPER_COMP_FAX
            ,T1.CONSIGNEE_COMP_NM_1
            ,T1.CONSIGNEE_COMP_NM_2
            ,T1.CONSIGNEE_COMP_ADDR_1
            ,T1.CONSIGNEE_COMP_ADDR_2
            ,T1.CONSIGNEE_COMP_ADDR_3
            ,T1.CONSIGNEE_COMP_ADDR_4
            ,T1.CONSIGNEE_COMP_TEL
            ,T1.CONSIGNEE_COMP_FAX
            ,T1.CONSIGNEE_ATTN
            ,T1.SHIP_TO_NM_1
            ,T1.SHIP_TO_NM_2
            ,T1.SHIP_TO_ADDR_1
            ,T1.SHIP_TO_ADDR_2
            ,T1.SHIP_TO_ADDR_3
            ,T1.SHIP_TO_ADDR_4
            ,T1.SHIP_TO_TEL
            ,T1.INVOICE_CTGRY
            ,T1.PRICE_TERMS
            ,T1.TERMS_POINT
            ,T1.PAY_TERMS
            ,T1.PAY_METH
            ,T1.RE_EXP_GOODS_FLG
            ,T1.SUPPLIER_INVOICE_NO
            ,T1.IMP_INVOICE_NO_1
            ,T1.IMP_INVOICE_NO_2
            ,T1.FREIGHT_RESPONSIBLE_CD
            ,T1.MIGRATION_FLG
            ,T2.COMP_CD
            ,T3.CONTAINER_NO
        from
             TT_PLTZ            T1
            ,TM_NXS_SHIP_TO     T2
            ,TT_SHIPPING_FIRM   T3
        
        where
            T1.SHIP_TO_CD=T2.SHIP_TO_CD(+)
        and T1.SHIPPING_FIRM_NO=T3.SHIPPING_FIRM_NO(+)
        <isEqual property="customTimingTyp" compareValue="A">
            <!-- 「バン詰め後通関」の場合 -->
            and T1.CUR_WH_COMP_CD=#stgCom#
            and T1.CUR_WH_CD=#stgWh#
            and T1.TRNS_CD=#trnsCd#
            and T1.CONTAINER_LOOSE_TYP=#containerLooseTyp#
            and T1.CUSTOM_TIMING_TYP=#customTimingTyp#
            and T1.CONTAINER_SORTING_KEY=#containerSortingKey#
            and T1.SHIPPING_FIRM_NO=#shippingFirmNo#
            and T1.INVOICE_NO is null
            and T1.PLTZ_STATUS='80'
        </isEqual>
        <isEqual property="customTimingTyp" compareValue="B">
            <!-- 「通関後バン詰め」の場合 -->
            and T1.CUR_WH_COMP_CD=#stgCom#
            and T1.CUR_WH_CD=#stgWh#
            and T1.TRNS_CD=#trnsCd#
            and T1.CONTAINER_LOOSE_TYP=#containerLooseTyp#
            and T1.CUSTOM_TIMING_TYP=#customTimingTyp#
            and T1.CONTAINER_SORTING_KEY=#containerSortingKey#
            and T1.STG_ACT_NO=#shippingFirmNo#
            and T1.INVOICE_NO is null
            and T1.PLTZ_STATUS='50'
        </isEqual>
        <isEqual property="customTimingTyp" compareValue="Z">
            and T1.CUR_WH_COMP_CD=#stgCom#
            and T1.CUR_WH_CD=#stgWh#
            and T1.TRNS_CD=#trnsCd#
            and T1.CONTAINER_LOOSE_TYP=#containerLooseTyp#
            and T1.CUSTOM_TIMING_TYP=#customTimingTyp#
            and T1.CONTAINER_SORTING_KEY=#containerSortingKey#
            and T1.STG_INSTR_NO=#shippingFirmNo#
            and T1.INVOICE_NO is null
            and T1.PLTZ_STATUS='30'
        </isEqual>
        <!--権限-->
        and T1.SHIPPER_CD in (select COMP_CD from TM_NXS_COMP where SERVER_ID = #serverId#)
        <isNotEmpty prepend="and" property="userAuthList">
            (T1.SHIPPER_CD) in (
                <iterate property="userAuthList" conjunction=",">
                    (#userAuthList[].authMgtComp#)
                </iterate>
            )
        </isNotEmpty>
    </select>
    
    <!-- ======================================================================================= -->
    <!--  Invoice Grouping画面 / Operation No取得                                                -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzByOperationNo" resultMap="W6001DocPltzDomain_SearchTwInvPltzByOperationNo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByOperationNo */
            distinct
            <isEqual property="customTimingTyp" compareValue="A">
                SHIPPING_FIRM_NO OPERATION_NO
            </isEqual>
            <isEqual property="customTimingTyp" compareValue="B">
                STG_ACT_NO OPERATION_NO
            </isEqual>
            <isEqual property="customTimingTyp" compareValue="Z">
                STG_INSTR_NO OPERATION_NO
            </isEqual>
        from
            TW_INV_PLTZ
        <dynamic prepend="where">
            <isNotEmpty prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="customTimingTyp">
                CUSTOM_TIMING_TYP = #customTimingTyp#
            </isNotEmpty>
        </dynamic>
        order by
            OPERATION_NO
    </select>
    
    
    <!-- 検索 SQL文 (W6001Doc.SearchTwInvPltzByOperationNoTypA) -->
    <select id="SearchTwInvPltzByOperationNoTypA" resultMap="W6001DocDomain_SearchTwInvPltzByOperationNoTypA"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByOperationNoTypA */
             SHIPPING_FIRM_NO
            ,count(SHIPPING_FIRM_NO) COUNT_SHIPPING_FIRM_NO
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        and CUSTOM_TIMING_TYP = #customTimingTyp#
        group by
            SHIPPING_FIRM_NO
        order by
            SHIPPING_FIRM_NO
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTwInvPltzByOperationNoTypB) -->
    <select id="SearchTwInvPltzByOperationNoTypB" resultMap="W6001DocDomain_SearchTwInvPltzByOperationNoTypB"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByOperationNoTypB */
             STG_ACT_NO
            ,count(STG_ACT_NO) COUNT_STG_ACT_NO 
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        and CUSTOM_TIMING_TYP = #customTimingTyp#
        group by
            STG_ACT_NO 
        order by
            STG_ACT_NO
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTwInvPltzByOperationNoTypZ) -->
    <select id="SearchTwInvPltzByOperationNoTypZ" resultMap="W6001DocDomain_SearchTwInvPltzByOperationNoTypZ"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByOperationNoTypZ */
             STG_INSTR_NO
            ,count(STG_INSTR_NO) COUNT_STG_INSTR_NO 
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        and CUSTOM_TIMING_TYP = #customTimingTyp#
        group by
            STG_INSTR_NO 
        order by
            STG_INSTR_NO
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (Shipperプルダウンリストデータの取得)                              -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzByShipperCd" resultMap="W6001DocPltzDomain_SearchTwInvPltzByShipperCd"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByShipperCd */
            SHIPPER_CD 
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        group by
            SHIPPER_CD 
        order by
            SHIPPER_CD
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (初回実行確認)                                                     -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvItemByNecessityEnforcement" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvItemByNecessityEnforcement */
            count(SHIPPER_CD) COUNT_SHIPPER_CD 
        from
            TW_INV_ITEM 
        where
            DSC_ID = #dscId#
        and SHIPPER_CD = #shipperCd#
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (CIGMA品数取得)                                                     -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzByCigmaCheck" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByCigmaCheck */
            count(MAIN_MARK) COUNT_MAIN_MARK 
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        and SHIPPER_CD = #shipperCd#
        and CML_TYP = '1'
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (インボイス作成対象品番ワークに登録するデータを取得)               -->
    <!-- UT432 MOD (UT303 correspondence fully back to the original./UT303の対応は完全に元に戻した。)-->
    <!-- ======================================================================================= -->
    <sql id="Cols_SearchTwInvPltzByGropingInfo_NotCIGMA">
          T1.SHIPPER_CD
        , T1.CML_TYP
        , T1.CUSTOMER_CD
        , T2.MAIN_MARK
        , T2.BRCH
        , T2.PLTZ_ITEM_NO
        , T2.PKG_CD
        <!--, T2.ITEM_DESCRIPTION --> <!-- UT432 DEL -->
        , T2.QTY_UNIT
        , T2.ITEM_WEIGHT
        , T2.WEIGHT_UNIT
        , T2.MODEL_CD
        , T2.ORIGIN_CNTRY_CD
        , T2.CURR_CD
        , T2.RT_FLG
        , T2.KIT_FLG
        , T2.EXP_REQUEST_NO
        , T2.LINE_NO
        , T2.KIT_BRCH
        , T2.PAR_FLG
        , T2.KIT_PAR_ITEM_NO
        , T2.UNIT_PRICE
        , T2.CUSTOMER_PO_NO
        , T2.CUSTOMER_ITEM_NO
    </sql>
    
    <sql id="Cols_SearchTwInvPltzByGropingInfo_CIGMA">
          T1.SHIPPER_CD
        , T1.CML_TYP
        , T1.CUSTOMER_CD
        , T2.MAIN_MARK
        , T2.BRCH
        , T2.PLTZ_ITEM_NO
        , T2.PKG_CD
        <!--, T2.ITEM_DESCRIPTION --> <!-- UT432 DEL -->
        , T2.QTY_UNIT
        , T2.ITEM_WEIGHT
        , T2.WEIGHT_UNIT
        , T2.MODEL_CD
        , T2.ORIGIN_CNTRY_CD
        , T2.CURR_CD
        , T2.RT_FLG
        , T2.KIT_FLG
        , T2.EXP_REQUEST_NO
        , T2.LINE_NO
        , T2.KIT_BRCH
        , T2.PAR_FLG
        , T2.KIT_PAR_ITEM_NO
        , T2.UNIT_PRICE
        , T3.CUSTOMER_PO_NO
        , T3.CUSTOMER_ITEM_NO
    </sql>
    
    <select id="SearchTwInvPltzByGropingInfo" resultMap="W6001DocPltzDomain_SearchTwInvPltzByGropingInfo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByGropingInfo */
            <include refid="Cols_SearchTwInvPltzByGropingInfo_NotCIGMA"/>
            , sum(nvl(T2.QTY, 0)) SUM_QTY
            , min(T2.ITEM_DESCRIPTION) ITEM_DESCRIPTION <!-- UT432 ADD -->
        from
            TW_INV_PLTZ T1
            , TT_PLTZ_ITEM T2 
        where
            T1.MAIN_MARK = T2.MAIN_MARK 
            and ( 
                T2.PKG_TYP is null 
                or (T2.PKG_TYP is not null and T2.RT_FLG = 'Y')
            ) 
            <isNotNull prepend="and" property="dscId">
                T1.DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                T1.SHIPPER_CD = #shipperCd#
            </isNotNull> 
            and T1.CML_TYP != '1'
        group by <include refid="Cols_SearchTwInvPltzByGropingInfo_NotCIGMA"/>
        union
        select
            <include refid="Cols_SearchTwInvPltzByGropingInfo_CIGMA"/>
            , sum(nvl(T3.ALLOC_QTY, 0)) SUM_QTY
            , min(T2.ITEM_DESCRIPTION) ITEM_DESCRIPTION <!-- UT432 ADD -->
        from
            TW_INV_PLTZ T1
            , TT_PLTZ_ITEM T2 
            , TT_PLTZ_ITEM_ODR T3
        where
            T1.MAIN_MARK = T2.MAIN_MARK 
            and T2.MAIN_MARK = T3.MAIN_MARK(+)
            and T2.BRCH = T3.BRCH(+)
            and ( 
                T2.PKG_TYP is null 
                or (T2.PKG_TYP is not null and T2.RT_FLG = 'Y')
            ) 
            <isNotNull prepend="and" property="dscId">
                T1.DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                T1.SHIPPER_CD = #shipperCd#
            </isNotNull> 
            and T1.CML_TYP = '1'
            and T2.RT_FLG != 'Y'
        group by <include refid="Cols_SearchTwInvPltzByGropingInfo_CIGMA"/>
        union
        select
            <include refid="Cols_SearchTwInvPltzByGropingInfo_CIGMA"/>
            , sum(nvl(T2.QTY, 0)) SUM_QTY
            , min(T2.ITEM_DESCRIPTION) ITEM_DESCRIPTION <!-- UT432 ADD -->
        from
            TW_INV_PLTZ T1
            , TT_PLTZ_ITEM T2 
            , TT_PLTZ_ITEM_ODR T3
        where
            T1.MAIN_MARK = T2.MAIN_MARK 
            and T2.MAIN_MARK = T3.MAIN_MARK(+)
            and T2.BRCH = T3.BRCH(+)
            and ( 
                T2.PKG_TYP is null 
                or (T2.PKG_TYP is not null and T2.RT_FLG = 'Y')
            ) 
            <isNotNull prepend="and" property="dscId">
                T1.DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                T1.SHIPPER_CD = #shipperCd#
            </isNotNull> 
            and T1.CML_TYP = '1'
            and T2.RT_FLG = 'Y'
        group by <include refid="Cols_SearchTwInvPltzByGropingInfo_CIGMA"/>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (インボイス作成対象品番ワークに登録するデータをRT材のデータ取得)               -->
    <!-- ======================================================================================= -->
    <select id="SearchTmPkgMtrl" resultMap="W6001DocPltzItemDomain_SearchTmPkgMtrl"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmPkgMtrl */
              T1.DSC_ID
            , T1.MAIN_MARK
            , T1.BRCH
            , T1.SORT_ODR
            , T2.CURR_CD
            , T2.CUSTOMS_VALUATION
            <!-- UT287 ADD START -->
            , T2.LENGTH_UNIT
            , T2.LENGTH_OUT
            , T2.WIDTH_OUT
            , T2.HEIGHT_OUT
            <!-- UT287 ADD END -->
        from
              TW_INV_ITEM T1
            , TM_PKG_MTRL T2
        where
            T1.SHIPPER_CD = T2.OWNER_COMP
        and T1.ITEM_NO = T2.PKG_ITEM_NO
        and T1.DSC_ID = #dscId#
        and T1.SHIPPER_CD = #shipperCd#
        and T1.RT_FLG='Y'
        <!-- 2014/11/25 DNJP.Kawamura UT149対応 START >>>>> -->
        <isNotEmpty property="grpNo1">
            and T1.GRP_NO_1=#grpNo1#
            and T1.GRP_NO_2=#grpNo2#
            and T1.REMOVE_FLG='N'
        </isNotEmpty>
        <!-- 2014/11/25 DNJP.Kawamura UT149対応 END <<<<< -->
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (まとまり単位でインボイス作成対象パレタイズワーク取得)             -->
    <!-- ======================================================================================= -->
    <!-- 項目 -->
    <sql id="Cols_SearchTwInvPltzByGroup">
          DSC_ID
        , SHIPPER_CD
        , CONSIGNEE_CD
        , SHIP_TO_CD
        , CUSTOMER_CD
        , LGCY_SHIP_TO
        , PRICE_TERMS
        , TRADE_TERMS
        , TERMS_POINT
        , FREIGHT_RESPONSIBLE_CD
        , PAY_TERMS
        , PAY_METH
        , CURR_CD
        , TRNS_CD
        , TRNS_CD_ORG
        , INVOICE_KEY
        , INVOICE_CTGRY
        , CONTAINER_SORTING_KEY
        , CONTAINER_LOOSE_TYP
        , CUSTOM_TIMING_TYP
        , CML_TYP
        , RE_EXP_GOODS_FLG
        , CUR_WH_COMP_CD
        , CUR_WH_CD
        , SUPPLIER_INVOICE_NO
        , IMP_INVOICE_NO_1
        , IMP_INVOICE_NO_2
        , SPLIT_SHIPPING_NG_FLG 
        , MIGRATION_FLG
    </sql>
    
    <!-- 検索SQL文 -->
    <select id="SearchTwInvPltzByGroup" resultMap="W6001DocPltzDomain_SearchTwInvPltzByGroup"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByGroup */
            distinct
            <include refid="Cols_SearchTwInvPltzByGroup" /> 
        from
            TW_INV_PLTZ 
        <dynamic prepend="where">
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isEqual prepend="and" property="firstTimeFlg" compareValue="N">
                REMOVE_FLG = 'Y'
        </isEqual> 
        </dynamic>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (品番ワークに紐づくパレタイズワークの採番を取得)                   -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzByGroupNo1" resultMap="W6001DocPltzDomain_SearchTwInvPltzByGroupNo1"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByGroupNo1 */
              A.DSC_ID
            , A.SHIPPER_CD
            , A.MAIN_MARK
            , A.GRP_NO_1
        from
              TW_INV_PLTZ A
            , TW_INV_ITEM B
        where
            A.DSC_ID = B.DSC_ID
        and A.SHIPPER_CD = B.SHIPPER_CD
        and A.MAIN_MARK = B.MAIN_MARK
        <isNotNull prepend="and" property="dscId">
            A.DSC_ID = #dscId#
        </isNotNull>
        <isNotNull prepend="and" property="shipperCd">
            A.SHIPPER_CD = #shipperCd#
        </isNotNull>
        <isEqual prepend="and" property="firstTimeFlg" compareValue="N">
            A.REMOVE_FLG = 'Y'
        </isEqual>    
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (品番ワークに紐づくパレタイズ品番ワークの採番を取得)               -->
    <!-- ======================================================================================= -->
    <!-- 検索 SQL文 -->
    <select id="SearchTwInvItemByGroupNo2" resultMap="W6001DocPltzItemDomain_SearchTwInvItemByGroupNo2"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvItemByGroupNo2 */
              distinct
              DSC_ID
            , CURR_CD
            , GRP_NO_1
        from
            TW_INV_ITEM
        <dynamic prepend="where">
            <isParameterPresent prepend="and">
                CML_TYP in ('1', '3')
            </isParameterPresent>
            <isParameterPresent prepend="and">
                RT_FLG = 'Y'
            </isParameterPresent>
            <isEqual prepend="and" property="firstTimeFlg" compareValue="N">
                REMOVE_FLG = 'Y'
            </isEqual>
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
        </dynamic>
        order by GRP_NO_1 asc
        <!-- 2014/12/10 DNJP.Kawamura NULL対応 START >>>>> -->
        , CURR_CD nulls first
        <!-- 2014/12/10 DNJP.Kawamura NULL対応 END <<<<< -->
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Grouping画面 (インボイスグループワークに登録するデータを取得)                   -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzBySearchInvoice" resultMap="W6001DocPltzDomain_SearchTwInvPltzBySearchInvoice"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzBySearchInvoice */
            distinct
            T1.SHIPPER_CD
            , T1.CONSIGNEE_CD
            , T1.SHIP_TO_CD
            , T1.SHIP_TO_COMP_CD
            , T1.CUSTOMER_CD
            , T1.LGCY_SHIP_TO
            , T1.PRICE_TERMS
            , T1.TRADE_TERMS
            , T1.TERMS_POINT
            , T1.FREIGHT_RESPONSIBLE_CD
            , T1.PAY_TERMS
            , T1.PAY_METH
            , T1.TRNS_CD
            , T1.TRNS_CD_ORG
            , T1.INVOICE_KEY
            , T1.INVOICE_CTGRY
            , T1.CONTAINER_SORTING_KEY
            , T1.CONTAINER_LOOSE_TYP
            , T1.CUSTOM_TIMING_TYP
            , T1.CML_TYP
            , T1.RE_EXP_GOODS_FLG
            , T1.SUPPLIER_INVOICE_NO
            , T1.IMP_INVOICE_NO_1
            , T1.IMP_INVOICE_NO_2
            , T1.MIGRATION_FLG
            , T2.GRP_NO_1
            , T2.GRP_NO_2
            , decode(T2.GRP_NO_2, '0', T1.CURR_CD, T2.CURR_CD) CURR_CD
        from
              TW_INV_PLTZ T1
            , TW_INV_ITEM T2
        <dynamic prepend="where">
            <isParameterPresent prepend="and">
                T1.GRP_NO_1 = T2.GRP_NO_1
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T1.MAIN_MARK = T2.MAIN_MARK
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T1.DSC_ID = T2.DSC_ID
            </isParameterPresent>
            <isNotNull prepend="and" property="dscId">
                T2.DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                T2.SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isEqual prepend="and" property="firstTimeFlg" compareValue="N">
                T2.REMOVE_FLG = 'Y'
            </isEqual>
        </dynamic>
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTwInvPltzByDetail) -->
    <select id="SearchTwInvPltzByDetail" resultMap="W6001DocDomain_SearchTwInvPltzByDetail"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByDetail */
             T1.MAIN_MARK
            ,T1.DNGR_ITEM_FLG
            ,T1.EXP_LIMIT_FLG
            ,T1.RT_USE_FLG
            ,T1.GROSS_WEIGHT
            ,T1.VOLUME
            ,T1.SPLIT_SHIPPING_NG_FLG
            <!-- ST959 UNIT CONVERSION ADD START -->
            ,T1.WEIGHT_UNIT
            ,T1.VOLUME_UNIT
            <!-- ST959 UNIT CONVERSION ADD END -->
            ,T3.UNIT_DISP  WEIGHT_UNIT_DISP
            ,T4.UNIT_DISP  VOLUME_UNIT_DISP
        from
             TW_INV_PLTZ T1
            ,TM_NXS_COMP T2
            ,TM_MEASURE_UNIT T3
            ,TM_MEASURE_UNIT T4
        where
            T1.SHIPPER_CD=T2.COMP_CD(+)
        and T2.WEIGHT_UNIT=T3.UNIT_CD(+)
        and T2.VOLUME_UNIT=T4.UNIT_CD(+)
        and T1.DSC_ID=#dscId#
        and T1.SHIPPER_CD=#shipperCd#
        and T1.GRP_NO_1=#grpNo1#
        and T1.REMOVE_FLG='N'
        order by
            T1.MAIN_MARK
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTmExpFormalitiItemNo) -->
    <select id="SearchTmExpFormalitiItemNo" resultMap="W6001DocDomain_SearchTmExpFormalitiItemNo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmExpFormalitiItemNo */
             T1.MAIN_MARK
            ,T1.BRCH
            ,T1.SORT_ODR
            ,T2.HS_CD
            ,T2.FREE_1_REG_FLG
            ,T2.FREE_1_DTL
            ,T2.FREE_1_ORIGIN_CNTRY_FLG
            ,T2.FREE_2_REG_FLG
            ,T2.FREE_2_DTL
            ,T2.FREE_2_ORIGIN_CNTRY_FLG
            ,T2.FREE_3_REG_FLG
            ,T2.FREE_3_DTL
            ,T2.FREE_3_ORIGIN_CNTRY_FLG 
            ,T2.ORIGIN_CNTRY_CD
        from
             TW_INV_ITEM T1
            ,TM_EXP_FORMALITI_ITEM_NO T2 
        where
            T1.SHIPPER_CD = T2.COMP_CD(+) 
        and T1.ITEM_NO = T2.ITEM_NO(+) 
        and ( 
            select
                max(APLY_STRT_DT) APLY_STRT_DT 
            from
                TM_EXP_FORMALITI_ITEM_NO T3 
            where
                T3.COMP_CD = T2.COMP_CD 
            and T3.ITEM_NO = T2.ITEM_NO 
            and T3.APLY_STRT_DT <![CDATA[<=]]> #aplyStrtDt#
        ) = T2.APLY_STRT_DT 
        and T1.DSC_ID = #dscId#
        and T1.SHIPPER_CD = #shipperCd#
        and T1.GRP_NO_1 = #grpNo1#
        and T1.REMOVE_FLG = 'N'
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Invoice Detail画面 (複数通貨チェック)                                                                     -->
    <!-- =================================================================================================== -->
    <sql id="Select_SearchCountTwInvItemByCurrencyCheck">
        select
            MAIN_MARK
            , CURR_CD
        from TW_INV_ITEM
        <dynamic prepend="where">
            <isNotNull prepend="and" property="mainMark">
                MAIN_MARK = #mainMark#
            </isNotNull>
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo1">
                GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo2">
                GRP_NO_2 = #grpNo2#
            </isNotNull>
            <isParameterPresent prepend="and">
                REMOVE_FLG = 'N'
            </isParameterPresent>
        </dynamic>
        group by MAIN_MARK, CURR_CD
    </sql>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTwInvItemByCurrencyCheck) -->
    <select id="SearchCountTwInvItemByCurrencyCheck" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
            select
                /* SqlMap-W6001Doc.SearchCountTwInvItemByCurrencyCheck */
                count(curr_cd) COUNT_CURR_CD
            from (<include refid="Select_SearchCountTwInvItemByCurrencyCheck" />) T1
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTwInvItemByDetailFull) -->
    <select id="SearchTwInvItemByDetailFull" resultMap="W6001DocDomain_SearchTwInvItemByDetailFull"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvItemByDetailFull */
             T1.ITEM_NO
            ,T1.ITEM_DESCRIPTION
            ,T1.MODEL_CD
            ,T1.CURR_CD
            ,T1.UNIT_PRICE
            ,SUM(T1.QTY) SUM_QTY
            ,SUM(T1.NET_WEIGHT) SUM_NET_WEIGHT
            ,T1.WEIGHT_UNIT
        from
            TW_INV_ITEM T1
           ,TM_NXS_COMP T2
        where
            T1.SHIPPER_CD = T2.COMP_CD(+)
        and T1.DSC_ID = #dscId#
        and T1.SHIPPER_CD = #shipperCd#
        and T1.GRP_NO_1 = #grpNo1#
        and T1.GRP_NO_2 = #grpNo2#
        and T1.REMOVE_FLG = 'N' 
        group by
             T1.ITEM_NO
            ,T1.ITEM_DESCRIPTION
            ,T1.MODEL_CD
            ,T1.CURR_CD
            ,T1.UNIT_PRICE
            ,T1.WEIGHT_UNIT
        order by
             T1.UNIT_PRICE ASC NULLS FIRST
            ,T1.ITEM_NO
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTwInvItemByUnitPrice) -->
    <select id="SearchCountTwInvItemByUnitPrice" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchCountTwInvItemByUnitPrice */
            count(SORT_ODR) SORT_ODR 
        from
            TW_INV_ITEM 
        where
                DSC_ID = #dscId#
            and SHIPPER_CD = #shipperCd#
            and GRP_NO_1 = #grpNo1#
            and GRP_NO_2 = #grpNo2#
            and REMOVE_FLG = 'N'
            and UNIT_PRICE is null
    </select>
    
    <!-- 2014/11/25 DNJP.Kawamura UT149,ST180対応 START >>>>> -->
    <!-- =================================================================================================== -->
    <!-- Invoice Detail(Full Returnable)画面 (複数通貨チェック)                                                                     -->
    <!-- =================================================================================================== -->
    <sql id="Select_SearchCountTwInvItemByCurrencyCheckInvoice">
        select
            CURR_CD
        from TW_INV_ITEM
        <dynamic prepend="where">
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo1">
                GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo2">
                GRP_NO_2 = #grpNo2#
            </isNotNull>
            <isParameterPresent prepend="and">
                REMOVE_FLG = 'N'
            </isParameterPresent>
        </dynamic>
        group by CURR_CD
    </sql>
    
    <!-- 検索 SQL文 (W6001Doc.SearchCountTwInvItemByCurrencyCheckInvoice) -->
    <select id="SearchCountTwInvItemByCurrencyCheckInvoice" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
            select
                /* SqlMap-W6001Doc.SearchCountTwInvItemByCurrencyCheckInvoice */
                count(curr_cd) COUNT_CURR_CD
            from (<include refid="Select_SearchCountTwInvItemByCurrencyCheckInvoice" />) T1
    </select>
    <!-- 2014/11/25 DNJP.Kawamura UT149,ST180対応 END <<<<< -->
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (FRT Shipperの取得)                                              -->
    <!-- =================================================================================================== -->
    <select id="SearchTwInvPltzByShipper" resultMap="W6001DocPltzDomain_SearchTwInvPltzByShipper"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByShipper */
            SHIPPER_CD
        from
            TW_INV_PLTZ
        where
            DSC_ID = #dscId#
        group by SHIPPER_CD
        order by SHIPPER_CD
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (FRT Consigneeの取得)                                            -->
    <!-- =================================================================================================== -->
    <select id="SearchTwInvPltzByConsignee" resultMap="W6001DocDomain_SearchTwInvPltzByConsignee"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByConsignee */
             CONSIGNEE_CD
            ,SHIP_TO_COMP_CD 
        from
            TW_INV_PLTZ 
        where
            DSC_ID = #dscId#
        and GRP_NO_1 = #grpNo1#
        group by
             CONSIGNEE_CD
            ,SHIP_TO_COMP_CD 
        order by
            CONSIGNEE_CD
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (Inv. Template No.の取得)                                        -->
    <!-- =================================================================================================== -->
    <!-- 検索SQL文(送荷先別インボイステンプレート原単位) -->
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <!-- 
    <sql id="Select_SearchTmInvTplShipTo_ForTmInvTplShipTo">
        select
            max(T3.APLY_STRT_DT) APLY_STRT_DT 
        from
            TM_INV_TPL_SHIP_TO T3
        <dynamic prepend="where">
            <isNotEmpty prepend="and" property="aplyStrtDt">
                T3.APLY_STRT_DT <![CDATA[<=]]> #aplyStrtDt#
            </isNotEmpty>
            <isParameterPresent prepend="and">
                T3.INVOICE_CLASS = 'M'
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T3.COMP_CD = T2.COMP_CD
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T3.SHIP_TO_CD = T2.SHIP_TO_CD
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T3.CML_TYP = T2.CML_TYP
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T3.INVOICE_CTGRY = T2.INVOICE_CTGRY
            </isParameterPresent>
            <isParameterPresent prepend="and">
                T3.INVOICE_CLASS = T2.INVOICE_CLASS
            </isParameterPresent>
        </dynamic>
    </sql>
    -->
    <sql id="Select_SearchTmInvTplShipTo_ForTmInvTplShipTo">
        select
            COMP_CD
           ,SHIP_TO_CD
           ,CML_TYP
           ,INVOICE_CTGRY
           ,INVOICE_CLASS
           ,max(APLY_STRT_DT) APLY_STRT_DT
        from
            TM_INV_TPL_SHIP_TO
        <dynamic prepend="where">
            <isNotEmpty prepend="and" property="aplyStrtDt">
                APLY_STRT_DT <![CDATA[<=]]> #aplyStrtDt#
            </isNotEmpty>
        </dynamic>
        group by
            COMP_CD
           ,SHIP_TO_CD
           ,CML_TYP
           ,INVOICE_CTGRY
           ,INVOICE_CLASS
    </sql>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->

    <!-- 検索SQL文 -->
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <!--
    <select id="SearchTmInvTplShipTo" resultMap="W6001DocDomain_SearchTmInvTplShipTo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmInvTplShipTo */
             T2.DOC_NO
            ,T2.FREE_1_DISP_FLG
            ,T2.FREE_2_DISP_FLG
            ,T2.FREE_3_DISP_FLG
            ,T2.HS_CD_DISP_FLG 
        from
             TW_INV T1
            ,TM_INV_TPL_SHIP_TO T2
        where
            T1.SHIPPER_CD = T2.COMP_CD(+) 
        and T1.SHIP_TO_CD = T2.SHIP_TO_CD(+) 
        and T1.CML_TYP = T2.CML_TYP(+) 
        and T1.INVOICE_CTGRY = T2.INVOICE_CTGRY(+) 
        and T2.APLY_STRT_DT = (<include refid="Select_SearchTmInvTplShipTo_ForTmInvTplShipTo"/>)
        <isNotNull prepend="and" property="dscId">
            T1.DSC_ID = #dscId#
        </isNotNull>
        group by 
             T2.DOC_NO
            ,T2.FREE_1_DISP_FLG
            ,T2.FREE_2_DISP_FLG
            ,T2.FREE_3_DISP_FLG
            ,T2.HS_CD_DISP_FLG 
        order by
            T2.DOC_NO
    </select>
    -->
    <select id="SearchTmInvTplShipTo" resultMap="W6001DocDomain_SearchTmInvTplShipTo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmInvTplShipTo */
            distinct
             T1.DOC_NO
        from
            TM_INV_TPL_SHIP_TO T1
            ,(<include refid="Select_SearchTmInvTplShipTo_ForTmInvTplShipTo"/>) T2
        where
            T1.INVOICE_CLASS = 'M'
        and T1.COMP_CD = #shipperCd#
        and T1.INVOICE_CTGRY = #invoiceCtgry#
        and T1.COMP_CD = T2.COMP_CD
        and T1.SHIP_TO_CD = T2.SHIP_TO_CD
        and T1.CML_TYP = T2.CML_TYP
        and T1.INVOICE_CTGRY = T2.INVOICE_CTGRY
        and T1.INVOICE_CLASS = T2.INVOICE_CLASS
        and T1.APLY_STRT_DT = T2.APLY_STRT_DT
        order by
            T1.DOC_NO
    </select>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->

    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <!-- 検索SQL文(送荷先別インボイステンプレート原単位) -->
    <select id="SearchTmInvTplShipToForDefault" resultMap="W6001DocDomain_SearchTmInvTplShipToForDefault"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmInvTplShipToForDefault */
            distinct
             T1.DOC_NO
            ,T1.FREE_1_DISP_FLG
            ,T1.FREE_2_DISP_FLG
            ,T1.FREE_3_DISP_FLG
            ,T1.HS_CD_DISP_FLG 
        from
             TM_INV_TPL_SHIP_TO T1
            ,(<include refid="Select_SearchTmInvTplShipTo_ForTmInvTplShipTo"/>) T2
        where
            T1.INVOICE_CLASS = 'M'
        and T1.COMP_CD = #shipperCd#
        and T1.INVOICE_CTGRY = #invoiceCtgry#
        and T1.SHIP_TO_CD = #shipToCd#
        and T1.CML_TYP = #cmlTyp#
        and T1.COMP_CD = T2.COMP_CD
        and T1.SHIP_TO_CD = T2.SHIP_TO_CD
        and T1.CML_TYP = T2.CML_TYP
        and T1.INVOICE_CTGRY = T2.INVOICE_CTGRY
        and T1.INVOICE_CLASS = T2.INVOICE_CLASS
        and T1.APLY_STRT_DT = T2.APLY_STRT_DT
    </select>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (Detail画面から遷移時の初期表示データ取得処理)                   -->
    <!-- =================================================================================================== -->
    <!-- 取得項目（インボイスグループワーク） -->
    <sql id="Cols_TwInvByRegisterInit_TwInv">
          T1.SHIPPER_CD
        , T1.CONSIGNEE_CD
        , T1.SHIP_TO_CD
        , T1.SHIP_TO_COMP_CD
        , T1.CUSTOMER_CD
        , T1.LGCY_SHIP_TO
        , T1.PRICE_TERMS
        , T1.TRADE_TERMS
        , T1.TERMS_POINT
        , T1.FREIGHT_RESPONSIBLE_CD
        , T1.PAY_TERMS
        , T1.PAY_METH
        , T1.TRNS_CD
        , T1.TRNS_CD_ORG
        , T1.INVOICE_CTGRY
        , T1.CURR_CD
        , T1.SHIPPED_DT
        , T1.SUPPLIER_INVOICE_NO
        , T1.IMP_INVOICE_NO_1
        , T1.IMP_INVOICE_NO_2
        , T1.CONTAINER_LOOSE_TYP
        , T1.CONTAINER_SORTING_KEY
        , T1.CUSTOM_TIMING_TYP
        , T1.INVOICE_KEY
        , T1.GRP_NO_1
        , T1.GRP_NO_2
    </sql>
    
    <!-- 取得項目（インボイス作成対象パレタイズワーク） -->
    <sql id="Cols_TwInvByRegisterInit_TwInvPltz">
        T2.DSC_ID
        , T2.MAIN_MARK
        , T2.SHIPPER_CD
        , T2.SHIPPER_COMP_NM_ABB
        , T2.SHIPPER_COMP_NM_1
        , T2.SHIPPER_COMP_NM_2
        , T2.SHIPPER_COMP_ADDR_1
        , T2.SHIPPER_COMP_ADDR_2
        , T2.SHIPPER_COMP_ADDR_3
        , T2.SHIPPER_COMP_ADDR_4
        , T2.SHIPPER_COMP_TEL
        , T2.SHIPPER_COMP_FAX
        , T2.SHIPPER_TAX_ID_NO
        , T2.CONSIGNEE_COMP_NM_1
        , T2.CONSIGNEE_COMP_NM_2
        , T2.CONSIGNEE_COMP_ADDR_1
        , T2.CONSIGNEE_COMP_ADDR_2
        , T2.CONSIGNEE_COMP_ADDR_3
        , T2.CONSIGNEE_COMP_ADDR_4
        , T2.CONSIGNEE_ATTN
        , T2.SHIP_TO_NM_1
        , T2.SHIP_TO_NM_2
        , T2.SHIP_TO_ADDR_1
        , T2.SHIP_TO_ADDR_2
        , T2.SHIP_TO_ADDR_3
        , T2.SHIP_TO_ADDR_4
        , T2.DLIV_POINT
        , T2.REM_BANK_NM
        , T2.REM_BANK_ADDR_1
        , T2.REM_BANK_ADDR_2
        , T2.REM_BANK_ADDR_3
        , T2.REM_BANK_ACCOUNT_NO
        , T2.VAT_RATIO
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 START >>>>> -->
        , T2.RETURN_STYLE_CD
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 END <<<<< -->
        , T2.WEIGHT_UNIT INV_PLTZ_WEIGHT_UNIT
        , T2.NET_WEIGHT INV_PLTZ_NET_WEIGHT
        , T2.GROSS_WEIGHT
        , T2.VOLUME_UNIT
        , T2.VOLUME
        , T2.CARRIER_COMP_NM_ABB
        , T2.LOADING_PORT_NM
        , T2.DISCHARGE_PORT_NM
        , T2.VESSEL
        , T2.ETD
        , T2.ETA
        , T2.ARRIVAL_TIME
        , T2.L_PORT_CNTRY_CD
        , T2.LOADING_PORT_CD
        , T2.D_PORT_CNTRY_CD
        , T2.DISCHARGE_PORT_CD
        , T2.CARRIER_COMP_CD
        , T2.FORWARDER_COMP_CD
        , T2.GRP_NO_1
    </sql>
    
    <!-- 取得項目（インボイス作成対象品番ワーク） -->
    <sql id="Cols_TwInvByRegisterInit_TwInvItem">
        , T3.KIT_FLG
        , T3.CUSTOMER_PO_NO
        , T3.CUSTOMER_ITEM_NO
        , T3.ITEM_NO
        , T3.PKG_CD
        , T3.ITEM_DESCRIPTION
        , T3.MODEL_CD
        , T3.LINE_NO
        , T3.KIT_BRCH
        , T3.PAR_FLG
        , T3.CURR_CD INV_ITEM_CURR_CD
        , T3.UNIT_PRICE
        , T3.QTY_UNIT
        , T3.QTY
        , T3.WEIGHT_UNIT INV_ITEM_WEIGHT_UNIT
        , T3.ITEM_WEIGHT
        , T3.NET_WEIGHT INV_ITEM_NET_WEIGHT
        , T3.HS_CD
        , T3.ORIGIN_CNTRY_CD
        , T3.FREE_1_REG_FLG
        , T3.FREE_1_NM
        , T3.FREE_1_DTL
        , T3.FREE_1_ORIGIN_CNTRY_FLG
        , T3.FREE_2_REG_FLG
        , T3.FREE_2_NM
        , T3.FREE_2_DTL
        , T3.FREE_2_ORIGIN_CNTRY_FLG
        , T3.FREE_3_REG_FLG
        , T3.FREE_3_NM
        , T3.FREE_3_DTL
        , T3.FREE_3_ORIGIN_CNTRY_FLG
        , T3.GRP_NO_2
    </sql>
    
    <!-- 取得項目（NEXUS会社原単位（Shipper用） -->
    <sql id="Cols_TwInvByRegisterInit_TmNxsCompForShipper">
        <isLessEqual property="cmlTyp" compareValue="2">
            , T4.PRINT_COMP_NM_1 PRINT_COMP_NM_1_SHIPPER
            , T4.PRINT_COMP_NM_2 PRINT_COMP_NM_2_SHIPPER
            , T4.PRINT_COMP_ADDR_1 PRINT_COMP_ADDR_1_SHIPPER
            , T4.PRINT_COMP_ADDR_2 PRINT_COMP_ADDR_2_SHIPPER
            , T4.PRINT_COMP_ADDR_3 PRINT_COMP_ADDR_3_SHIPPER
            , T4.PRINT_COMP_ADDR_4 PRINT_COMP_ADDR_4_SHIPPER
            , T4.COMP_TEL COMP_TEL_SHIPPER
            , T4.COMP_FAX COMP_FAX_SHIPPER
        </isLessEqual>
        <isGreaterThan property="cmlTyp" compareValue="2">
            , '' PRINT_COMP_NM_1_SHIPPER
            , '' PRINT_COMP_NM_2_SHIPPER
            , '' PRINT_COMP_ADDR_1_SHIPPER
            , '' PRINT_COMP_ADDR_2_SHIPPER
            , '' PRINT_COMP_ADDR_3_SHIPPER
            , '' PRINT_COMP_ADDR_4_SHIPPER
            , '' COMP_TEL_SHIPPER
            , '' COMP_FAX_SHIPPER
        </isGreaterThan>
    </sql>
    
    <!-- 取得項目（NEXUS会社原単位（Consignee用） -->
    <sql id="Cols_TwInvByRegisterInit_TmNxsCompForConsignee">
        <isLessEqual property="cmlTyp" compareValue="2">
            , T5.PRINT_COMP_NM_1 PRINT_COMP_NM_1_CONSIGNEE
            , T5.PRINT_COMP_NM_2 PRINT_COMP_NM_2_CONSIGNEE
            , T5.PRINT_COMP_ADDR_1 PRINT_COMP_ADDR_1_CONSIGNEE
            , T5.PRINT_COMP_ADDR_2 PRINT_COMP_ADDR_2_CONSIGNEE
            , T5.PRINT_COMP_ADDR_3 PRINT_COMP_ADDR_3_CONSIGNEE
            , T5.PRINT_COMP_ADDR_4 PRINT_COMP_ADDR_4_CONSIGNEE
        </isLessEqual>
        <isGreaterThan property="cmlTyp" compareValue="2">
            , '' PRINT_COMP_NM_1_CONSIGNEE
            , '' PRINT_COMP_NM_2_CONSIGNEE
            , '' PRINT_COMP_ADDR_1_CONSIGNEE
            , '' PRINT_COMP_ADDR_2_CONSIGNEE
            , '' PRINT_COMP_ADDR_3_CONSIGNEE
            , '' PRINT_COMP_ADDR_4_CONSIGNEE
        </isGreaterThan>
    </sql>
    
    <!-- 取得項目（NEXUS送荷先原単位） -->
    <sql id="Cols_TwInvByRegisterInit_TmNxsShipTo">
        <isLessEqual property="cmlTyp" compareValue="2">
            , T6.PRINT_SHIP_TO_NM_1
            , T6.PRINT_SHIP_TO_NM_2
            , T6.PRINT_SHIP_TO_ADDR_1
            , T6.PRINT_SHIP_TO_ADDR_2
            , T6.PRINT_SHIP_TO_ADDR_3
            , T6.PRINT_SHIP_TO_ADDR_4
            , T6.SHIP_TO_TEL
        </isLessEqual>
        <isGreaterThan property="cmlTyp" compareValue="2">
            , '' PRINT_SHIP_TO_NM_1
            , '' PRINT_SHIP_TO_NM_2
            , '' PRINT_SHIP_TO_ADDR_1
            , '' PRINT_SHIP_TO_ADDR_2
            , '' PRINT_SHIP_TO_ADDR_3
            , '' PRINT_SHIP_TO_ADDR_4
            , '' SHIP_TO_TEL
        </isGreaterThan>
    </sql>
    
    <!-- 検索（コード原単位/輸送手段） -->
    <sql id="Select_TwInvByRegisterInit_TmCdForTrns">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '12' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        and CD = T1.TRNS_CD
    </sql>
    
    <!-- 検索（コード原単位/通関書類状態区分） -->
    <sql id="Select_TwInvByRegisterInit_TmCdForDocTyp">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '63' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        and CD = 'N'
    </sql>
    
    <!-- 検索（コード原単位/Invoice分類） -->
    <sql id="Select_TwInvByRegisterInit_TmCdForInvoiceTyp">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '51' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        <isEqual property="grpNo2" compareValue="0">
            <isEqual prepend="and" property="cmlTyp" compareValue="1">
                CD = 'M'
            </isEqual>
            <isEqual prepend="and" property="cmlTyp" compareValue="2">
                CD = 'E'
            </isEqual>
            <isEqual prepend="and" property="cmlTyp" compareValue="3">
                CD = 'M'
            </isEqual>
        </isEqual>
        <isNotEqual prepend="and" property="grpNo2" compareValue="0">
            CD = 'F'
        </isNotEqual>
    </sql>
    
    <!-- 検索（コード原単位/請求分類） -->
    <sql id="Select_TwInvByRegisterInit_TmCdForInvoiceCtgry">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '13' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        <isEqual prepend="and" property="grpNo2" compareValue="0">
            CD = T1.INVOICE_CTGRY
        </isEqual>
        <isNotEqual prepend="and" property="grpNo2" compareValue="0">
            CD = 'N'
        </isNotEqual>
    </sql>
    
    <!-- 検索（コード原単位/運賃支払いステータス） -->
    <sql id="Select_TwInvByRegisterInit_Freight">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '54' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        <!-- // 2015/3/31 DNJP.Kawamura UT209対応 START >>>>> -->
        <!--
            and CD = T1.FREIGHT_RESPONSIBLE_CD
        -->
        <isNotEmpty prepend="and" property="freightResponsibleCd">
            CD = #freightResponsibleCd#
        </isNotEmpty>
        <!-- // 2015/3/31 DNJP.Kawamura UT209対応 END <<<<< -->
    </sql>
    
    <!-- 検索（コード原単位/支払方法） -->
    <sql id="Select_TwInvByRegisterInit_PayMeth">
        select
              VALUE 
        from
            TM_CD 
        where
            CD_TYP = '52' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
            and CD = T1.PAY_METH
    </sql>
    
    <!-- 検索（コード原単位/Price Terms, 建値区分） -->
    <sql id="Select_TwInvByRegisterInit_PriceTerms">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '15' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
            and CD = T1.PRICE_TERMS
    </sql>
    
    <!-- // 2015/3/31 DNJP.Kawamura UT208対応 START >>>>> -->
    <sql id="Select_TwInvByRegisterInit_TmCdForAdditionalCharge">
        select
            VALUE 
        from
            TM_CD 
        where
            CD_TYP = '55' 
        <isNotEmpty prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="additionalChargeCd">
            CD = #additionalChargeCd#
        </isNotEmpty>
    </sql>
    <!-- // 2015/3/31 DNJP.Kawamura UT208対応 END <<<<< -->
    
    <sql id="Cols_TwInvByRegisterInit_TwInvPltzInv">
        , T7.MAIN_MARK
        , T7.SHIPPER_COMP_NM_ABB
        , T7.SHIPPER_COMP_NM_1
        , T7.SHIPPER_COMP_NM_2
        , T7.SHIPPER_COMP_ADDR_1
        , T7.SHIPPER_COMP_ADDR_2
        , T7.SHIPPER_COMP_ADDR_3
        , T7.SHIPPER_COMP_ADDR_4
        , T7.SHIPPER_COMP_TEL
        , T7.SHIPPER_COMP_FAX
        , T7.SHIPPER_TAX_ID_NO
        , T7.CONSIGNEE_COMP_NM_1
        , T7.CONSIGNEE_COMP_NM_2
        , T7.CONSIGNEE_COMP_ADDR_1
        , T7.CONSIGNEE_COMP_ADDR_2
        , T7.CONSIGNEE_COMP_ADDR_3
        , T7.CONSIGNEE_COMP_ADDR_4
        , T7.CONSIGNEE_ATTN
        , T7.SHIP_TO_NM_1
        , T7.SHIP_TO_NM_2
        , T7.SHIP_TO_ADDR_1
        , T7.SHIP_TO_ADDR_2
        , T7.SHIP_TO_ADDR_3
        , T7.SHIP_TO_ADDR_4
        , T7.DLIV_POINT
        , T7.REM_BANK_NM
        , T7.REM_BANK_ADDR_1
        , T7.REM_BANK_ADDR_2
        , T7.REM_BANK_ADDR_3
        , T7.REM_BANK_ACCOUNT_NO
        , T7.VAT_RATIO
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 START >>>>> -->
        , T7.RETURN_STYLE_CD
        <!-- // 2015/3/31 DNJP.Kawamura UT206対応 END <<<<< -->
        , T7.INV_PLTZ_WEIGHT_UNIT 
        , T7.INV_PLTZ_NET_WEIGHT 
        , T7.GROSS_WEIGHT
        , T7.VOLUME_UNIT
        , T7.VOLUME
        , T7.CARRIER_COMP_NM_ABB
        , T7.LOADING_PORT_NM
        , T7.DISCHARGE_PORT_NM
        , T7.VESSEL
        , T7.ETD
        , T7.ETA
        , T7.ARRIVAL_TIME
        , T7.L_PORT_CNTRY_CD
        , T7.LOADING_PORT_CD
        , T7.D_PORT_CNTRY_CD
        , T7.DISCHARGE_PORT_CD
        , T7.CARRIER_COMP_CD
        , T7.FORWARDER_COMP_CD
        , T7.KIT_FLG
        , T7.CUSTOMER_PO_NO
        , T7.CUSTOMER_ITEM_NO
        , T7.ITEM_NO
        , T7.PKG_CD
        , T7.ITEM_DESCRIPTION
        , T7.MODEL_CD
        , T7.LINE_NO
        , T7.KIT_BRCH
        , T7.PAR_FLG
        , T7.INV_ITEM_CURR_CD 
        , T7.UNIT_PRICE
        , T7.QTY_UNIT
        , T7.QTY
        , T7.INV_ITEM_WEIGHT_UNIT 
        , T7.ITEM_WEIGHT
        , T7.INV_ITEM_NET_WEIGHT 
        , T7.HS_CD
        , T7.ORIGIN_CNTRY_CD
        , T7.FREE_1_REG_FLG
        , T7.FREE_1_NM
        , T7.FREE_1_DTL
        , T7.FREE_1_ORIGIN_CNTRY_FLG
        , T7.FREE_2_REG_FLG
        , T7.FREE_2_NM
        , T7.FREE_2_DTL
        , T7.FREE_2_ORIGIN_CNTRY_FLG
        , T7.FREE_3_REG_FLG
        , T7.FREE_3_NM
        , T7.FREE_3_DTL
        , T7.FREE_3_ORIGIN_CNTRY_FLG
    </sql>
    
    <sql id="Select_SearchTwInvByRegisterInit_TwInvPltz">
        select
            <include refid="Cols_TwInvByRegisterInit_TwInvPltz"/>
            <include refid="Cols_TwInvByRegisterInit_TwInvItem"/>
            , T10.VALUE C9
        from
            TW_INV_PLTZ T2
            , TW_INV_ITEM T3
            , ( <!-- UT420 START -->
                select
                    VALUE 
                    , MAIN_MARK
                from
                    TM_CD T8
                    , TT_PLTZ T9
                where
                    CD_TYP = '77' 
                    <isNotEmpty prepend="and" property="languageCd">
                        LNG_CD = #languageCd#
                    </isNotEmpty>
                    and CD = T9.PALLET_CARTON_TYP(+)
                ) T10<!-- UT420 END -->
        where
            T2.DSC_ID = T3.DSC_ID(+)
        and T2.MAIN_MARK = T3.MAIN_MARK(+)
        and T2.MAIN_MARK = T10.MAIN_MARK(+) <!-- UT420 ADD -->
        and T2.REMOVE_FLG = 'N'
        and T3.REMOVE_FLG = 'N'
    </sql>
    
    <!-- 検索 / SQL文 -->
    <select id="SearchTwInvByRegisterInit" resultMap="W6001DocInvoiceDomain_SearchTwInvByRegisterInit"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvByRegisterInit */
            <include refid="Cols_TwInvByRegisterInit_TwInv" />
            <include refid="Cols_TwInvByRegisterInit_TwInvPltzInv"/>
            <include refid="Cols_TwInvByRegisterInit_TmNxsCompForShipper"/>
            <include refid="Cols_TwInvByRegisterInit_TmNxsCompForConsignee"/>
            <include refid="Cols_TwInvByRegisterInit_TmNxsShipTo"/>
            
            , (<include refid="Select_TwInvByRegisterInit_TmCdForTrns"/>) C1
            , (<include refid="Select_TwInvByRegisterInit_TmCdForDocTyp"/>) C2
            , (<include refid="Select_TwInvByRegisterInit_TmCdForInvoiceTyp"/>) C3
            , (<include refid="Select_TwInvByRegisterInit_TmCdForInvoiceCtgry"/>) C4
            <!-- // 2015/3/31 DNJP.Kawamura UT209対応 START >>>>> -->
            <!-- 
            , (<include refid="Select_TwInvByRegisterInit_Freight"/>) C5
            -->
            <isNotEmpty property="freightResponsibleCd">
            , (<include refid="Select_TwInvByRegisterInit_Freight"/>) C5
            </isNotEmpty>
            <isEmpty property="freightResponsibleCd">
            , NULL C5
            </isEmpty>
            <!-- // 2015/3/31 DNJP.Kawamura UT209対応 END <<<<< -->
            , (<include refid="Select_TwInvByRegisterInit_PayMeth"/>) C6
            <!-- // 2015/3/31 DNJP.Kawamura 不具合対応（利用なし） START >>>>> -->
            <!--
            , (<include refid="Select_TwInvByRegisterInit_PriceTerms"/>) C7
            -->
            <!-- // 2015/3/31 DNJP.Kawamura 不具合対応（利用なし） END <<<<< -->
            <!-- // 2015/3/31 DNJP.Kawamura UT208対応 START >>>>> -->
            <isNotEmpty property="additionalChargeCd">
            , (<include refid="Select_TwInvByRegisterInit_TmCdForAdditionalCharge"/>) C8
            </isNotEmpty>
            <isEmpty property="additionalChargeCd">
            , NULL C8
            </isEmpty>
            <!-- // 2015/3/31 DNJP.Kawamura UT208対応 END <<<<< -->
            , T7.C9 <!-- UT420 ADD -->
        from
            TW_INV T1
        <isLessEqual property="cmlTyp" compareValue="2">
            , TM_NXS_COMP T4
            , TM_NXS_COMP T5
            , TM_NXS_SHIP_TO T6 
        </isLessEqual>
            , (<include refid="Select_SearchTwInvByRegisterInit_TwInvPltz"/>) T7
        where
            T1.DSC_ID = T7.DSC_ID(+) 
            and T1.SHIPPER_CD = T7.SHIPPER_CD(+) 
            and T1.GRP_NO_1 = T7.GRP_NO_1(+) 
            and T1.GRP_NO_2 = T7.GRP_NO_2(+) 
        <isLessEqual property="cmlTyp" compareValue="2">
            and T1.SHIPPER_CD = T4.COMP_CD(+) 
            and T1.CONSIGNEE_CD = T5.COMP_CD(+) 
            and T1.SHIP_TO_CD = T6.SHIP_TO_CD(+) 
        </isLessEqual>
        <isNotEmpty prepend="and" property="dscId">
            T1.DSC_ID = #dscId#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="shipperCd">
            T1.SHIPPER_CD = #shipperCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="grpNo1">
            T1.GRP_NO_1 = #grpNo1#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="grpNo2">
            T1.GRP_NO_2 = #grpNo2#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="invoiceNo">
            T1.INVOICE_NO = #invoiceNo#
        </isNotEmpty>
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (Main画面から遷移時の初期表示データ取得処理)                     -->
    <!-- =================================================================================================== -->
    <select id="SearchTtInvoiceByRegister" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByRegister */
              T1.SHIPPER_CD
            , T1.INVOICE_NO
            , T1.INVOICE_ISSUE_DT
            , T1.INVOICE_CLASS
            , T1.CANCEL_TYP
            , T1.CANCEL_INVOICE_NO
            , T1.PAR_INVOICE_NO
            , T1.RELATE_INVOICE_NO
            , T1.CONSIGNEE_CD
            , T1.FRT_SHIPPER_CD
            , T1.FRT_CONSIGNEE_CD
            , T1.SHIP_TO_CD
            , T1.INVOICE_CTGRY
            , T1.INVOICE_CTGRY_NM
            , T1.SHIPPED_DT
            , T1.TRNS_CD
            , T1.TRNS_NM
            , T1.ETD
            , T1.ETA
            , T1.DLIV_POINT
            , T1.BOOKING_NO
            , T1.FREIGHT_RESPONSIBLE_CD
            , T1.FREIGHT_RESPONSIBLE_NM
            , T1.PRICE_TERMS
            , T1.TRADE_TERMS
            , T1.TERMS_POINT
            , T1.PAY_TERMS
            , T1.PAY_METH
            , T1.PAY_METH_NM
            , T1.REM_LC_TYP
            , T1.REM_BANK_NM
            , T1.REM_BANK_ADDRESS_1
            , T1.REM_BANK_ADDRESS_2
            , T1.REM_BANK_ADDRESS_3
            , T1.REM_BANK_ACCOUNT_NO
            , T1.LC_NO
            , T1.LC_DT
            , T1.LC_BANK_NM_1
            , T1.LC_BANK_NM_2
            , T1.CURR_CD
            , T1.NET_AMOUNT
            , T1.FREIGHT
            , T1.INSURANCE
            , T1.SUB_TOTAL
            , T1.VAT_RATIO
            , T1.VAT
            , T1.HANDLING_CHARGE
            <!-- // 2015/3/31 DNJP.Kawamura UT208対応 START >>>>> -->
            , T1.ADDITIONAL_CHARGE_CD
            <!-- // 2015/3/31 DNJP.Kawamura UT208対応 END <<<<< -->
            , T1.ADDITIONAL_CHARGE_NM
            , T1.ADDITIONAL_CHARGE
            , T1.TOTAL_INVOICE_AMOUNT
            , T1.NO_CHARGE
            , T1.PLTZ_ITEM_QTY
            , T1.WEIGHT_UNIT
            , T1.TOTAL_NET_WEIGHT
            , T1.TOTAL_GROSS_WEIGHT
            , T1.VOLUME_UNIT
            , T1.TOTAL_VOLUME
            , T1.INV_TPL_NO
            , T1.FREE_1_DISP_FLG
            , T1.FREE_2_DISP_FLG
            , T1.FREE_3_DISP_FLG
            , T1.FREE_4_DISP_FLG
            , T1.SP_INFO
            , T1.CUSTOM_TIMING_TYP
            , T1.CML_TYP
            , T1.NOTIFY_PARTY_1_COMP_CD
            , T1.NOTIFY_PARTY_1_COMP_NM_ABB
            , T1.NOTIFY_PARTY_1_NM
            , T1.NOTIFY_PARTY_1_ADDR
            , T1.NOTIFY_PARTY_2_COMP_CD
            , T1.NOTIFY_PARTY_2_COMP_NM_ABB
            , T1.NOTIFY_PARTY_2_NM
            , T1.NOTIFY_PARTY_2_ADDR
            , T1.NOTIFY_PARTY_3_COMP_CD
            , T1.NOTIFY_PARTY_3_COMP_NM_ABB
            , T1.NOTIFY_PARTY_3_NM
            , T1.NOTIFY_PARTY_3_ADDR
            , T1.NOTIFY_PARTY_4_COMP_CD
            , T1.NOTIFY_PARTY_4_COMP_NM_ABB
            , T1.NOTIFY_PARTY_4_NM
            , T1.NOTIFY_PARTY_4_ADDR
            , T1.SUPPLIER_INVOICE_NO
            , T1.IMP_INVOICE_NO_1
            , T1.IMP_INVOICE_NO_2
            , T1.SHIPPER_COMP_NM_1
            , T1.SHIPPER_COMP_NM_2
            , T1.CONSIGNEE_COMP_NM_1
            , T1.CONSIGNEE_COMP_NM_2
            , T1.SHIP_TO_NM_1
            , T1.SHIP_TO_NM_2
            , T2.VALUE C2
            , T3.VALUE C3
            , T1.MANUAL_INVOICE_ISSUE_DT
        from
              TT_INVOICE T1
            , TM_CD T2
            , TM_CD T3
        where
                T1.CANCEL_TYP = T2.CD(+)
            and T1.INVOICE_CLASS=T3.CD(+)
            and T2.CD_TYP = '63'
            and T3.CD_TYP = '51'
            <isNotEmpty prepend="and" property="languageCd">
                T2.LNG_CD = #languageCd#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="languageCd">
                T3.LNG_CD = #languageCd#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="shipperCd">
                T1.SHIPPER_CD = #shipperCd#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="invoiceNo">
                T1.INVOICE_NO = #invoiceNo#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="invoiceIssueDt">
                T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
            </isNotEmpty>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Documentation invoice Register画面 (Inv. Template No.の取得/再取得)                     -->
    <!-- ======================================================================================= -->
    <sql id="Select_TmInvTplShipToReacquisition">
        select
            COMP_CD 
            ,SHIP_TO_CD 
            ,CML_TYP 
            ,INVOICE_CTGRY 
            ,INVOICE_CLASS 
            ,max(APLY_STRT_DT) APLY_STRT_DT 
        from
            TM_INV_TPL_SHIP_TO
        <dynamic prepend="where">
            <isNotNull prepend="and" property="frtShipperCd">
                COMP_CD = #frtShipperCd#
            </isNotNull>
            <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
            <!-- 
            <isNotNull prepend="and" property="shipToCd">
                SHIP_TO_CD = #shipToCd#
            </isNotNull>
            <isNotNull prepend="and" property="cmlTyp">
                CML_TYP = #cmlTyp#
            </isNotNull>
            -->
            <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
            <isParameterPresent prepend="and">
                INVOICE_CTGRY = 'N'
            </isParameterPresent>
            <isParameterPresent prepend="and">
                INVOICE_CLASS = 'F' 
            </isParameterPresent>
            <isNotNull prepend="and" property="aplyStrtDt">
                APLY_STRT_DT <![CDATA[<=]]> #aplyStrtDt#
            </isNotNull>
        </dynamic>
        group by
            COMP_CD 
            ,SHIP_TO_CD 
            ,CML_TYP 
            ,INVOICE_CTGRY 
            ,INVOICE_CLASS 
    </sql>
    
    <select id="SearchTmInvTplShipToReacquisition" resultMap="W6001DocDomain_SearchTmInvTplShipToReacquisition"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmInvTplShipToReacquisition */
            distinct
             T1.DOC_NO
            <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
            <!-- 
            ,T1.FREE_1_DISP_FLG
            ,T1.FREE_2_DISP_FLG
            ,T1.FREE_3_DISP_FLG
            ,T1.HS_CD_DISP_FLG
            -->
            <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
        from
            TM_INV_TPL_SHIP_TO T1
            , (<include refid="Select_TmInvTplShipToReacquisition"/>) T3
        where
            T1.COMP_CD = T3.COMP_CD
            and T1.SHIP_TO_CD = T3.SHIP_TO_CD
            and T1.CML_TYP = T3.CML_TYP
            and T1.INVOICE_CTGRY = T3.INVOICE_CTGRY
            and T1.INVOICE_CLASS = T3.INVOICE_CLASS
            and T1.APLY_STRT_DT = T3.APLY_STRT_DT
        order by
            T1.DOC_NO
    </select>
    
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 START >>>>> -->
    <select id="SearchTmInvTplShipToReacquisitionForDefault" resultMap="W6001DocDomain_SearchTmInvTplShipToForDefault"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTmInvTplShipToReacquisitionForDefault */
            distinct
             T1.DOC_NO
            ,T1.FREE_1_DISP_FLG
            ,T1.FREE_2_DISP_FLG
            ,T1.FREE_3_DISP_FLG
            ,T1.HS_CD_DISP_FLG 
        from
            TM_INV_TPL_SHIP_TO T1
            , (<include refid="Select_TmInvTplShipToReacquisition"/>) T3
        where
            T1.COMP_CD = T3.COMP_CD
            and T1.SHIP_TO_CD = T3.SHIP_TO_CD
            and T1.CML_TYP = T3.CML_TYP
            and T1.INVOICE_CTGRY = T3.INVOICE_CTGRY
            and T1.INVOICE_CLASS = T3.INVOICE_CLASS
            and T1.APLY_STRT_DT = T3.APLY_STRT_DT
            <isNotNull prepend="and" property="shipToCd">
                T1.SHIP_TO_CD = #shipToCd#
            </isNotNull>
            <isNotNull prepend="and" property="cmlTyp">
                T1.CML_TYP = #cmlTyp#
            </isNotNull>
    </select>
    <!-- 2015/1/19 DNJP.Kawamura UT011対応 END <<<<< -->
    
    <!-- ======================================================================================= -->
    <!-- Documentation invoice Register画面 (コンテナNoの抽出)                                   -->
    <!-- ======================================================================================= -->
    <select id="SearchTwInvPltzByContainerNo" resultMap="W6001DocDomain_SearchTwInvPltzByContainerNo"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvPltzByContainerNo */
            CONTAINER_NO 
        from
            TW_INV_PLTZ 
        where
            REMOVE_FLG = 'N'
        <isParameterPresent prepend="and">
            ROWNUM <![CDATA[<=]]> 3
        </isParameterPresent>
        <isNotEmpty prepend="and" property="dscId">
            DSC_ID = #dscId#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="shipperCd">
            SHIPPER_CD = #shipperCd#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="grpNo1">
            GRP_NO_1 = #grpNo1#
        </isNotEmpty>
        group by
            CONTAINER_NO 
        order by
            CONTAINER_NO desc
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Documentation invoice Register画面 (FREE項目名取得)                                                 -->
    <!-- =================================================================================================== -->
    <sql id="Select_SearchTwInvByFree_Free1">
        select 
            COMP_CD, FREE_COL_NM 
        from 
            TM_INV_FREE_ITEM 
        where FREE_COL_NO = '1'
    </sql>
    
    <sql id="Select_SearchTwInvByFree_Free2">
        select 
            COMP_CD, FREE_COL_NM 
        from 
            TM_INV_FREE_ITEM 
        where FREE_COL_NO = '2'
    </sql>
    
    <sql id="Select_SearchTwInvByFree_Free3">
        select 
            COMP_CD, FREE_COL_NM 
        from 
            TM_INV_FREE_ITEM 
        where FREE_COL_NO = '3'
    </sql>
    <!-- 検索 / SQL文 -->
    <select id="SearchTwInvByFree" resultMap="W6001DocDomain_SearchTwInvByFree"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvByFree */
              distinct
              A.SHIPPER_CD
            , B1.FREE_COL_NM  FREE_COL_NM1
            , B2.FREE_COL_NM  FREE_COL_NM2
            , B3.FREE_COL_NM  FREE_COL_NM3
        from 
              TW_INV A
            , (<include refid="Select_SearchTwInvByFree_Free1"/>) B1
            , (<include refid="Select_SearchTwInvByFree_Free2"/>) B2
            , (<include refid="Select_SearchTwInvByFree_Free3"/>) B3
        where
            A.SHIPPER_CD = B1.COMP_CD(+)
            and A.SHIPPER_CD = B2.COMP_CD(+)
            and A.SHIPPER_CD = B3.COMP_CD(+)
            <isNotEmpty prepend="and" property="compCd">
                A.SHIPPER_CD = #compCd#
        </isNotEmpty>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (仮登録後の表示データ)                               -->
    <!-- ======================================================================================= -->
    <!-- Cols / TW_INVOICE -->
    <sql id="Cols_SearchTwInvoiceByRegister_TwInvoice">
         T1.SHIPPER_CD
        ,T1.TEMP_INVOICE_NO
        ,T1.INVOICE_CLASS
        ,T1.PAR_TEMP_INVOICE_NO
        ,T1.RELATE_TEMP_INVOICE_NO
        ,T1.CONSIGNEE_CD
        ,T1.FRT_SHIPPER_CD
        ,T1.FRT_CONSIGNEE_CD
        ,T1.SHIP_TO_CD
        ,T1.INVOICE_CTGRY
        ,T1.INVOICE_CTGRY_NM
        ,T1.SHIPPED_DT
        ,T1.TRNS_CD
        ,T1.TRNS_NM
        ,T1.ETD
        ,T1.ETA
        ,T1.DLIV_POINT
        ,T1.BOOKING_NO
        ,T1.FREIGHT_RESPONSIBLE_CD
        ,T1.FREIGHT_RESPONSIBLE_NM
        ,T1.PRICE_TERMS
        ,T1.TRADE_TERMS
        ,T1.TERMS_POINT
        ,T1.PAY_TERMS
        ,T1.PAY_METH
        ,T1.PAY_METH_NM
        ,T1.REM_LC_TYP
        ,T1.REM_BANK_NM
        ,T1.REM_BANK_ADDRESS_1
        ,T1.REM_BANK_ADDRESS_2
        ,T1.REM_BANK_ADDRESS_3
        ,T1.REM_BANK_ACCOUNT_NO
        ,T1.LC_NO
        ,T1.LC_DT
        ,T1.LC_BANK_NM_1
        ,T1.LC_BANK_NM_2
        ,T1.CURR_CD
        ,T1.NET_AMOUNT
        ,T1.FREIGHT
        ,T1.INSURANCE
        ,T1.SUB_TOTAL
        ,T1.VAT_RATIO
        ,T1.VAT
        ,T1.HANDLING_CHARGE
        ,T1.ADDITIONAL_CHARGE_NM
        ,T1.ADDITIONAL_CHARGE
        ,T1.TOTAL_INVOICE_AMOUNT
        ,T1.NO_CHARGE
        ,T1.PLTZ_ITEM_QTY
        ,T1.WEIGHT_UNIT
        ,T1.TOTAL_NET_WEIGHT
        ,T1.TOTAL_GROSS_WEIGHT
        ,T1.VOLUME_UNIT
        ,T1.TOTAL_VOLUME
        ,T1.INV_TPL_NO
        ,T1.FREE_1_DISP_FLG
        ,T1.FREE_2_DISP_FLG
        ,T1.FREE_3_DISP_FLG
        ,T1.FREE_4_DISP_FLG
        ,T1.SP_INFO
        ,T1.CML_TYP
        ,T1.NOTIFY_PARTY_1_COMP_CD
        ,T1.NOTIFY_PARTY_1_COMP_NM_ABB
        ,T1.NOTIFY_PARTY_1_NM
        ,T1.NOTIFY_PARTY_1_ADDR
        ,T1.NOTIFY_PARTY_2_COMP_CD
        ,T1.NOTIFY_PARTY_2_COMP_NM_ABB
        ,T1.NOTIFY_PARTY_2_NM
        ,T1.NOTIFY_PARTY_2_ADDR
        ,T1.NOTIFY_PARTY_3_COMP_CD
        ,T1.NOTIFY_PARTY_3_COMP_NM_ABB
        ,T1.NOTIFY_PARTY_3_NM
        ,T1.NOTIFY_PARTY_3_ADDR
        ,T1.NOTIFY_PARTY_4_COMP_CD
        ,T1.NOTIFY_PARTY_4_COMP_NM_ABB
        ,T1.NOTIFY_PARTY_4_NM
        ,T1.NOTIFY_PARTY_4_ADDR
        ,T1.SUPPLIER_INVOICE_NO
        ,T1.IMP_INVOICE_NO_1
        ,T1.IMP_INVOICE_NO_2
        ,T1.SHIPPER_COMP_NM_1
        ,T1.SHIPPER_COMP_NM_2
        ,T1.CONSIGNEE_COMP_NM_1
        ,T1.CONSIGNEE_COMP_NM_2
        ,T1.SHIP_TO_NM_1
        ,T1.SHIP_TO_NM_2
        ,T1.INVOICE_ISSUE_DT
        ,T1.MANUAL_INVOICE_ISSUE_DT
    </sql>
    
    <!-- 通関書類状態区分 -->
    <sql id="Select_SearchTwInvoiceByRegister_cancelTyp">
        select
              CD
            , VALUE
        from
            TM_CD
        where
            CD_TYP = '63'
        <isNotNull prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotNull>
    </sql>
    
    <!-- Invoice分類 -->
    <sql id="Select_SearchTwInvoiceByRegister_invoiceClass">
        select
              CD
            , VALUE
        from
            TM_CD
        where
            CD_TYP = '51'
        <isNotNull prepend="and" property="languageCd">
            LNG_CD = #languageCd#
        </isNotNull>
    </sql>
    <select id="SearchTwInvoiceByRegister" resultMap="W6001DocInvoiceDomain_SearchTwInvoiceByRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvoiceByRegister */
            <include refid="Cols_SearchTwInvoiceByRegister_TwInvoice"/>
            , T2.VALUE C2
            , T3.VALUE C3
        from
              TW_INVOICE T1
            , (<include refid="Select_SearchTwInvoiceByRegister_cancelTyp"/>) T2
            , (<include refid="Select_SearchTwInvoiceByRegister_invoiceClass"/>) T3
        where
            T1.CANCEL_TYP = T2.CD(+)
        and T1.INVOICE_CLASS = T3.CD(+)
        <isNotNull prepend="and" property="dscId">
            T1.DSC_ID = #dscId#
        </isNotNull>
        <isNotNull prepend="and" property="shipperCd">
            T1.SHIPPER_CD = #shipperCd#
        </isNotNull>
        <isNotNull prepend="and" property="tempInvoiceNo">
            T1.TEMP_INVOICE_NO = #tempInvoiceNo#
        </isNotNull>
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltzByRegister) -->
    <select id="SearchTtPltzByRegister" resultMap="W6001DocPltzDomain_SearchTtPltzByRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtPltzByRegister */
             T1.CUR_LGCY_WH_CD
            ,T1.SHIPPER_CD
            ,T2.PLTZ_ITEM_NO
            ,T2.PKG_CD
            ,sum(T2.QTY) SUM_QTY 
        from
             TT_PLTZ T1
            ,TT_PLTZ_ITEM T2 
        where
            T1.MAIN_MARK = T2.MAIN_MARK 
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        and T2.PKG_TYP is NULL
        group by
             T1.CUR_LGCY_WH_CD
            ,T1.SHIPPER_CD
            ,T2.PLTZ_ITEM_NO
            ,T2.PKG_CD 
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltzItemOdr) -->
    <select id="SearchTtPltzItemOdr" resultMap="W6001DocPltzItemOdrDomain_SearchTtPltzItemOdr"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtPltzItemOdr */
             T3.ITEM_NO
            ,T3.PKG_CD
            ,T3.RCV_ODR_COMP_CD
            ,T3.CUSTOMER_CD
            ,T3.LGCY_SHIP_TO
            ,T3.TRNS_CD
            ,T3.ETD_DUE_DT
            ,T3.CUSTOMER_PO_NO
            ,T3.CUSTOMER_ITEM_NO
            ,T3.CUSTOMER_ITEM_NO_ORG
            ,T3.ODR_CTRL_NO
            ,sum(T3.ALLOC_QTY) SUM_ALLOC_QTY 
        from
             TT_PLTZ T1
            ,TT_PLTZ_ITEM T2
            ,TT_PLTZ_ITEM_ODR T3 
        where
            T1.MAIN_MARK = T2.MAIN_MARK 
        and T2.MAIN_MARK = T3.MAIN_MARK 
        and T2.BRCH = T3.BRCH 
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        group by
             T3.ITEM_NO
            ,T3.PKG_CD
            ,T3.RCV_ODR_COMP_CD
            ,T3.CUSTOMER_CD
            ,T3.LGCY_SHIP_TO
            ,T3.TRNS_CD
            ,T3.ETD_DUE_DT
            ,T3.CUSTOMER_PO_NO
            ,T3.CUSTOMER_ITEM_NO
            ,T3.CUSTOMER_ITEM_NO_ORG
            ,T3.ODR_CTRL_NO
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltzByRegisterCancel) -->
    <!--
    == Deleted because of no use.
    == 使用なしのため削除。
    ==<select id="SearchTtPltzByRegisterCancel" resultMap="W6001DocDomain_SearchTtPltzByRegisterCancel"
    ==    parameterClass="W6001DocCriteriaDomain">
    ==    select
    ==        /* SqlMap-W6001Doc.SearchTtPltzByRegisterCancel */
    ==         T1.CUR_LGCY_WH_CD
    ==        ,T1.SHIPPER_CD
    ==        ,T2.PLTZ_ITEM_NO
    ==        ,T2.PKG_CD
    ==        ,sum(T2.QTY) SUM_QTY 
    ==    from
    ==         TT_PLTZ T1
    ==        ,TT_PLTZ_ITEM T2 
    ==    where
    ==        T1.MAIN_MARK = T2.MAIN_MARK 
    ==    and T1.SHIPPER_CD = #shipperCd#
    ==    and T1.INVOICE_NO = #invoiceNo#
    ==    and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
    ==    and T2.PKG_TYP is NULL
    ==    group by
    ==         T1.CUR_LGCY_WH_CD
    ==        ,T1.SHIPPER_CD
    ==        ,T2.PLTZ_ITEM_NO
    ==        ,T2.PKG_CD
    ==</select>
    -->
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtPltzItemOdrByRegisterCancel) -->
    <!--
    == Deleted because of no use.
    == 使用なしのため削除。
    ==<select id="SearchTtPltzItemOdrByRegisterCancel" resultMap="W6001DocDomain_SearchTtPltzItemOdrByRegisterCancel"
    ==    parameterClass="W6001DocCriteriaDomain">
    ==    select
    ==        /* SqlMap-W6001Doc.SearchTtPltzItemOdrByRegisterCancel */
    ==         T3.ITEM_NO
    ==        ,T3.PKG_CD
    ==        ,T3.RCV_ODR_COMP_CD
    ==        ,T3.CUSTOMER_CD
    ==        ,T3.LGCY_SHIP_TO
    ==        ,T3.TRNS_CD
    ==        ,T3.ETD_DUE_DT
    ==        ,T3.CUSTOMER_PO_NO
    ==        ,T3.CUSTOMER_ITEM_NO
    ==        ,T3.CUSTOMER_ITEM_NO_ORG
    ==        ,T3.ODR_CTRL_NO
    ==        ,sum(T3.ALLOC_QTY) SUM_ALLOC_QTY 
    ==    from
    ==         TT_PLTZ T1
    ==        ,TT_PLTZ_ITEM T2
    ==        ,TT_PLTZ_ITEM_ODR T3 
    ==    where
    ==        T1.MAIN_MARK = T2.MAIN_MARK 
    ==    and T2.MAIN_MARK = T3.MAIN_MARK 
    ==    and T2.BRCH = T3.BRCH 
    ==    and T1.SHIPPER_CD = #shipperCd#
    ==    and T1.INVOICE_NO = #invoiceNo#
    ==    and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
    ==    group by
    ==         T3.ITEM_NO
    ==        ,T3.PKG_CD
    ==        ,T3.RCV_ODR_COMP_CD
    ==        ,T3.CUSTOMER_CD
    ==        ,T3.LGCY_SHIP_TO
    ==        ,T3.TRNS_CD
    ==        ,T3.ETD_DUE_DT
    ==        ,T3.CUSTOMER_PO_NO
    ==        ,T3.CUSTOMER_ITEM_NO
    ==        ,T3.CUSTOMER_ITEM_NO_ORG
    ==        ,T3.ODR_CTRL_NO
    ==</select>
    -->
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (Ws6002呼出パラメータ情報取得)                       -->
    <!-- ======================================================================================= -->
    <select id="SearchTtInvoiceByHeaderCancel" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceByHeaderCancel"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByHeaderCancel */
             T1.INVOICE_NO
            ,T1.CANCEL_INVOICE_NO
            <!-- 2014/12/18 DNJP.Kawamura UT027対応 START >>>>> -->
            ,T1.INVOICE_ISSUE_DT
            <!-- 2014/12/18 DNJP.Kawamura UT027対応 END <<<<< -->
            ,T2.LIB_PGM
            ,T2.JOB_HOST
            ,T2.JOB_USER
            ,T2.JOB_PASSWORD
            ,T2.JOB_DESCRIPTION
        from
             TT_INVOICE T1
            ,TM_CIGMA_ENV T2
        where
            T1.SHIPPER_CD=T2.COMP_CD(+)
        and T1.SHIPPER_CD=#shipperCd#
        and T1.INVOICE_NO=#invoiceNo#
        and T1.INVOICE_ISSUE_DT=#invoiceIssueDt#
        and T1.CML_TYP='1'
        and T1.INVOICE_CLASS='M'
    </select>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceByHeaderRegister) -->
    <select id="SearchTtInvoiceByHeaderRegister" resultMap="W6001DocDomain_SearchTtInvoiceByHeaderRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceByHeaderRegister */
             T1.INVOICE_NO
            ,T1.INVOICE_ISSUE_DT
            ,T1.CUSTOMER_CD
            ,T1.LGCY_SHIP_TO
            ,T1.ARRIVAL_TIME
            ,T1.APPROVAL_POSITION
            ,T1.APPROVAL_NM
            ,T1.RELATE_INVOICE_NO
            ,T1.MANUAL_INVOICE_ISSUE_DT
            ,T2.SHIPPER_COMP_NM_1
            ,T2.SHIPPER_COMP_ADDR_1
            ,T2.SHIPPER_COMP_ADDR_2
            ,T2.SHIPPER_COMP_ADDR_3
            ,T2.SHIPPER_COMP_TEL
            ,T2.SHIPPER_COMP_FAX
            ,T2.SHIPPER_TAX_ID_NO
            ,T2.SHIP_TO_NM_1
            ,T2.SHIP_TO_ADDR_1
            ,T2.SHIP_TO_ADDR_2
            ,T2.SHIP_TO_ADDR_3
            ,T2.SHIPPED_DT
            ,T2.TRNS_NM <!-- UT369 ADD -->
            ,T2.ETA
            ,T2.DLIV_POINT
            ,T2.CARRIER_COMP_NM_ABB
            ,T2.TOTAL_NET_WEIGHT
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 START >>>>> -->
            <!-- ,T2.TOTAL_NET_WEIGHT_UNIT -->
            ,T6.LGCY_UNIT_DISP TOTAL_NET_WEIGHT_UNIT
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 END <<<<< -->
            ,T2.TOTAL_GROSS_WEIGHT
            ,T2.TOTAL_VOLUME
            ,T2.TOTAL_VOLUME_UNIT
            ,T2.FREIGHT_RESPONSIBLE_CD
            ,T2.PRICE_TERMS
            ,T2.TRADE_TERMS
            ,T2.PAY_TERMS
            ,T2.REM_LC_TYP
            ,T2.REM_BANK_NM
            ,T2.REM_BANK_ADDRESS_1
            ,T2.REM_BANK_ADDRESS_2
            ,T2.REM_BANK_ADDRESS_3
            ,T2.REM_BANK_ACCOUNT_NO
            ,T2.LC_BANK_NM_1
            ,T2.SP_INFO
            ,T2.FREIGHT
            ,T2.INSURANCE
            ,T2.VAT_RATIO
            ,T2.VAT
            ,T2.TOTAL_INVOICE_AMOUNT
            ,T2.TOTAL_INVOICE_AMOUNT_CURR_CD
            ,T3.CNTRY_CD CNTRY_CD_SHIP_TO
            ,T4.CNTRY_CD CNTRY_CD_SHIPPER
            ,T5.PRINT_COMP_ADDR_1
            ,T5.PRINT_COMP_ADDR_2
            ,T5.PRINT_COMP_ADDR_3
            ,T5.CNTRY_CD CNTRY_CD_CARRIER
            ,T6.LGCY_UNIT_CD
            ,T7.LIB_PGM
            ,T7.JOB_HOST
            ,T7.JOB_USER
            ,T7.JOB_PASSWORD
            ,T7.JOB_DESCRIPTION
        from
             TT_INVOICE T1
            ,TT_INVOICE_HEADER T2
            ,TM_NXS_COMP T3
            ,TM_NXS_COMP T4
            ,TM_NXS_COMP T5
            ,TM_MEASURE_UNIT T6
            ,TM_CIGMA_ENV T7
        where
            T1.SHIPPER_CD=T2.SHIPPER_CD(+)
        and T1.INVOICE_NO=T2.INVOICE_NO(+)
        and T1.INVOICE_ISSUE_DT=T2.INVOICE_ISSUE_DT(+)
        and T1.SHIP_TO_COMP_CD=T3.COMP_CD(+)
        and T2.SHIPPER_CD=T4.COMP_CD(+)
        and T2.CARRIER_COMP_CD=T5.COMP_CD(+)
        and T4.WEIGHT_UNIT=T6.UNIT_CD(+)
        and T1.SHIPPER_CD=T7.COMP_CD(+)
        and T1.SHIPPER_CD=#shipperCd#
        and T1.INVOICE_NO=#invoiceNo#
        and T1.INVOICE_ISSUE_DT=#invoiceIssueDt#
        and T1.CML_TYP='1'
        and T1.INVOICE_CLASS='M'
    </select>
    
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (Ws6001呼出パラメータ情報取得/明細情報)              -->
    <!-- ======================================================================================= -->
    <!-- 項目 -->
    <sql id="Cols_SearchTtInvoiceAttached">
        T3.CUR_LGCY_WH_CD
        , T5.ETD_DUE_DT
        , T6.SALES_COMP_PO_NO
        , T2.CUSTOMER_PO_NO
        , T2.CUSTOMER_ITEM_NO
        , T2.ITEM_NO
        , T2.UNIT_PRICE
        , T2.UNIT_PRICE_CURR_CD
        , T2.QTY_UNIT
        , T2.LGCY_UNIT_CD
        , T4.SHIPPING_LOT <!-- UT413-3 ADD -->
        , T2.ITEM_DESCRIPTION <!-- UT432 ADD -->
    </sql>
    
    <!-- Search Invoice Attached -->
    <sql id="Select_SearchTtInvoiceAttached">
        select
            distinct
            A.CUSTOMER_PO_NO
            , A.CUSTOMER_ITEM_NO
            , A.ITEM_NO
            , A.UNIT_PRICE
            , A.PKG_CD
            , A.UNIT_PRICE_CURR_CD
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 START >>>>> -->
            <!-- , A.QTY_UNIT -->
            , B.LGCY_UNIT_DISP QTY_UNIT
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 END <<<<< -->
            , B.LGCY_UNIT_CD 
            , A.ITEM_DESCRIPTION <!-- UT432 ADD -->
        from
            TT_INVOICE_ATTACHED A
            , TM_MEASURE_UNIT B 
        where
            A.SHIPPER_CD = #shipperCd#
            and A.INVOICE_NO = #invoiceNo#
            and A.INVOICE_ISSUE_DT = #invoiceIssueDt#
            and A.QTY_UNIT = B.UNIT_CD(+)
    </sql>

    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceAttached) -->
    <select id="SearchTtInvoiceAttached" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceAttached"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceAttached */
            <include refid="Cols_SearchTtInvoiceAttached" />
            , sum(T5.ALLOC_QTY) ALLOC_QTY 
        from
              TT_INVOICE T1
            , (<include refid="Select_SearchTtInvoiceAttached" />) T2
            , TT_PLTZ T3
            , TT_PLTZ_ITEM T4
            , TT_PLTZ_ITEM_ODR T5
            , TT_EXP_RCV_ODR T6
        where
            T1.SHIPPER_CD = T3.SHIPPER_CD 
        and T1.INVOICE_NO = T3.INVOICE_NO 
        and T1.INVOICE_ISSUE_DT = T3.INVOICE_ISSUE_DT 
        and T3.MAIN_MARK = T4.MAIN_MARK 
        and T4.MAIN_MARK = T5.MAIN_MARK 
        and T4.BRCH = T5.BRCH 
        and T5.ITEM_NO = T2.ITEM_NO(+) 
        and T5.PKG_CD = T2.PKG_CD(+) 
        and T5.CUSTOMER_PO_NO = T2.CUSTOMER_PO_NO(+) 
        and T5.CUSTOMER_ITEM_NO = T2.CUSTOMER_ITEM_NO(+)
        and T5.RCV_ODR_COMP_CD = T6.RCV_ODR_COMP_CD(+) 
        and T5.CUSTOMER_CD = T6.CUSTOMER_CD(+) 
        and T5.LGCY_SHIP_TO = T6.LGCY_SHIP_TO(+) 
        and T5.ITEM_NO = T6.ITEM_NO(+) 
        and T5.PKG_CD = T6.PKG_CD(+) 
        and T5.TRNS_CD = T6.TRNS_CD(+) 
        and T5.ETD_DUE_DT = T6.ETD_DUE_DT(+) 
        and T5.CUSTOMER_PO_NO = T6.CUSTOMER_PO_NO(+) 
        and T5.CUSTOMER_ITEM_NO = T6.CUSTOMER_ITEM_NO(+) 
        and T5.CUSTOMER_ITEM_NO_ORG = T6.CUSTOMER_ITEM_NO_ORG(+) 
        and T5.ODR_CTRL_NO = T6.ODR_CTRL_NO(+) 
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        and T1.CML_TYP = '1' 
        and T1.INVOICE_CLASS = 'M'
        group by <include refid="Cols_SearchTtInvoiceAttached"/>
    </select>
    
    <!-- =================================================================================================== -->
    <!-- Documentation Invoice Register画面 (仮インボイスNoの件数取得)                                       -->
    <!-- =================================================================================================== -->
    <select id="SearchCountTwInvByTempInvoiceNo" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        <!-- // 2015/10/08 DNJP.Kawamura ST977対応（正規インボイスNo登録判定条件が間違っているため修正） START >>>>>
        select
            /* SqlMap-W6001Doc.SearchCountTwInvByTempInvoiceNo */
            count(*)
        from
            TW_INV
        <dynamic prepend="where">
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo1">
                GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isParameterPresent prepend="and">
                TEMP_INVOICE_NO IS NOT NULL
            </isParameterPresent>
        </dynamic>
        -->
        select
            /* SqlMap-W6001Doc.SearchCountTwInvByTempInvoiceNo */
            count(*)
        from
            TW_INV_ITEM
        where
            DSC_ID = #dscId#
        and SHIPPER_CD = #shipperCd#
        and GRP_NO_1 = #grpNo1#
        and TEMP_INVOICE_NO IS NULL
        and MAIN_MARK not in
           (select
                distinct MAIN_MARK
            from
                TW_INV_ITEM
            where
                DSC_ID = #dscId#
                and SHIPPER_CD = #shipperCd#
                and GRP_NO_1 = #grpNo1#
                and GRP_NO_2 = '0'
                and REMOVE_FLG = 'Y'
            )
    </select>
    <!-- // 2015/10/08 DNJP.Kawamura ST977対応（正規インボイスNo登録判定条件が間違っているため修正） END <<<<< -->
    
    <!-- ======================================================================================= -->
    <!-- Invoice Detail画面 (通貨・単価情報をクリア)                                                    -->
    <!-- ======================================================================================= -->
    <update id="UpdateClearPriceByTwInvItem" parameterClass="W6001DocCriteriaDomain">
            update TW_INV_ITEM 
            /* SqlMap-W6001Doc.UpdateClearPriceByTwInvItem */
            set
                CURR_CD = null
                , UNIT_PRICE = null
            <isNotNull prepend="," property="comUpdateFuncId">
                COM_UPDATE_FUNC_ID = #comUpdateFuncId#
            </isNotNull>
            <isNotNull prepend="," property="comUpdateUserId">
                COM_UPDATE_USER_ID = #comUpdateUserId#
            </isNotNull>
            <isParameterPresent prepend=",">
                COM_UPDATE_TIMESTAMP = SYSDATE
            </isParameterPresent>
            where
                DSC_ID = #dscId#
                and SHIPPER_CD = #shipperCd#
                and GRP_NO_1 = #grpNo1#
                and GRP_NO_2 = #grpNo2#
                and REMOVE_FLG = 'N'
    </update>
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (パレタイズテーブルのロック)                         -->
    <!-- ======================================================================================= -->
    <select id="LockByNoWaitTtPltzByPltzStatus"  parameterClass="W6001DocCriteriaDomain"
        resultMap="W6001DocPltzDomain_LockByNoWaitTtPltzByPltzStatus">
        select 
            /* SqlMap-W6001Doc.LockByNoWaitTtPltzByPltzStatus */
              PLTZ_STATUS
            , MAIN_MARK
        from TT_PLTZ
        <dynamic prepend="where">
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotNull>
            <isNotNull prepend="and" property="invoiceIssueDt">
                INVOICE_ISSUE_DT = #invoiceIssueDt#
            </isNotNull>
        </dynamic>
        for update nowait
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (パレタイズテーブルの更新)                           -->
    <!-- ======================================================================================= -->
    <update id="UpdateTtPltzByPltzStatus" parameterClass="W6001DocCriteriaDomain">
        update TT_PLTZ
            /* SqlMap-W6001Doc.UpdateTtPltzByPltzStatus */
        <dynamic prepend="set">
            <isNotNull prepend="," property="pltzStatus">
                PLTZ_STATUS = #pltzStatus#
            </isNotNull>
            <isParameterPresent prepend=",">
                INVOICE_NO = ''
            </isParameterPresent>
            <isParameterPresent prepend=",">
                INVOICE_ISSUE_DT = NULL
            </isParameterPresent>
            <isNotNull prepend="," property="comUpdateFuncId">
                COM_UPDATE_FUNC_ID = #comUpdateFuncId#
            </isNotNull>
            <isNotNull prepend="," property="comUpdateUserId">
                COM_UPDATE_USER_ID = #comUpdateUserId#
            </isNotNull>
            <isParameterPresent prepend=",">
                COM_UPDATE_TIMESTAMP = SYSDATE
            </isParameterPresent>
        </dynamic>
        <dynamic prepend="where">
            <isNotEmpty prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotEmpty>
            <isNotEmpty prepend="and" property="invoiceIssueDt">
                INVOICE_ISSUE_DT = #invoiceIssueDt#
            </isNotEmpty>
        </dynamic>
    </update>

    <!-- ======================================================================================= -->
    <!-- Documentation Manual Invoice Upload画面 (インボイステーブルの更新)                      -->
    <!-- ======================================================================================= -->
    <update id="UpdateTtInvoiceByKey" parameterClass="W6001DocCriteriaDomain">
        <dynamic prepend="update TT_INVOICE set ">
        /* SqlMap-W6001Doc.UpdateTtInvoiceByKey */
            <isNotNull prepend="," property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="," property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotNull>
            <isNotEmpty prepend="," property="invoiceIssueDt">
                INVOICE_ISSUE_DT = #invoiceIssueDt#
            </isNotEmpty>
            <isNotNull prepend="," property="manualFlg">
                MANUAL_FLG = #manualFlg#
            </isNotNull>
            <!-- ST946 MANUAL SCREEN TRANSITION ADD START -->
            <isNotNull prepend="," property="typeOfInv">
                MANUAL_TYP = #typeOfInv#
            </isNotNull>
            <!-- ST946 MANUAL SCREEN TRANSITION ADD END -->
            <isNotNull prepend="," property="cancelFlg">
                CANCEL_FLG = #cancelFlg#
            </isNotNull>
            <isNotNull prepend="," property="cancelInvoiceNo">
                CANCEL_INVOICE_NO = #cancelInvoiceNo#
            </isNotNull>
            <isNotNull prepend="," property="parInvoiceNo">
                PAR_INVOICE_NO = #parInvoiceNo#
            </isNotNull>
            <isNotNull prepend="," property="invoiceCtgry">
                INVOICE_CTGRY = #invoiceCtgry#
            </isNotNull>
            <isNotNull prepend="," property="invoiceCtgryNm">
                INVOICE_CTGRY_NM = #invoiceCtgryNm#
            </isNotNull>
            <isNotNull prepend="," property="freightResponsibleCd">
                FREIGHT_RESPONSIBLE_CD = #freightResponsibleCd#
            </isNotNull>
            <isNotNull prepend="," property="freightResponsibleNm">
                FREIGHT_RESPONSIBLE_NM = #freightResponsibleNm#
            </isNotNull>
            <isNotNull prepend="," property="priceTerms">
                PRICE_TERMS = #priceTerms#
            </isNotNull>
            <isNotNull prepend="," property="tradeTerms">
                TRADE_TERMS = #tradeTerms#
            </isNotNull>
            <isNotNull prepend="," property="termsPoint">
                TERMS_POINT = #termsPoint#
            </isNotNull>
            <isNotNull prepend="," property="payTerms">
                PAY_TERMS = #payTerms#
            </isNotNull>
            <isNotNull prepend="," property="payMeth">
                PAY_METH = #payMeth#
            </isNotNull>
            <isNotNull prepend="," property="payMethNm">
                PAY_METH_NM = #payMethNm#
            </isNotNull>
            <isNotNull prepend="," property="remLcTyp">
                REM_LC_TYP = #remLcTyp#
                
                <isEqual property="remLcTyp" compareValue="R">
                    <isNotNull prepend="," property="remBankNm">
                        REM_BANK_NM = #remBankNm#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress1">
                        REM_BANK_ADDRESS_1 = #remBankAddress1#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress2">
                        REM_BANK_ADDRESS_2 = #remBankAddress2#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress3">
                        REM_BANK_ADDRESS_3 = #remBankAddress3#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAccountNo">
                        REM_BANK_ACCOUNT_NO = #remBankAccountNo#
                    </isNotNull>
                    ,LC_NO = NULL
                    ,LC_DT = NULL
                    ,LC_BANK_NM_1 = NULL
                    ,LC_BANK_NM_2 = NULL
                </isEqual>
                <isEqual property="remLcTyp" compareValue="L">
                    ,REM_BANK_NM = NULL
                    ,REM_BANK_ADDRESS_1 = NULL
                    ,REM_BANK_ADDRESS_2 = NULL
                    ,REM_BANK_ADDRESS_3 = NULL
                    ,REM_BANK_ACCOUNT_NO = NULL
                    <isNotNull prepend="," property="lcNo">
                        LC_NO = #lcNo#
                    </isNotNull>
                    <isNotNull prepend="," property="lcDt">
                        LC_DT = #lcDt#
                    </isNotNull>
                    <isNotNull prepend="," property="lcBank1">
                        LC_BANK_NM_1 = #lcBank1#
                    </isNotNull>
                    <isNotNull prepend="," property="lcBank2">
                        LC_BANK_NM_2 = #lcBank2#
                    </isNotNull>
                </isEqual>
            </isNotNull>
            <isNotNull prepend="," property="currCd">
                CURR_CD = #currCd#
            </isNotNull>
            <isNotNull prepend="," property="netAmount">
                NET_AMOUNT = #netAmount#
            </isNotNull>
            <isNotNull prepend="," property="freight">
                FREIGHT = #freight#
            </isNotNull>
            <isNotNull prepend="," property="insurance">
                INSURANCE = #insurance#
            </isNotNull>
            <isNotNull prepend="," property="subTotal">
                SUB_TOTAL = #subTotal#
            </isNotNull>
            <isNotNull prepend="," property="vatRatio">
                VAT_RATIO = #vatRatio#
            </isNotNull>
            <isNotNull prepend="," property="vat">
                VAT = #vat#
            </isNotNull>
            <isNotNull prepend="," property="handlingCharge">
                HANDLING_CHARGE = #handlingCharge#
            </isNotNull>
            <isNotNull prepend="," property="additionalChargeNm">
                ADDITIONAL_CHARGE_NM = #additionalChargeNm#
            </isNotNull>
            <isNotNull prepend="," property="additionalCharge">
                ADDITIONAL_CHARGE = #additionalCharge#
            </isNotNull>
            <isNotNull prepend="," property="totalInvoiceAmount">
                TOTAL_INVOICE_AMOUNT = #totalInvoiceAmount#
            </isNotNull>
            <isNotNull prepend="," property="pltzItemQty">
                PLTZ_ITEM_QTY = #pltzItemQty#
            </isNotNull>
            <isNotNull prepend="," property="weightUnit">
                WEIGHT_UNIT = #weightUnit#
            </isNotNull>
            <isNotNull prepend="," property="totalNetWeight">
                TOTAL_NET_WEIGHT = #totalNetWeight#
            </isNotNull>
            <isNotNull prepend="," property="totalGrossWeight">
                TOTAL_GROSS_WEIGHT = #totalGrossWeight#
            </isNotNull>
            <isNotNull prepend="," property="volumeUnit">
                VOLUME_UNIT = #volumeUnit#
            </isNotNull>
            <isNotNull prepend="," property="totalVolume">
                TOTAL_VOLUME = #totalVolume#
            </isNotNull>
            <isNotNull prepend="," property="invoiceIssuerNm">
                INVOICE_ISSUER_NM = #invoiceIssuerNm#
            </isNotNull>
            <isNotNull prepend="," property="deleteFlg">
                DELETE_FLG = #deleteFlg#
            </isNotNull>
            <isNotNull prepend="," property="dscId">
                COM_UPDATE_USER_ID = #dscId#
            </isNotNull>
            <isParameterPresent prepend=",">
                COM_UPDATE_TIMESTAMP = SYSDATE
            </isParameterPresent>
        </dynamic>
        where
            SHIPPER_CD = #keyShipperCd#
        and INVOICE_NO = #keyInvoiceNo#
        <isNotEmpty prepend="and" property="keyInvoiceIssueDt">
            INVOICE_ISSUE_DT = #keyInvoiceIssueDt#
        </isNotEmpty>
        <isNotNull prepend="and" property="keyDeleteFlg">
            DELETE_FLG = #keyDeleteFlg#
        </isNotNull>
        <isNotNull prepend="and" property="comUpdateTimestamp">
            COM_UPDATE_TIMESTAMP = #comUpdateTimestamp#
        </isNotNull>
    </update>    

    <!-- ======================================================================================= -->
    <!-- Documentation Manual Invoice Upload画面 (インボイスヘッダーテーブルの更新)              -->
    <!-- ======================================================================================= -->
    <update id="UpdateTtInvoiceHeaderByKey" parameterClass="W6001DocCriteriaDomain">
        <dynamic prepend="update TT_INVOICE_HEADER set ">
        /* SqlMap-W6001Doc.UpdateTtInvoiceHeaderByKey */
            <isNotNull prepend="," property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="," property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotNull>
            <isNotEmpty prepend="," property="invoiceIssueDt">
                INVOICE_ISSUE_DT = #invoiceIssueDt#
            </isNotEmpty>
            <isNotNull prepend="," property="manualFlg">
                MANUAL_FLG = #manualFlg#
            </isNotNull>
            <isNotNull prepend="," property="typeOfInv">
                MANUAL_TYP = #typeOfInv#
            </isNotNull>
            <isNotNull prepend="," property="cancelInvoiceNo">
                CANCEL_INVOICE_NO = #cancelInvoiceNo#
            </isNotNull>
            <isNotNull prepend="," property="invoiceCtgry">
                INVOICE_CTGRY = #invoiceCtgry#
            </isNotNull>
            <isNotNull prepend="," property="invoiceCtgryNm">
                INVOICE_CTGRY_NM = #invoiceCtgryNm#
            </isNotNull>
            <isNotNull prepend="," property="totalNetWeight">
                TOTAL_NET_WEIGHT = #totalNetWeight#
            </isNotNull>
            <isNotNull prepend="," property="totalGrossWeight">
                TOTAL_GROSS_WEIGHT = #totalGrossWeight#
            </isNotNull>
            <isNotNull prepend="," property="totalVolume">
                TOTAL_VOLUME = #totalVolume#
            </isNotNull>
            <isNotNull prepend="," property="freightResponsibleCd">
                FREIGHT_RESPONSIBLE_CD = #freightResponsibleCd#
            </isNotNull>
            <isNotNull prepend="," property="freightResponsibleNm">
                FREIGHT_RESPONSIBLE_NM = #freightResponsibleNm#
            </isNotNull>
            <isNotNull prepend="," property="priceTerms">
                PRICE_TERMS = #priceTerms#
            </isNotNull>
            <isNotNull prepend="," property="tradeTerms">
                TRADE_TERMS = #tradeTerms#
            </isNotNull>
            <isNotNull prepend="," property="termsPoint">
                TERMS_POINT = #termsPoint#
            </isNotNull>
            <isNotNull prepend="," property="payTerms">
                PAY_TERMS = #payTerms#
            </isNotNull>
            <isNotNull prepend="," property="payMeth">
                PAY_METH = #payMeth#
            </isNotNull>
            <isNotNull prepend="," property="payMethNm">
                PAY_METH_NM = #payMethNm#
            </isNotNull>
            <isNotNull prepend="," property="remLcTyp">
                REM_LC_TYP = #remLcTyp#
                <isEqual property="remLcTyp" compareValue="R">
                    <isNotNull prepend="," property="remBankNm">
                        REM_BANK_NM = #remBankNm#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress1">
                        REM_BANK_ADDRESS_1 = #remBankAddress1#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress2">
                        REM_BANK_ADDRESS_2 = #remBankAddress2#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAddress3">
                        REM_BANK_ADDRESS_3 = #remBankAddress3#
                    </isNotNull>
                    <isNotNull prepend="," property="remBankAccountNo">
                        REM_BANK_ACCOUNT_NO = #remBankAccountNo#
                    </isNotNull>
                    ,LC_NO = NULL
                    ,LC_DT = NULL
                    ,LC_BANK_NM_1 = NULL
                    ,LC_BANK_NM_2 = NULL
                </isEqual>
                <isEqual property="remLcTyp" compareValue="L">
                    ,REM_BANK_NM = NULL
                    ,REM_BANK_ADDRESS_1 = NULL
                    ,REM_BANK_ADDRESS_2 = NULL
                    ,REM_BANK_ADDRESS_3 = NULL
                    ,REM_BANK_ACCOUNT_NO = NULL
                    <isNotNull prepend="," property="lcNo">
                        LC_NO = #lcNo#
                    </isNotNull>
                    <isNotNull prepend="," property="lcDt">
                        LC_DT = #lcDt#
                    </isNotNull>
                    <isNotNull prepend="," property="lcBank1">
                        LC_BANK_NM_1 = #lcBank1#
                    </isNotNull>
                    <isNotNull prepend="," property="lcBank2">
                        LC_BANK_NM_2 = #lcBank2#
                    </isNotNull>
                </isEqual>
            </isNotNull>

            <isNotNull prepend="," property="netAmount">
                NET_AMOUNT = #netAmount#
            </isNotNull>
            <isNotNull prepend="," property="netAmountCurrCd">
                NET_AMOUNT_CURR_CD = #netAmountCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="freight">
                FREIGHT = #freight#
            </isNotNull>
            <isNotNull prepend="," property="freightCurrCd">
                FREIGHT_CURR_CD = #freightCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="insurance">
                INSURANCE = #insurance#
            </isNotNull>
            <isNotNull prepend="," property="insuranceCurrCd">
                INSURANCE_CURR_CD = #insuranceCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="subTotal">
                SUB_TOTAL = #subTotal#
            </isNotNull>
            <isNotNull prepend="," property="subTotalCurrCd">
                SUB_TOTAL_CURR_CD = #subTotalCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="vatRatio">
                VAT_RATIO = #vatRatio#
            </isNotNull>
            <isNotNull prepend="," property="vat">
                VAT = #vat#
            </isNotNull>
            <isNotNull prepend="," property="vatCurrCd">
                VAT_CURR_CD = #vatCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="handlingCharge">
                HANDLING_CHARGE = #handlingCharge#
            </isNotNull>
            <isNotNull prepend="," property="handlingChargeCurrCd">
                HANDLING_CHARGE_CURR_CD = #handlingChargeCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="additionalChargeNm">
                ADDITIONAL_CHARGE_NM = #additionalChargeNm#
            </isNotNull>
            <isNotNull prepend="," property="additionalCharge">
                ADDITIONAL_CHARGE = #additionalCharge#
            </isNotNull>
            <isNotNull prepend="," property="additionalChargeCurrCd">
                ADDITIONAL_CHARGE_CURR_CD = #additionalChargeCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="totalInvoiceAmount">
                TOTAL_INVOICE_AMOUNT = #totalInvoiceAmount#
            </isNotNull>
            <isNotNull prepend="," property="totalInvoiceAmountCurrCd">
                TOTAL_INVOICE_AMOUNT_CURR_CD = #totalInvoiceAmountCurrCd#
            </isNotNull>
            <isNotNull prepend="," property="fileId">
                FILE_ID = #fileId#
            </isNotNull>
            <isNotNull prepend="," property="deleteFlg">
                DELETE_FLG = #deleteFlg#
            </isNotNull>
            <isNotNull prepend="," property="dscId">
                COM_UPDATE_USER_ID = #dscId#
            </isNotNull>
            <isParameterPresent prepend=",">
                COM_UPDATE_TIMESTAMP = SYSDATE
            </isParameterPresent>
        </dynamic>
        where
            SHIPPER_CD = #keyShipperCd#
        and INVOICE_NO = #keyInvoiceNo#
        <isNotEmpty prepend="and" property="keyInvoiceIssueDt">
            INVOICE_ISSUE_DT = #keyInvoiceIssueDt#
        </isNotEmpty>
        <isNotNull prepend="and" property="keyDeleteFlg">
            DELETE_FLG = #keyDeleteFlg#
        </isNotNull>
    </update>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Detail(Main)画面 (インボイス作成対象品番ワークをクリア)                                    -->
    <!-- ======================================================================================= -->
    <update id="UpdateTwInvItemOnInvoiceDetailForClear"
        parameterClass="W6001DocCriteriaDomain">
        update TW_INV_ITEM
        /* SqlMap-W6001Doc.UpdateTwInvItemOnInvoiceDetailForClear */
        set HS_CD = null
            , FREE_1_REG_FLG = 'N'
            , FREE_1_NM = null
            , FREE_1_DTL = null
            , FREE_1_ORIGIN_CNTRY_FLG = 'N'
            , FREE_2_REG_FLG = 'N'
            , FREE_2_NM = null
            , FREE_2_DTL = null
            , FREE_2_ORIGIN_CNTRY_FLG = 'N'
            , FREE_3_REG_FLG = 'N'
            , FREE_3_NM = null
            , FREE_3_DTL = null
            , FREE_3_ORIGIN_CNTRY_FLG = 'N'
        <isNotNull prepend="," property="comUpdateFuncId">
            COM_UPDATE_FUNC_ID = #comUpdateFuncId#
        </isNotNull>
        <isNotNull prepend="," property="comUpdateUserId">
            COM_UPDATE_USER_ID = #comUpdateUserId#
        </isNotNull>
        <isParameterPresent prepend=",">
            COM_UPDATE_TIMESTAMP = SYSDATE
        </isParameterPresent>
        <dynamic prepend="where">
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="grpNo1">
                GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isParameterPresent prepend="and">
                REMOVE_FLG = 'N'
            </isParameterPresent>
        </dynamic>
    </update>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Detail画面 (HS CODE警告情報かチェック)                                                -->
    <!-- ======================================================================================= -->
    <select id="SearchCountTwInvItemBySortNo" resultClass="java.lang.Integer"
        parameterClass="W6001DocCriteriaDomain">
        select 
        /* SqlMap-W6001Doc.SearchCountTwInvItemBySortNo */
            count(SORT_ODR)
        from TW_INV_ITEM
        <dynamic prepend="where">
            <isNotNull prepend ="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend ="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend ="and" property="grpNo1">
                GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isNotNull prepend ="and" property="grpNo2">
                GRP_NO_2 = #grpNo2#
            </isNotNull>
            <isParameterPresent prepend ="and">
                REMOVE_FLG = 'N'
            </isParameterPresent>
            <isParameterPresent prepend ="and">
                HS_CD is null
            </isParameterPresent>
        </dynamic>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Detail(Main) screen / get GRP_NO_2 removed                                      -->
    <!-- ======================================================================================= -->
    <sql id="Select_SearchTwInvItemByRemoveGrpNo2">
        select 'x' 
        from TW_INV_ITEM B 
        where 
            A.DSC_ID=B.DSC_ID 
        and A.SHIPPER_CD = B.SHIPPER_CD 
        and A.grp_no_1 = B.GRP_NO_1 
        and A.GRP_NO_2 = B.GRP_NO_2 
        and B.REMOVE_FLG = 'N'
    </sql>
    
    <select id="SearchTwInvItemByRemoveGrpNo2" resultMap="W6001DocPltzItemDomain_SearchTwInvItemByRemoveGrpNo2"
        parameterClass="W6001DocCriteriaDomain">
        select 
            /* SqlMap-W6001Doc.SearchTwInvItemByRemoveGrpNo2 */
            A.GRP_NO_2 
        from 
            TW_INV_ITEM A
        <dynamic prepend="where">
            <isNotNull prepend ="and" property="dscId">
                A.DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend ="and" property="shipperCd">
                A.SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend ="and" property="grpNo1">
                A.GRP_NO_1 = #grpNo1#
            </isNotNull>
            <isParameterPresent prepend ="and">
                A.GRP_NO_2 <![CDATA[<>]]> '0'
            </isParameterPresent>
            <isParameterPresent prepend ="and">
                not exists (<include refid="Select_SearchTwInvItemByRemoveGrpNo2"/>)
            </isParameterPresent>
        </dynamic>
        group by 
            A.GRP_NO_2
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Register screen / get Invoice Item No Work for Invoice Attached                 -->
    <!-- ======================================================================================= -->
    <sql id="Cols_SearchTwInvItemByInvoiceAttached">
        RT_FLG
        , KIT_FLG
        , CUSTOMER_PO_NO
        , CUSTOMER_ITEM_NO
        , ITEM_NO
        , PKG_CD
        , ITEM_DESCRIPTION
        , MODEL_CD
        , EXP_REQUEST_NO
        , LINE_NO
        , KIT_BRCH
        , PAR_FLG
        , KIT_PAR_ITEM_NO
        , CURR_CD
        , UNIT_PRICE
        , QTY_UNIT
        , WEIGHT_UNIT
        , ITEM_WEIGHT
        , HS_CD
        , ORIGIN_CNTRY_CD
        , FREE_1_REG_FLG
        , FREE_1_NM
        , FREE_1_DTL
        , FREE_1_ORIGIN_CNTRY_FLG
        , FREE_2_REG_FLG
        , FREE_2_NM
        , FREE_2_DTL
        , FREE_2_ORIGIN_CNTRY_FLG
        , FREE_3_REG_FLG
        , FREE_3_NM
        , FREE_3_DTL
        , FREE_3_ORIGIN_CNTRY_FLG
        <!-- UT287 ADD START -->
        , LENGTH_UNIT
        , LENGTH
        , WIDTH
        , HEIGHT
        <!-- UT287 ADD END -->
    </sql>
    
    <select id="SearchTwInvItemByInvoiceAttached" resultMap="W6001DocPltzItemDomain_SearchTwInvItemByInvoiceAttached"
        parameterClass="W6001DocCriteriaDomain">
        select 
            /* SqlMap-W6001Doc.SearchTwInvItemByInvoiceAttached */
            <include refid="Cols_SearchTwInvItemByInvoiceAttached"/>
            , sum(nvl(QTY, 0)) SUM_QTY
            , sum(nvl(NET_WEIGHT, 0)) SUM_NET_WEIGHT
        from TW_INV_ITEM
        <dynamic prepend="where">
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotNull>
            <!-- 2015/3/11 DNJP.Kawamura UT202対応 START >>>>> -->
            <isParameterPresent prepend ="and">
                UNIT_PRICE != '0'
            </isParameterPresent>
            <!-- 2015/3/11 DNJP.Kawamura UT202対応 END <<<<< -->
        </dynamic>
        group by
            <include refid="Cols_SearchTwInvItemByInvoiceAttached"/>
        <!-- 2015/3/11 DNJP.Kawamura KIT品対応 START >>>>> -->
        order by
            LINE_NO
          , KIT_BRCH NULLS FIRST
        <!-- 2015/3/11 DNJP.Kawamura KIT品対応 END <<<<< -->
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Invoice Register screen / get Invoice Item No Work for Packing Attached Item No         -->
    <!-- ======================================================================================= -->
    <sql id="Cols_SearchTwInvItemByPackingAttachedItem">
        CUSTOMER_PO_NO
        , CUSTOMER_ITEM_NO
        , ITEM_NO
        , PKG_CD
        , ITEM_DESCRIPTION
        , MODEL_CD
        , EXP_REQUEST_NO
        , LINE_NO
        , KIT_BRCH
        , KIT_FLG
        , PAR_FLG
        , KIT_PAR_ITEM_NO
        , ITEM_WEIGHT
        , MAIN_MARK
        , RT_FLG
        , QTY_UNIT
        , WEIGHT_UNIT
    </sql>

    <select id="SearchTwInvItemByPackingAttachedItem" resultMap="W6001DocPltzItemDomain_SearchTwInvItemByPackingAttachedItem"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTwInvItemByPackingAttachedItem */
            <include refid="Cols_SearchTwInvItemByPackingAttachedItem"/>
            , sum(nvl(QTY, 0)) SUM_QTY
            , sum(nvl(NET_WEIGHT, 0)) SUM_NET_WEIGHT
        from TW_INV_ITEM
        <dynamic prepend="where">
            <isNotNull prepend="and" property="shipperCd">
                SHIPPER_CD = #shipperCd#
            </isNotNull>
            <isNotNull prepend="and" property="dscId">
                DSC_ID = #dscId#
            </isNotNull>
            <isNotNull prepend="and" property="invoiceNo">
                INVOICE_NO = #invoiceNo#
            </isNotNull>
            <isNotNull prepend="and" property="mainMark">
                Main_Mark = #mainMark#
            </isNotNull>
        </dynamic>
        group by
            <include refid="Cols_SearchTwInvItemByPackingAttachedItem"/>
        <!-- 2015/3/11 DNJP.Kawamura KIT品対応 START >>>>> -->
        order by
            LINE_NO
          , KIT_BRCH NULLS FIRST
        <!-- 2015/3/11 DNJP.Kawamura KIT品対応 END <<<<< -->
    </select>
    
    <!-- 2014/09/01 DNJP.Kawamura (DIAT)InvoiceDB対応 START >>>>> -->
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (Ws6005呼出パラメータ情報取得/EDT47PR用情報)              -->
    <!-- ======================================================================================= -->
    <!-- 項目 -->
    <sql id="Cols_SearchTtInvoiceAttachedByEDT47PRRegister">
        T3.CUR_LGCY_WH_CD
        , T5.ETD_DUE_DT
        , T6.SALES_COMP_PO_NO
        , T2.CUSTOMER_PO_NO
        , T2.CUSTOMER_ITEM_NO
        , T2.ITEM_NO
        , T2.UNIT_PRICE
        , T2.UNIT_PRICE_CURR_CD
        , T2.QTY_UNIT
        , T2.LGCY_UNIT_CD
        , T2.ORIGIN_CNTRY_CD
        , T4.SHIPPING_LOT <!-- UT413-3 ADD -->
        , T2.ITEM_DESCRIPTION <!-- UT432 ADD -->
    </sql>
    
    <!-- Search Invoice Attached -->
    <sql id="Select_SearchTtInvoiceAttachedByEDT47PRRegister">
        select
            distinct
            A.CUSTOMER_PO_NO
            , A.CUSTOMER_ITEM_NO
            , A.ITEM_NO
            , A.UNIT_PRICE
            , A.PKG_CD
            , A.UNIT_PRICE_CURR_CD
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 START >>>>> -->
            <!-- , A.QTY_UNIT -->
            , B.LGCY_UNIT_DISP QTY_UNIT
            <!-- 2014/12/10 DNJP.Kawamura ST183対応 END <<<<< -->
            , B.LGCY_UNIT_CD
            , A.ORIGIN_CNTRY_CD
            , A.ITEM_DESCRIPTION <!-- UT432 ADD -->
        from
            TT_INVOICE_ATTACHED A
            , TM_MEASURE_UNIT B 
        where
            A.SHIPPER_CD = #shipperCd#
            and A.INVOICE_NO = #invoiceNo#
            and A.INVOICE_ISSUE_DT = #invoiceIssueDt#
            and A.QTY_UNIT = B.UNIT_CD(+)
    </sql>

    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceAttachedByEDT47PRRegister) -->
    <select id="SearchTtInvoiceAttachedByEDT47PRRegister" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT47PRRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceAttachedByEDT47PRRegister */
            <include refid="Cols_SearchTtInvoiceAttachedByEDT47PRRegister" />
            , sum(T5.ALLOC_QTY) ALLOC_QTY 
        from
              TT_INVOICE T1
            , (<include refid="Select_SearchTtInvoiceAttachedByEDT47PRRegister" />) T2
            , TT_PLTZ T3
            , TT_PLTZ_ITEM T4
            , TT_PLTZ_ITEM_ODR T5
            , TT_EXP_RCV_ODR T6
        where
            T1.SHIPPER_CD = T3.SHIPPER_CD 
        and T1.INVOICE_NO = T3.INVOICE_NO 
        and T1.INVOICE_ISSUE_DT = T3.INVOICE_ISSUE_DT 
        and T3.MAIN_MARK = T4.MAIN_MARK 
        and T4.MAIN_MARK = T5.MAIN_MARK 
        and T4.BRCH = T5.BRCH 
        and T5.ITEM_NO = T2.ITEM_NO(+) 
        and T5.PKG_CD = T2.PKG_CD(+) 
        and T5.CUSTOMER_PO_NO = T2.CUSTOMER_PO_NO(+) 
        and T5.CUSTOMER_ITEM_NO = T2.CUSTOMER_ITEM_NO(+)
        and T5.RCV_ODR_COMP_CD = T6.RCV_ODR_COMP_CD(+) 
        and T5.CUSTOMER_CD = T6.CUSTOMER_CD(+) 
        and T5.LGCY_SHIP_TO = T6.LGCY_SHIP_TO(+) 
        and T5.ITEM_NO = T6.ITEM_NO(+) 
        and T5.PKG_CD = T6.PKG_CD(+) 
        and T5.TRNS_CD = T6.TRNS_CD(+) 
        and T5.ETD_DUE_DT = T6.ETD_DUE_DT(+) 
        and T5.CUSTOMER_PO_NO = T6.CUSTOMER_PO_NO(+) 
        and T5.CUSTOMER_ITEM_NO = T6.CUSTOMER_ITEM_NO(+) 
        and T5.CUSTOMER_ITEM_NO_ORG = T6.CUSTOMER_ITEM_NO_ORG(+) 
        and T5.ODR_CTRL_NO = T6.ODR_CTRL_NO(+) 
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        and T1.CML_TYP = '1' 
        and T1.INVOICE_CLASS = 'M'
        group by <include refid="Cols_SearchTtInvoiceAttachedByEDT47PRRegister"/>
    </select>
    
    <!-- ======================================================================================= -->
    <!-- Documentation Invoice Register画面 (Ws6005呼出パラメータ情報取得/EDT45PR用情報)              -->
    <!-- ======================================================================================= -->
    <!-- 項目 -->
    <sql id="Cols_SearchTtInvoiceAttachedByEDT45PRRegister">
        T1.FREIGHT
        , T1.INSURANCE
        , T1.TOTAL_INVOICE_AMOUNT
        , T3.MAIN_MARK
        , T3.GROSS_WEIGHT
        , T2.CUSTOMER_ITEM_NO
        , T2.CUSTOMER_PO_NO
        , T2.ITEM_NO
        , T2.UNIT_PRICE
        , T2.UNIT_PRICE_CURR_CD
        , T4.ITEM_WEIGHT
        , T4.WEIGHT_UNIT <!-- IN162 ADD -->
        <!-- 2014/12/10 DNJP.Kawamura ST183対応 START >>>>> -->
        <!-- , T2.LGCY_UNIT_CD -->
        , T2.QTY_UNIT
        <!-- 2014/12/10 DNJP.Kawamura ST183対応 END <<<<< -->
  <!--  , count(T3.MAIN_MARK) COUNT_MAIN_MARK -->
        , T2.ITEM_DESCRIPTION <!-- UT432 ADD -->
    </sql>
    
    <!-- 検索 SQL文 (W6001Doc.SearchTtInvoiceAttachedByEDT47PRRegister) -->
    <select id="SearchTtInvoiceAttachedByEDT45PRRegister" resultMap="W6001DocInvoiceDomain_SearchTtInvoiceAttachedByEDT45PRRegister"
        parameterClass="W6001DocCriteriaDomain">
        select
            /* SqlMap-W6001Doc.SearchTtInvoiceAttachedByEDT45PRRegister */
            <include refid="Cols_SearchTtInvoiceAttachedByEDT45PRRegister" />
            , sum(T5.ALLOC_QTY) ALLOC_QTY 
            <!-- 2015/11/11 DNJP.Kawamura START >>>>> -->
            <!-- 
            , (T2.UNIT_PRICE * ALLOC_QTY) NET_AMOUNT
            , (T4.ITEM_WEIGHT * ALLOC_QTY) NET_WEIGHT
            -->
            , (T2.UNIT_PRICE * sum(T5.ALLOC_QTY)) NET_AMOUNT
            , (T4.ITEM_WEIGHT * sum(T5.ALLOC_QTY)) NET_WEIGHT
            <!-- 2015/11/11 DNJP.Kawamura END <<<<< -->
        from
              TT_INVOICE T1
            , (<include refid="Select_SearchTtInvoiceAttached" />) T2
            , TT_PLTZ T3
            , TT_PLTZ_ITEM T4
            , TT_PLTZ_ITEM_ODR T5
        where
            T1.SHIPPER_CD = T3.SHIPPER_CD 
        and T1.INVOICE_NO = T3.INVOICE_NO 
        and T1.INVOICE_ISSUE_DT = T3.INVOICE_ISSUE_DT 
        and T3.MAIN_MARK = T4.MAIN_MARK 
        and T4.MAIN_MARK = T5.MAIN_MARK 
        and T4.BRCH = T5.BRCH 
        and T5.ITEM_NO = T2.ITEM_NO(+) 
        and T5.PKG_CD = T2.PKG_CD(+) 
        and T5.CUSTOMER_PO_NO = T2.CUSTOMER_PO_NO(+) 
        and T5.CUSTOMER_ITEM_NO = T2.CUSTOMER_ITEM_NO(+)
        and T1.SHIPPER_CD = #shipperCd#
        and T1.INVOICE_NO = #invoiceNo#
        and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
        and T1.CML_TYP = '1' 
        and T1.INVOICE_CLASS = 'M'
        group by <include refid="Cols_SearchTtInvoiceAttachedByEDT45PRRegister"/>
            <!-- 2015/11/11 DNJP.Kawamura START >>>>> -->
            <!-- 
            , (T2.UNIT_PRICE * ALLOC_QTY)
            , (T4.ITEM_WEIGHT * ALLOC_QTY)
            -->
            <!-- 2015/11/11 DNJP.Kawamura END <<<<< -->
    </select>
    <!-- 2014/09/01 DNJP.Kawamura (DIAT)InvoiceDB対応 END <<<<< -->

    <!--
    =======================================================================================
    == Get the information of TW_INV_PLTZ for the unit conversion.
    == Get together the results of the summary of the N/W of TW_INV_ITEM.
    == For main invoice only.
    == 単位換算を行うためパレタイズワークの情報を取得する。
    == 品目番号ワークのN/Wをサマリした結果を併せて取得する。
    == メインインボイス専用。
    == ST959 UNIT CONVERSION ADD
    =======================================================================================
    -->
    <select id="SearchTwInvPltzOnRegisterByWorkPhase" resultMap="W6001DocPltzDomain_SearchTwInvPltzOnRegisterByWorkPhase"
        parameterClass="W6001DocCriteriaDomain">

        select
        /* SqlMap-W6001Doc.SearchTwInvPltzOnRegisterByWorkPhase */
            T1.DSC_ID
        ,   T1.MAIN_MARK
        ,   T1.VOLUME
        ,   T1.VOLUME_UNIT
        ,   T1.GROSS_WEIGHT
        ,   T1.WEIGHT_UNIT
        ,   sum(T2.NET_WEIGHT) NET_WEIGHT
        from
            TW_INV_PLTZ T1
        ,   TW_INV_ITEM T2
        where
            T1.DSC_ID = T2.DSC_ID
        and T1.MAIN_MARK = T2.MAIN_MARK
        and T1.DSC_ID = #dscId#
        and T1.GRP_NO_1 = #grpNo1#
        and T1.REMOVE_FLG = 'N'
        <!-- // 2015/10/08 DNJP.Kawamura 仮インボイスNo登録条件からシッパーが抜けているため修正 START >>>>> -->
        and T1.SHIPPER_CD = #shipperCd#
        <!-- // 2015/10/08 DNJP.Kawamura 仮インボイスNo登録条件からシッパーが抜けているため修正 END <<<<< -->
        and T2.GRP_NO_1 = #grpNo1#
        and T2.GRP_NO_2 = '0'
        and T2.REMOVE_FLG = 'N'
        group by
            T1.DSC_ID
        ,   T1.MAIN_MARK
        ,   T1.VOLUME
        ,   T1.VOLUME_UNIT
        ,   T1.GROSS_WEIGHT
        ,   T1.WEIGHT_UNIT
        order by
            T1.MAIN_MARK
    </select>

    <!--
    =======================================================================================
    == Search for creating CML attach CSV file.
    == For main invoice only.
    == CMLアタッチCSVファイルを作成するための検索SQL
    == メインインボイス専用。
    == UT205 CML ATTACH CSV ADD
    =======================================================================================
    -->
    <select id="SearchForCreateCmlAttachCsvFile" resultMap="F6051CmlAtchFileDomain_SearchForCreateCmlAttachCsvFile"
        parameterClass="W6001DocCriteriaDomain">

        select
        /* SqlMap-W6001Doc.SearchForCreateCmlAttachCsvFile */
            T5.COMP_NM_ABB SHIPPER_NM_ABB
        ,   T6.COMP_NM_ABB CONSIGNEE_NM_ABB
        ,   T7.SHIP_TO_NM_ABB
        ,   T1.INVOICE_NO
        ,   T2.CONTAINER_NO
        ,   T1.MAIN_MARK
        ,   T2.ITEM_TYP_NAME
        ,   T1.MODEL_CD <!-- UT416 ADD -->
        ,   decode(T4.INVOICE_CLASS, 'M', T1.ITEM_NO, NULL) ITEM_NO <!-- UT416 MOD -->
        ,   T1.CUSTOMER_ITEM_NO
        ,   T1.ITEM_DESCRIPTION
        ,   to_char(T1.QTY) QTY
        ,   T1.QTY QTY_VAL <!-- IN174 ADD -->
        ,   to_char(T3.VOLUME, 'FM999999999990.000') VOLUME
        ,   T10.UNIT_DISP VOLUME_UNIT_DISP
        ,   to_char(T2.ITEM_WEIGHT, 'FM9999990.000') ITEM_WEIGHT
        ,   T2.ITEM_WEIGHT ITEM_WEIGHT_VAL <!-- IN174 ADD -->
        ,   T2.WEIGHT_UNIT ITEM_WEIGHT_UNIT <!-- IN174 ADD -->
        ,   T11.UNIT_DISP ITEM_WEIGHT_UNIT_DISP
        ,   T3.NET_WEIGHT_UNIT <!-- IN174 ADD -->
        ,   T8.UNIT_DISP NET_WEIGHT_UNIT_DISP <!-- IN174 ADD -->
        ,   to_char(T3.GROSS_WEIGHT, 'FM9999990.000') GROSS_WEIGHT
        ,   T9.UNIT_DISP GROSS_WEIGHT_UNIT_DISP
        ,   T2.PALLET_CARTON_TYP <!-- UT420 ADD -->
        from
            (
                select
                    T1.SHIPPER_CD
                ,   T1.INVOICE_NO
                ,   T1.INVOICE_ISSUE_DT
                ,   T1.MAIN_MARK
                ,   T1.CUSTOMER_ITEM_NO
                ,   T1.ITEM_NO
                ,   T1.ITEM_DESCRIPTION
                <!-- MGT559 ADD START -->
                ,   T1.EXP_REQUEST_NO
                ,   T1.LINE_NO
                ,   T1.KIT_BRCH
                <!-- MGT559 ADD END -->
                ,   T1.MODEL_CD <!-- UT416 ADD -->
                ,   SUM(T1.QTY) QTY
                from
                    TT_PACK_ATCH_ITEM_NO T1
                where
                    T1.SHIPPER_CD       = #shipperCd#
                and T1.INVOICE_NO       = #invoiceNo#
                and T1.INVOICE_ISSUE_DT = #invoiceIssueDt#
                group by
                    T1.SHIPPER_CD
                ,   T1.INVOICE_NO
                ,   T1.INVOICE_ISSUE_DT
                ,   T1.MAIN_MARK
                ,   T1.CUSTOMER_ITEM_NO
                ,   T1.ITEM_NO
                ,   T1.ITEM_DESCRIPTION
                <!-- MGT559 ADD START -->
                ,   T1.EXP_REQUEST_NO
                ,   T1.LINE_NO
                ,   T1.KIT_BRCH
                <!-- MGT559 ADD END -->
                ,   T1.MODEL_CD <!-- UT416 ADD -->
            ) T1
        ,   (
                select
                    T1.MAIN_MARK
                ,   T1.PLTZ_ITEM_NO
                <!-- MGT559 ADD START -->
                ,   T1.EXP_REQUEST_NO
                ,   T1.LINE_NO
                ,   T1.KIT_BRCH
                <!-- MGT559 ADD END -->
                ,   T3.CONTAINER_NO
                ,   T4.VALUE ITEM_TYP_NAME
                ,   T5.VALUE PALLET_CARTON_TYP <!-- UT420 ADD -->
                ,   min(T1.ITEM_WEIGHT) ITEM_WEIGHT
                ,   min(T1.WEIGHT_UNIT) WEIGHT_UNIT
                from
                    TT_PLTZ_ITEM T1
                ,   TT_PLTZ T2
                ,   TT_SHIPPING_FIRM T3
                ,   TM_CD T4
                ,   TM_CD T5 <!-- UT420 ADD -->
                where
                    T1.MAIN_MARK        = T2.MAIN_MARK
                and T2.SHIPPING_FIRM_NO = T3.SHIPPING_FIRM_NO(+)
                and T2.SHIPPER_CD       = #shipperCd#
                and T2.INVOICE_NO       = #invoiceNo#
                and T2.INVOICE_ISSUE_DT = #invoiceIssueDt#
                and decode(T1.ITEM_TYP, NULL, '1', T1.ITEM_TYP) = T4.CD
                and T4.CD_TYP           = '14'
                and T4.LNG_CD           = 'en'
                and T2.PALLET_CARTON_TYP = T5.CD(+) <!-- UT420 ADD -->
                and T5.CD_TYP(+)        = '77' <!-- UT420 ADD -->
                and T5.LNG_CD(+)        = 'en' <!-- UT420 ADD -->
                group by
                    T1.MAIN_MARK
                ,   T1.PLTZ_ITEM_NO
                <!-- MGT559 ADD START -->
                ,   T1.EXP_REQUEST_NO
                ,   T1.LINE_NO
                ,   T1.KIT_BRCH
                <!-- MGT559 ADD END -->
                ,   T3.CONTAINER_NO
                ,   T4.VALUE
                ,   T5.VALUE <!-- UT420 ADD -->
            ) T2
        ,   TT_PACKING_ATTACHED_CML T3
        ,   TT_INVOICE T4
        ,   TM_NXS_COMP T5
        ,   TM_NXS_COMP T6
        ,   TM_NXS_SHIP_TO T7
        ,   TM_MEASURE_UNIT T8 <!-- IN174 ADD -->
        ,   TM_MEASURE_UNIT T9
        ,   TM_MEASURE_UNIT T10
        ,   TM_MEASURE_UNIT T11
        where
            T1.MAIN_MARK            = T2.MAIN_MARK
        <!-- MGT559 MOD START -->
        <isNotEqual property="cmlTyp" compareValue="3">
        and T1.ITEM_NO              = T2.PLTZ_ITEM_NO
        </isNotEqual>
        <isEqual property="cmlTyp" compareValue="3">
        and T1.EXP_REQUEST_NO       = T2.EXP_REQUEST_NO
        and T1.LINE_NO              = T2.LINE_NO
        and T1.KIT_BRCH             = T2.KIT_BRCH
        </isEqual>
        <!-- MGT559 MOD END -->
        and T1.SHIPPER_CD           = T3.SHIPPER_CD
        and T1.INVOICE_NO           = T3.INVOICE_NO
        and T1.INVOICE_ISSUE_DT     = T3.INVOICE_ISSUE_DT
        and T1.MAIN_MARK            = T3.MAIN_MARK
        and T1.SHIPPER_CD           = T4.SHIPPER_CD
        and T1.INVOICE_NO           = T4.INVOICE_NO
        and T1.INVOICE_ISSUE_DT     = T4.INVOICE_ISSUE_DT
        and T4.SHIPPER_CD           = T5.COMP_CD
        and T4.CONSIGNEE_CD         = T6.COMP_CD
        and T4.SHIP_TO_CD           = T7.SHIP_TO_CD
        and T3.NET_WEIGHT_UNIT      = T8.UNIT_CD <!-- IN174 ADD -->
        and T3.GROSS_WEIGHT_UNIT    = T9.UNIT_CD
        and T3.VOLUME_UNIT          = T10.UNIT_CD
        and T2.WEIGHT_UNIT          = T11.UNIT_CD
        order by
            T2.CONTAINER_NO
        ,   T1.MAIN_MARK
        ,   T1.ITEM_NO
        ,   T1.CUSTOMER_ITEM_NO
    </select>

    <!--
    =======================================================================================
    == Update TW_INV_PLTZ for override price terms and trade terms.
    == Only the CIGMA parts.
    == インボイス作成対象パレタイズワークの建値条件・契約条件を上書きするための更新SQL。
    == CIGMA品のみを対象とする。
    == UT284 ADD
    =======================================================================================
    -->
    <update id="UpdateTwInvItemBySearchForTradeTermsRevice" parameterClass="W6001DocCriteriaDomain">
        update TW_INV_PLTZ T1
        /* SqlMap-W6001Doc.UpdateTwInvItemBySearchForTradeTermsRevice */
        set (
            T1.PRICE_TERMS
        ,   T1.TRADE_TERMS
        ,   T1.COM_UPDATE_FUNC_ID
        ,   T1.COM_UPDATE_USER_ID
        ,   T1.COM_UPDATE_TIMESTAMP
        ) =
        (
            select
                T2.PRICE_TERMS
            ,   T2.TRADE_TERMS
            ,   #comUpdateFuncId#
            ,   #comUpdateUserId#
            ,   SYSDATE
            from
                TM_TRADE_TERMS_REVISE T2
            where
                T2.SHIPPER_CD = T1.SHIPPER_CD
            and T2.CUSTOMER_CD = T1.CUSTOMER_CD
            and T2.TRNS_CD = T1.TRNS_CD
        )
        where
            T1.DSC_ID = #dscId#
        and T1.SHIPPER_CD = #shipperCd#
        and T1.CML_TYP = '1'
        and exists (
                select
                    'X'
                from
                    TM_TRADE_TERMS_REVISE T2
                where
                    T2.SHIPPER_CD = T1.SHIPPER_CD
                and T2.CUSTOMER_CD = T1.CUSTOMER_CD
                and T2.TRNS_CD = T1.TRNS_CD
            )
    </update>

    <!--
    =======================================================================================
    == Search SQL for obtaining Packing Summary Attach Flag.
    == パッキングサマリ添付フラグを取得するための検索SQL
    == NL023 ADD
    =======================================================================================
    -->
    <select id="SerchPackingSummaryAtchFlg" resultClass="java.lang.String" parameterClass="W6001DocCriteriaDomain">

        select
        /* SqlMap-W6001Doc.SerchPackingSummaryAtchFlg */
            T1.PACKING_SUMMARY_ATCH_FLG
        from
            TM_EXP_SHIP_TO_SHIPPING T1
        where
            T1.COMP_CD      = #shipperCd#
        and T1.SHIP_TO_CD   = #shipToCd#
        and T1.APLY_STRT_DT = (
            select
                max(T1.APLY_STRT_DT)
            from
                TM_EXP_SHIP_TO_SHIPPING T1
            where
                T1.COMP_CD       = #shipperCd#
            and T1.SHIP_TO_CD    = #shipToCd#
            and T1.APLY_STRT_DT  <![CDATA[ <= ]]> #aplyStrtDt#
        )
    </select>
</sqlMap>
